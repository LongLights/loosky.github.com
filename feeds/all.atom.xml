<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Loosky's Blog</title><link href="http://loosky.com/" rel="alternate"></link><link href="http://loosky.com/feeds/all.atom.xml" rel="self"></link><id>http://loosky.com/</id><updated>2013-10-01T00:00:00+08:00</updated><entry><title>长微博生成（html to image）原理</title><link href="http://loosky.com/Technology/2013/10/01/changweibo.html" rel="alternate"></link><updated>2013-10-01T00:00:00+08:00</updated><author><name>Loosky</name></author><id>tag:loosky.com,2013-10-01:Technology/2013/10/01/changweibo.html</id><summary type="html">&lt;p&gt;在平时工作中有一些需求，简单而言就是需要将一些内容生成图片。简单的内容通过PhotoShop处理还行，但是类似于带表格等的内容，每次都通过PhotoShop进行处理太浪费时间。网上有很多类似于长微博等的生成工具，生成简单的图片还行，但是要使用富文本生成图片，则多需要money，于是便自己研究了一下基于PHP的实现。&lt;/p&gt;
&lt;p&gt;首先展示一下&lt;strong&gt;演示效果&lt;/strong&gt;：&lt;a href="http://loosky.cn/"&gt;http://loosky.cn/&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;需求及原理&lt;/h3&gt;
&lt;p&gt;基于PHP，将html内容生成图片（PNG，JPEG等）&lt;/p&gt;
&lt;h3&gt;实现方法&lt;/h3&gt;
&lt;h4&gt;1. 直接通过图形函数生成&lt;/h4&gt;
&lt;p&gt;可以直接使用PHP中自带的&lt;a href="http://php.net/manual/zh/book.image.php"&gt;GD库&lt;/a&gt;或&lt;a href="http://php.net/manual/zh/book.imagick.php"&gt;imagick&lt;/a&gt;，将文字内容转换成为图片。这在处理纯文字内容的时候是很给力的，但是对于富文本内容来说却很吃力了，很难处理好。目前开源的有&lt;a href="https://code.google.com/p/yenohblog/downloads/detail?name=painty.zip&amp;amp;can=2&amp;amp;q="&gt;painty&lt;/a&gt;等，可以支持p、img等几个简单的html标签。&lt;/p&gt;
&lt;h4&gt;2. html-&amp;gt;pdf-&amp;gt;png&lt;/h4&gt;
&lt;p&gt;该方式即首先将html内容生成pdf文档，再将pdf文档转换成为图片。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;html to pdf&lt;/strong&gt;：目前较为成熟的方案包括&lt;a href="http://loosky.net/archives/1963.html"&gt;tcpdf&lt;/a&gt;，&lt;a href="http://html2pdf.fr/en/default"&gt;HTML2PDF&lt;/a&gt;等，其实HTML2PDF也是使用的tcpdf的内核;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;pdf to png&lt;/strong&gt;：可以通过&lt;a href="http://php.net/manual/zh/book.imagick.php"&gt;imagick php&lt;/a&gt;扩展。&lt;/p&gt;
&lt;p&gt;目前基于该种方式的开源代码有&lt;a href="http://buffernow.com/html-to-image-php-script/"&gt;html to image&lt;/a&gt;，其原理如下图所示。&lt;/p&gt;
&lt;p&gt;&lt;img alt="html to image示意图" src="http://loosky.net/Upload/2013/09/html-to-image-php-script.png" /&gt;&lt;/p&gt;
&lt;p&gt;核心代码为（摘自：&lt;a href="http://buffernow.com/html-to-image-php-script/"&gt;http://buffernow.com/html-to-image-php-script/&lt;/a&gt;）：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;    &lt;span class="c1"&gt;//获取某个URL地址的内容&lt;/span&gt;
    &lt;span class="n"&gt;echo&lt;/span&gt; &lt;span class="nf"&gt;file_get_contents&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;http&lt;/span&gt;&lt;span class="o"&gt;://&lt;/span&gt;&lt;span class="n"&gt;loosky&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="c1"&gt;//将内容转换成pdf文档&lt;/span&gt;
    &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;html2pdf&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;new&lt;/span&gt; &lt;span class="n"&gt;HTML2PDF&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;P&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;A4&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;html2pdf&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;writeHTML&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;html_content&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;html2pdf&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;Output&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;temp&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pdf&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;,&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;F&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="c1"&gt;//将pdf文档转换成图片&lt;/span&gt;
    &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;im&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;new&lt;/span&gt; &lt;span class="n"&gt;imagick&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;temp&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pdf&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;im&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;setImageFormat&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;jpg&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;img_name&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;jpg&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;im&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;setSize&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;800&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;600&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;im&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;writeImage&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;img_name&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;im&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;clear&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;im&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;destroy&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;这里使用了HTML2PDF的代码，其实个人建议使用tcpdf的，毕竟tcpdf的版本更新，功能更为强大。经过实际测试，tcpdf对中文、html格式等的支持更好，相对而言，HTML2PDF有点惨不忍睹，较长的中文会出现无法自动换行等基本错误。&lt;/p&gt;
&lt;p&gt;但同时，这种方法存在一个较大的缺陷，当插入了图片等媒体后，经常会出现一页内无法放进去需要重新在另外一页进行排版的问题，从而生成的图片就会有较大的空白区域；同时每页的内容如果没有完全排满的话，生成的图片同样存在较大的空白区域，十分不美观。&lt;/p&gt;
&lt;p&gt;因此，并不推荐这种方式。&lt;/p&gt;
&lt;h4&gt;3. 通过截图&lt;/h4&gt;
&lt;p&gt;该种方式类似于采用浏览器的截图功能，直接将某个URL地址的内容进行截图。相对前面两种方式而言：第一，对于富文本的html内容渲染更为方便、简单，直接生成html代码即可；第二，内容排版更为合理，不会出现pdf文档中存在的空白区域等问题；第三，对于中文的支持更为友好。&lt;/p&gt;
&lt;p&gt;目前主要的开源项目包括：&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;a href="http://khtml2png.sourceforge.net/"&gt;khtml2png&lt;/a&gt;&lt;/strong&gt;：基于Linux平台，可以将html转成图片格式，有如下要求：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;g&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;
&lt;span class="n"&gt;KDE&lt;/span&gt; &lt;span class="mf"&gt;3.&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;
&lt;span class="n"&gt;kdelibs&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;KDE&lt;/span&gt; &lt;span class="mf"&gt;3.&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;kdelibs4&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;dev&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;zlib&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;zlib1g&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;dev&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;cmake&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;对于服务器而言，尤其是资源比较吃紧的VPS而言，安装一个KED有点花销太大。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;a href="http://cutycapt.sourceforge.net/"&gt;CutyCapt&lt;/a&gt;&lt;/strong&gt;及其兄弟版本&lt;strong&gt;&lt;a href="http://iecapt.sourceforge.net/"&gt;IECapt&lt;/a&gt;&lt;/strong&gt;：其中CutyCapt是基于Linux、Windows平台，IECapt基于Windows平台，支持svg,ps,pdf,itext,html,rtree,png,jpeg,mng,tiff,gif,bmp,ppm,xbm,xpm等多种格式，使用均较为简单，直接使用如下命令。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;注意：CutyCapt的可执行命令在Windows平台和Linux平台下的大小写不太一致。&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;CutyCapt&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;http&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="c1"&gt;//www.example.org --out=example.png&lt;/span&gt;

&lt;span class="n"&gt;IECapt&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;http&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="c1"&gt;//www.example.org/ --out=localfile.png&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;它的部署要求是：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;CutyCapt&lt;/span&gt; &lt;span class="n"&gt;depends&lt;/span&gt; &lt;span class="n"&gt;on&lt;/span&gt; &lt;span class="n"&gt;Qt&lt;/span&gt; &lt;span class="mf"&gt;4.4.0&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;但是它比khtml2png好的一点是它可以不用装X server，可以用Xvfb这种轻量级的东西，然后可以这样使用：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;xvfb&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;run&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;server&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;-screen 0, 1024x768x24&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;CutyCapt&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;out&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;通过对各种实现方式进行实际的对比，本人倾向于采用CutyCapt的方式。&lt;/p&gt;
&lt;h3&gt;具体实现过程&lt;/h3&gt;
&lt;p&gt;1、如&lt;a href="http://loosky.cn/"&gt;http://loosky.cn/&lt;/a&gt;首页所示，通过嵌入富文本编辑器，提供富文本编辑功能，同时可以提供对作者信息、版权标记、图片大小格式等的定制。&lt;/p&gt;
&lt;p&gt;2、将提交的内容进行过滤，并生成htm/html文档，通过CSS对生成的文档内容进行格式渲染。&lt;/p&gt;
&lt;p&gt;3、通过PHP执行CutyCapt命令，对生成的网页文件进行截图。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;到这一步已经完全可以实现html内容生成图片的功能了，但CutyCapt生成的图片相对而言会比较大，因此还可以进一步进行优化。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;4、通过imagick对生成的图片进行优化&lt;/p&gt;
&lt;p&gt;imagick具有强大的图片处理功能，可以优化CutyCapt生成的图片的质量及大小，同时还可以方便地进行加水印等操作。&lt;/p&gt;
&lt;h3&gt;开发经验分享&lt;/h3&gt;
&lt;p&gt;在实际开发过程中碰到了各种问题，进行一些分享。&lt;/p&gt;
&lt;h4&gt;1、操作系统选择&lt;/h4&gt;
&lt;p&gt;CutyCapt及imagick都有Linux和Windows的版本，在Windows下面的开发、运行不存在较大的问题，按照正常步骤进行安装配置即可。&lt;/p&gt;
&lt;p&gt;在Linux平台下，CutyCapt的安装教程可参考&lt;a href="http://www.cszhi.com/20130305/cutycapt.html"&gt;http://www.cszhi.com/20130305/cutycapt.html&lt;/a&gt;：&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;centos下安装cutycapt：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;（1）安装qt47&lt;/p&gt;
&lt;p&gt;增加qt47的源&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;vim&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;yum&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;repos&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;atrpms&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;repo&lt;/span&gt;

&lt;span class="c1"&gt;//加入如下内容&lt;/span&gt;
&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;atrpms&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;CentOS&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;releasever&lt;/span&gt; &lt;span class="err"&gt;–&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;basearch&lt;/span&gt; &lt;span class="err"&gt;–&lt;/span&gt; &lt;span class="n"&gt;ATrpms&lt;/span&gt;
&lt;span class="n"&gt;baseurl&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;http&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="c1"&gt;//dl.atrpms.net/el$releasever-$basearch/atrpms/stable&lt;/span&gt;
&lt;span class="n"&gt;gpgkey&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;http&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="c1"&gt;//ATrpms.net/RPM-GPG-KEY.atrpms&lt;/span&gt;
&lt;span class="n"&gt;gpgcheck&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="n"&gt;enabled&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;

&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;atrpms&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;testing&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;CentOS&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;releasever&lt;/span&gt; &lt;span class="err"&gt;–&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;basearch&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;ATrpms&lt;/span&gt; &lt;span class="n"&gt;testing&lt;/span&gt;
&lt;span class="n"&gt;baseurl&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;http&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="c1"&gt;//dl.atrpms.net/el$releasever-$basearch/atrpms/testing&lt;/span&gt;
&lt;span class="n"&gt;gpgkey&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;http&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="c1"&gt;//ATrpms.net/RPM-GPG-KEY.atrpms&lt;/span&gt;
&lt;span class="n"&gt;gpgcheck&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="n"&gt;enabled&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;

&lt;span class="c1"&gt;//进行安装&lt;/span&gt;
&lt;span class="n"&gt;yum&lt;/span&gt; &lt;span class="n"&gt;update&lt;/span&gt;
&lt;span class="n"&gt;yum&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt; &lt;span class="n"&gt;qt47&lt;/span&gt;
&lt;span class="n"&gt;yum&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt; &lt;span class="n"&gt;qt47&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;devel&lt;/span&gt;
&lt;span class="n"&gt;yum&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt; &lt;span class="n"&gt;qt47&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;webkit&lt;/span&gt;
&lt;span class="n"&gt;yum&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt; &lt;span class="n"&gt;qt47&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;webkit&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;devel&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;2、安装cutycapt&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;yum&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt; &lt;span class="n"&gt;svn&lt;/span&gt;
&lt;span class="n"&gt;svn&lt;/span&gt; &lt;span class="n"&gt;co&lt;/span&gt; &lt;span class="n"&gt;https&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="c1"&gt;//cutycapt.svn.sourceforge.net/svnroot/cutycapt&lt;/span&gt;
&lt;span class="n"&gt;mv&lt;/span&gt; &lt;span class="n"&gt;cutycapt&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;CutyCapt&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;cutycapt&lt;/span&gt;
&lt;span class="n"&gt;cd&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;cutycapt&lt;/span&gt;
&lt;span class="n"&gt;qmake&lt;/span&gt;
&lt;span class="n"&gt;qmake&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;qt47&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;3、安装xvfb&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;yum&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt; &lt;span class="n"&gt;Xvfb&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;4、测试cutycapt截图&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;xvfb&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;run&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;server&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;-screen 0, 1024x768x24&amp;quot;&lt;/span&gt; &lt;span class="n"&gt;CutyCapt&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;http&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="c1"&gt;//www.baidu.com --out=baidu.png&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;5、将xvfb置入后台运行&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;Xvfb&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;fp&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;share&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;fonts&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;screen&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="mi"&gt;1024&lt;/span&gt;&lt;span class="n"&gt;x768x24&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;
&lt;span class="n"&gt;DISPLAY&lt;/span&gt;&lt;span class="o"&gt;=:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;CutyCapt&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;http&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="c1"&gt;//www.baidu.com --out=baidu.png&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;ubuntu下安装cutycapt&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;1、两条命令搞定&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;apt&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt; &lt;span class="n"&gt;cutycapt&lt;/span&gt;
&lt;span class="n"&gt;apt&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt; &lt;span class="n"&gt;xvfb&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;2、测试截图&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;xvfb&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;run&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;server&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;-screen 0, 1024x768x24&amp;quot;&lt;/span&gt; &lt;span class="n"&gt;CutyCapt&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;http&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="c1"&gt;//www.baidu.com --out=baidu.png&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;中文乱码问题：&lt;/p&gt;
&lt;p&gt;将windows下的中文字体上传至/usr/share/fonts目录，执行下命令fc-cache即可。&lt;/p&gt;
&lt;p&gt;在这里，作者想说的是，尽量选择Ubuntu吧，安装方便；更重要的是，CentOS下面会出现各种问题，如&lt;strong&gt;CutyCapt: cannot connect to X server :99&lt;/strong&gt;等，会让你非常郁闷，我甚至安装了新的包含Gnome、KDE桌面环境的操作系统仍无法解决，而在Ubuntu下面几乎不存在任何问题。&lt;/p&gt;
&lt;h4&gt;2、Web服务器的选择&lt;/h4&gt;
&lt;p&gt;因为截图功能涉及到PHP需要执行操作系统的CutyCapt命令，可以通过system()或者exec()函数。&lt;/p&gt;
&lt;p&gt;作者分别使用了apache和Nginx两种Web服务器，在Nginx下会出现执行调用CutyCapt的PHP脚本无法运行的情况，会遇到比较麻烦的权限问题，&lt;a href="http://alfred-long.iteye.com/blog/1578904"&gt;http://alfred-long.iteye.com/blog/1578904&lt;/a&gt;中提供了一种解决方案，但作者没有测试成功。使用apache服务器则是一路畅通，不存在这个问题。&lt;/p&gt;
&lt;p&gt;因此，作者建议选择&lt;strong&gt;Ubuntu+apache&lt;/strong&gt;的组合，千万不要选择&lt;strong&gt;CentOS+Nginx&lt;/strong&gt;，需要解决的麻烦问题太多，从而也容易造成一些不安全的因素。&lt;/p&gt;
&lt;p&gt;安装代码如下：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;apt&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt; &lt;span class="n"&gt;apache2&lt;/span&gt;
&lt;span class="n"&gt;apt&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt; &lt;span class="n"&gt;php5&lt;/span&gt; &lt;span class="n"&gt;libapache2&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;mod&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;php5&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;3、Ubuntu中安装imagick&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;apt&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt; &lt;span class="n"&gt;php5&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;dev&lt;/span&gt; &lt;span class="n"&gt;php5&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;cli&lt;/span&gt; &lt;span class="n"&gt;php&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;pear&lt;/span&gt;   &lt;span class="c1"&gt;//安装支持环境&lt;/span&gt;
&lt;span class="n"&gt;apt&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt; &lt;span class="n"&gt;imagemagick&lt;/span&gt;   &lt;span class="c1"&gt;//有可能不是最新版本，需要通过源代码安装最新版本&lt;/span&gt;

&lt;span class="c1"&gt;//源代码方式安装http://www.imagemagick.org/script/download.php&lt;/span&gt;
&lt;span class="n"&gt;cd&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;src&lt;/span&gt; 
&lt;span class="n"&gt;wget&lt;/span&gt; &lt;span class="n"&gt;ftp&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="c1"&gt;//ftp.kddlabs.co.jp/graphics/ImageMagick/ImageMagick-6.8.7-0.tar.gz&lt;/span&gt;
&lt;span class="n"&gt;tar&lt;/span&gt; &lt;span class="n"&gt;xzvf&lt;/span&gt; &lt;span class="n"&gt;ImageMagick&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;6.8.7&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;0.&lt;/span&gt;&lt;span class="n"&gt;tar&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;gz&lt;/span&gt;
&lt;span class="n"&gt;cd&lt;/span&gt; &lt;span class="n"&gt;ImageMagick&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;6.8.7&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;
&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;configure&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;make&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;make&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt;

&lt;span class="n"&gt;apt&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt; &lt;span class="n"&gt;graphicsmagick&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;libmagick&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;compat&lt;/span&gt;
&lt;span class="n"&gt;pecl&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt; &lt;span class="n"&gt;imagick&lt;/span&gt;

&lt;span class="n"&gt;echo&lt;/span&gt; &lt;span class="n"&gt;extension&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;imagick&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;so&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&amp;gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;php5&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;conf&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;imagick&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ini&lt;/span&gt;

&lt;span class="n"&gt;service&lt;/span&gt; &lt;span class="n"&gt;apache2&lt;/span&gt; &lt;span class="n"&gt;restart&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;常见错误：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;在运行pecl install imagick 时有以下出错提示：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;checking&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;ImageMagick&lt;/span&gt; &lt;span class="n"&gt;version&lt;/span&gt; &lt;span class="n"&gt;is&lt;/span&gt; &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;least&lt;/span&gt; &lt;span class="mf"&gt;6.2.4&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt; &lt;span class="n"&gt;configure&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;error&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;no&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt; &lt;span class="n"&gt;You&lt;/span&gt; &lt;span class="n"&gt;need&lt;/span&gt; &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;least&lt;/span&gt; &lt;span class="n"&gt;Imagemagick&lt;/span&gt; &lt;span class="n"&gt;version&lt;/span&gt; &lt;span class="mf"&gt;6.2.4&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;use&lt;/span&gt; &lt;span class="n"&gt;Imagick&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;
&lt;span class="nl"&gt;ERROR:&lt;/span&gt; &lt;span class="err"&gt;`&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;tmp&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;pear&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;temp&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;imagick&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;configure&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;with&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;imagick&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;hjw&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt; &lt;span class="n"&gt;failed&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;根据提示是没有安装Imagemagick或者Imagemagick版本不够，可以通过源代码的方式安装最新版本的Imagemagick。&lt;/p&gt;
&lt;h4&gt;4、Linux平台下的字体渲染&lt;/h4&gt;
&lt;p&gt;可以将Windows平台下的雅黑、宋体、开题、黑体等常用中文字体安装到Ubuntu系统中，避免出现截图中的字体不好看的情况，同时也满足对富文本编辑中支持的字体进行渲染。&lt;/p&gt;</summary><category term="Apache"></category><category term="CutyCapt"></category><category term="Linux"></category><category term="Nginx"></category><category term="PHP"></category><category term="TCPDF"></category></entry><entry><title>Tiny Tiny RSS–Google Reader的替代</title><link href="http://loosky.com/Technology/2013/07/30/Tiny-Tiny-RSS.html" rel="alternate"></link><updated>2013-07-30T00:00:00+08:00</updated><author><name>Loosky</name></author><id>tag:loosky.com,2013-07-30:Technology/2013/07/30/Tiny-Tiny-RSS.html</id><summary type="html">&lt;p&gt;Google Reader是一款&lt;a href="http://xbeta.info/google-reader.htm"&gt;无可替代的伟大产品&lt;/a&gt;，但实实在在地跟我们&lt;a href="http://loosky.net/archives/2789.html"&gt;告别了&lt;/a&gt;。一直以来习惯于通过订阅RSS来浏览文章，说实在话并不喜欢通过微博或者微信来浏览，信息量太大，而真正有用的东西又不多，极容易被淹没，不容易沉淀。&lt;/p&gt;
&lt;p&gt;Google Reader关闭后，一直用着&lt;a href="https://theoldreader.com/"&gt;the Old Reader&lt;/a&gt;，其使用习惯和界面均比较接近于Google Reader。但比较痛苦的地方在于速度和稳定性均不是很好，经常长时间不能访问，难以忍受。于是便想自己搭建一个平台，先尝试了&lt;a href="https://github.com/samuelclay/NewsBlur"&gt;NewsBlur&lt;/a&gt;，基于Django的，步骤相当繁琐。刚好碰到小众软件介绍了&lt;a href="http://www.appinn.com/tiny-tiny-rss/"&gt;Tiny Tiny RSS&lt;/a&gt;，基于PHP+MySQL/PostgreSQL，安装起来也很方便。于是便安装了一个试试，发现挺不错的。&lt;/p&gt;
&lt;p&gt;Tiny Tiny RSS 是使用 &lt;a href="http://www.simplepie.org/"&gt;SimplePie&lt;/a&gt; 作为 RSS 抓取引擎的，抓取回来的文章数据需要保存在 MySQL/PostgreSQL 数据库里，抓取数据的时候，需要消耗一定的流量，所以，如果你的订阅源多的话，搭建类似的站点的确是一个消耗存储空间、带宽的活。&lt;/p&gt;
&lt;h3&gt;一、优点&lt;/h3&gt;
&lt;p&gt;项目主页： &lt;a href="http://tt-rss.org/redmine/"&gt;http://tt-rss.org/&lt;/a&gt;，其优点如下：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;feed状况检查：可以检查订阅的feeds是否失效&lt;/li&gt;
&lt;li&gt;支持各种主题，包括模仿Google Reeder、feedly界面的主题&lt;/li&gt;
&lt;li&gt;有适合移动设备的皮肤/插件&lt;/li&gt;
&lt;li&gt;支持插件，其中精品插件包括ff_feedcleaner（feed内容过滤）、af_feedmod（制作全文阅读feed）、oneclickpocket（一键发送到pocket）、fever（模拟fever api，支持更多客户端）等&lt;/li&gt;
&lt;li&gt;支持多种平台的客户端，包括Andriod、WP、iOS等&lt;/li&gt;
&lt;li&gt;可以灵活地设置更新频率，第一时间获得订阅更新&lt;/li&gt;
&lt;li&gt;支持导入OPML&lt;/li&gt;
&lt;li&gt;可以收藏&lt;/li&gt;
&lt;li&gt;有中文版本，但不完全&lt;/li&gt;
&lt;li&gt;filter功能：类似gmail的filter。从标题，内容，时间等等中匹配关键词，然后可以选择是打分还是加tag，加label，加星，标记已读，删除条目等，filter可以是作用于所有feed或者指定feed。可以是匹配关键词，或者是剔除关键词。&lt;/li&gt;
&lt;li&gt;条目中的图片可以选择是显示还是隐藏。&lt;/li&gt;
&lt;li&gt;邮件digest。把每天的未读条目作为digest发送到指定邮箱。而且可以选择发送了的条目自动标记为已读。发送时间也可以指定。&lt;/li&gt;
&lt;li&gt;基于sphinx的全文搜索&lt;/li&gt;
&lt;li&gt;...&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;二、安装要求&lt;/h3&gt;
&lt;p&gt;要求其实挺简单的，见&lt;a href="http://tt-rss.org/redmine/projects/tt-rss/wiki#Requirements"&gt;官方wiki&lt;/a&gt;。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="mf"&gt;1.&lt;/span&gt; &lt;span class="n"&gt;PHP&lt;/span&gt;&lt;span class="err"&gt;版本必须高于&lt;/span&gt;&lt;span class="mf"&gt;5.3&lt;/span&gt;&lt;span class="err"&gt;；&lt;/span&gt;
&lt;span class="mf"&gt;2.&lt;/span&gt; &lt;span class="err"&gt;可选&lt;/span&gt;&lt;span class="n"&gt;PostgreSQL&lt;/span&gt; &lt;span class="err"&gt;或&lt;/span&gt; &lt;span class="n"&gt;MySQL&lt;/span&gt;&lt;span class="err"&gt;数据库，其中&lt;/span&gt;&lt;span class="n"&gt;MySQL&lt;/span&gt;&lt;span class="err"&gt;数据库必须支持&lt;/span&gt;&lt;span class="n"&gt;InnoDB&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;三、安装步骤&lt;/h3&gt;
&lt;p&gt;具体安装步骤可参考&lt;a href="http://tt-rss.org/redmine/projects/tt-rss/wiki/InstallationNotes"&gt;Installation Notes&lt;/a&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;在按照要求配置好服务器环境后，&lt;a href="https://github.com/gothfox/Tiny-Tiny-RSS/archive/1.9.tar.gz"&gt;下载安装包&lt;/a&gt; （目前最新版本为1.9，Jul 21, 2013）并解压。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c"&gt;# tar zxfv Tiny-Tiny-RSS-1.x.x.tar.gz&lt;/span&gt;
&lt;span class="c"&gt;# mv Tiny-Tiny-RSS-1.x.x tt-rss&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;输入&lt;a href="http://your.site.com/tt-rss/install/"&gt;http://your.site.com/tt-rss/install/&lt;/a&gt;，并执行安装步骤，填写相应的数据库等信息。
&lt;img alt="安装步骤" src="http://loosky.net/Upload/2013/07/tiny-tiny-rss-install.png" /&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;安装完成后，输入网址 &lt;a href="http://your.site.com/tt-rss/"&gt;http://your.site.com/tt-rss/&lt;/a&gt; 访问系统，系统后台已经部分汉化。默认管理员用户为：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;username&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;admin&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;password&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;password&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img alt="系统登录" src="http://loosky.net/Upload/2013/07/tiny-tiny-rss-login.png" /&gt;&lt;/p&gt;
&lt;p&gt;登陆后即可手动添加RSS地址或者直接导入OPML文件了。&lt;/p&gt;
&lt;p&gt;&lt;img alt="导入OPML文件" src="http://loosky.net/Upload/2013/07/tiny-tiny-rss-importrss.png" /&gt;&lt;/p&gt;
&lt;h3&gt;四、优化配置&lt;/h3&gt;
&lt;h4&gt;1. 配置订阅条目自动更新&lt;/h4&gt;
&lt;p&gt;详细操作说明见&lt;a href="http://tt-rss.org/redmine/projects/tt-rss/wiki/UpdatingFeeds"&gt;官方wiki&lt;/a&gt;，可以采用三种方式，本站使用的是第二种，即通过crontab来定时更新feeds。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;这里需要注意的是更新脚本文件&lt;code&gt;update.php&lt;/code&gt;或&lt;code&gt;update_daemon2.php&lt;/code&gt;不能由root用户来执行，可以通过apache或者Nginx的运行用户来执行，如apache或者www等。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;当我们以&lt;code&gt;root&lt;/code&gt;用户直接执行命令时，会出现如下错误：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;localhost&lt;/span&gt; &lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="n"&gt;php&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;home&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;wwwroot&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="err"&gt;具体路径&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;update&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;php&lt;/span&gt; 
&lt;span class="n"&gt;Tiny&lt;/span&gt; &lt;span class="n"&gt;Tiny&lt;/span&gt; &lt;span class="n"&gt;RSS&lt;/span&gt; &lt;span class="n"&gt;was&lt;/span&gt; &lt;span class="n"&gt;unable&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;start&lt;/span&gt; &lt;span class="n"&gt;properly&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt; &lt;span class="n"&gt;This&lt;/span&gt; &lt;span class="n"&gt;usually&lt;/span&gt; &lt;span class="n"&gt;means&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="n"&gt;misconfiguration&lt;/span&gt; &lt;span class="n"&gt;or&lt;/span&gt; &lt;span class="n"&gt;an&lt;/span&gt; &lt;span class="n"&gt;incomplete&lt;/span&gt; &lt;span class="n"&gt;upgrade&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;
&lt;span class="n"&gt;Please&lt;/span&gt; &lt;span class="n"&gt;fix&lt;/span&gt; &lt;span class="n"&gt;errors&lt;/span&gt; &lt;span class="n"&gt;indicated&lt;/span&gt; &lt;span class="n"&gt;by&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;following&lt;/span&gt; &lt;span class="n"&gt;messages&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;

 &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;Please&lt;/span&gt; &lt;span class="n"&gt;don&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="n"&gt;run&lt;/span&gt; &lt;span class="n"&gt;this&lt;/span&gt; &lt;span class="n"&gt;script&lt;/span&gt; &lt;span class="n"&gt;as&lt;/span&gt; &lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;

&lt;span class="n"&gt;You&lt;/span&gt; &lt;span class="n"&gt;might&lt;/span&gt; &lt;span class="n"&gt;want&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;check&lt;/span&gt; &lt;span class="n"&gt;tt&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;rss&lt;/span&gt; &lt;span class="n"&gt;wiki&lt;/span&gt; &lt;span class="n"&gt;or&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;forums&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;more&lt;/span&gt; &lt;span class="n"&gt;information&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;
&lt;span class="n"&gt;Please&lt;/span&gt; &lt;span class="n"&gt;search&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;forums&lt;/span&gt; &lt;span class="n"&gt;before&lt;/span&gt; &lt;span class="n"&gt;creating&lt;/span&gt; &lt;span class="n"&gt;new&lt;/span&gt; &lt;span class="n"&gt;topic&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;your&lt;/span&gt; &lt;span class="n"&gt;question&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;即提示不能以root用户运行脚本，否则订阅条目不能自动更新。因此，可以通过给普通用户如&lt;code&gt;www&lt;/code&gt;添加crontab运行脚本：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c"&gt;#crontab -u www -e&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;添加如下内容：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="err"&gt;*/&lt;/span&gt;&lt;span class="mi"&gt;30&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;bin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;php&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;home&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;wwwroot&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="err"&gt;具体路径&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;update&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;php&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;feeds&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;quiet&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;同时在后台可以设置feeds的更新时间。&lt;/p&gt;
&lt;p&gt;&lt;img alt="设置更新时间" src="http://loosky.net/Upload/2013/07/tiny-tiny-rss-update.png" /&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;说明：&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;必须用普通用户来运行更新脚本；&lt;/li&gt;
&lt;li&gt;更新时间这里设置为每30分钟更新一次，具体可调；&lt;/li&gt;
&lt;li&gt;若你的系统中php的路径不是&lt;code&gt;/usr/bin/php&lt;/code&gt;,需要修改之，同时也注意修改&lt;code&gt;config.php&lt;/code&gt;中的内容；&lt;/li&gt;
&lt;li&gt;修改&lt;code&gt;/home/wwwroot/具体路径/update.php&lt;/code&gt;为你的具体路径。&lt;/li&gt;
&lt;/ol&gt;
&lt;h4&gt;2. 安装皮肤&lt;/h4&gt;
&lt;p&gt;Tiny Tiny RSS&lt;a href="http://tt-rss.org/forum/viewtopic.php?f=22&amp;amp;t=1679"&gt;安装皮肤&lt;/a&gt;挺简单的，将CSS文件放入themes目录下，并在管理员后台进行选择就可以了，当然也可以通过自定义CSS的方式。&lt;/p&gt;
&lt;p&gt;&lt;img alt="定义皮肤" src="http://loosky.net/Upload/2013/07/tiny-tiny-rss-theme.png" /&gt;&lt;/p&gt;
&lt;p&gt;推荐一款仿Google Reader的皮肤： &lt;a href="https://github.com/naeramarth7/clean-greader"&gt;clean-greader&lt;/a&gt;，更多的可在&lt;a href="http://tt-rss.org/forum/viewforum.php?f=22"&gt;官方论坛&lt;/a&gt;中寻找。&lt;/p&gt;
&lt;p&gt;&lt;img alt="clean-greader" src="http://loosky.net/Upload/2013/07/tiny-tiny-rss.png" /&gt;&lt;/p&gt;
&lt;h4&gt;3. 安装插件&lt;/h4&gt;
&lt;p&gt;系统后台自带了很多系统插件以及第三方插件，我们只需要启用就好，当然也可以去论坛&lt;a href="http://tt-rss.org/forum/viewforum.php?f=22"&gt;寻找插件&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;&lt;img alt="" src="http://loosky.net/Upload/2013/07/tiny-tiny-rss-plugins.png" /&gt;&lt;/p&gt;
&lt;p&gt;付上大多数插件的说明，所有插件一般有三种，在文章右下角生成响应图标的、在设置标签生成设置页面的、其他无图标无设置的插件[&lt;a href="https://wjchen.me/index.php/ttrss-1.html"&gt;参考&lt;/a&gt;]&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;af_unburn:解决feedburner等rss链接跳转。&lt;/li&gt;
&lt;li&gt;bookmarklets:在设置-信息源生成bookmarklets标签。&lt;/li&gt;
&lt;li&gt;embed_original:图标插件，点击图标会显示文章原始内容，而不是rss。&lt;/li&gt;
&lt;li&gt;fever:模拟fever api，在设置-Fver Emulation，设置好密码，可以和tt-rss的登录密码不同，然后就能支持fever的客户端比如reeder、Mr. Reader。&lt;/li&gt;
&lt;li&gt;ff_feedcleaner:feed广告过滤，在设置标签生成FeecCleaner标签，过滤规则要用正则表达式，比较复杂。&lt;/li&gt;
&lt;li&gt;googlereaderkeys:模拟google reader快捷键，如J、K等。&lt;/li&gt;
&lt;li&gt;import_export:在设置-信息源，导入导出配置。&lt;/li&gt;
&lt;li&gt;mail:图标插件，点击通过邮件分享。&lt;/li&gt;
&lt;li&gt;mark_button:文章右下角能够快速将文章标记为已读未读。&lt;/li&gt;
&lt;li&gt;mobilize:图标插件，点击显示readability简化的页面。&lt;/li&gt;
&lt;li&gt;note:图标插件。&lt;/li&gt;
&lt;li&gt;nsfw:根据标签隐藏文章内容。&lt;/li&gt;
&lt;li&gt;share:图标插件，点击生成唯一的url方便分享。&lt;/li&gt;
&lt;li&gt;swap_jk:添加j、k快捷键，类似vim。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;4. 移动端支持&lt;/h4&gt;
&lt;p&gt;要支持移动端，既可以通过手机、平板电脑等设备进行访问，必须先开启系统支持，即在管理后台偏好设置里面勾选“Enable API”。&lt;/p&gt;
&lt;p&gt;&lt;img alt="Enable API" src="http://loosky.net/Upload/2013/07/tiny-tiny-rss-enableapi.png" /&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://tt-rss.org/redmine/projects/tt-rss-android/wiki"&gt;官方开发&lt;/a&gt;的Andriod客户端：&lt;a href="https://play.google.com/store/apps/details?id=org.fox.ttrss&amp;amp;feature=search_result"&gt;Tiny Tiny RSS&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;同时也推荐一下Nils Braden 开发的 &lt;a href="https://play.google.com/store/apps/details?id=org.ttrssreader&amp;amp;feature=related_apps#?t=W251bGwsMSwxLDEwOSwib3JnLnR0cnNzcmVhZGVyIl0."&gt;TTRSS-Reader&lt;/a&gt; 这个 Android 手机客户端，这个客户端提供针对Tiny Tiny RSS的手机离线阅读功能，还可以离线缓存图片。&lt;/p&gt;
&lt;p&gt;&lt;img alt="移动客户端" src="http://loosky.net/Upload/2013/07/tiny-tiny-rss-client.png" /&gt;&lt;/p&gt;</summary><category term="Google"></category><category term="Google Reader"></category><category term="PHP"></category><category term="RSS"></category><category term="Tiny Tiny RSS"></category></entry><entry><title>Web网站性能/压力测试工具WebBench使用详解</title><link href="http://loosky.com/Technology/2013/05/16/WebBench.html" rel="alternate"></link><updated>2013-05-16T00:00:00+08:00</updated><author><name>Loosky</name></author><id>tag:loosky.com,2013-05-16:Technology/2013/05/16/WebBench.html</id><summary type="html">&lt;p&gt;Webbench是知名的网站压力方面的测试工具，它是由Lionbridge公司开发。&lt;/p&gt;
&lt;p&gt;官方主页：&lt;a href="http://home.tiscali.cz/~cz210552/webbench.html"&gt;http://home.tiscali.cz/~cz210552/webbench.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;在运维工作中，网站压力及性能测试是一项很重要的工作。比如在一个网站上线之前，能承受多大访问量、在大访问量情况下性能怎样，这些数据指标好坏将会直接影响用户体验。但是，在压力及性能测试中存在一个共性，那就是压力及性能测试的结果与实际负载结果不会完全相同，就算压力及性能测试工作做的再好，也不能保证100%和线上性能指标相同。面对这些问题，我们只能尽量去想方设法去模拟。所以，压力及性能测试非常有必要，有了这些数据，我们就能对自己做维护的平台做到心中有数。&lt;/p&gt;
&lt;p&gt;Web Bench最多可以模拟3万个并发连接去测试网站的负载能力。Web Bench能测试处在相同硬件上，不同服务的性能以及不同硬件上同一个服务的运行状况。Web Bech的标准测试可以向我们展示服务器的两项内容：每秒钟相应请求数和每秒钟传输数据量。Web Bench不但能具有静态页面的测试能力，还能对动态页面（ASP,PHP,JAVA,CGI）进行测试的能力。还有就是他支持对含有SSL的安全网站例如电子商务网站进行静态或动态的性能测试。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;适用于linux操作系统&lt;/strong&gt;&lt;/p&gt;
&lt;h3&gt;1、WebBench安装：&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;cd&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;src&lt;/span&gt;
&lt;span class="n"&gt;wget&lt;/span&gt; &lt;span class="n"&gt;http&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="c1"&gt;//home.tiscali.cz/~cz210552/distfiles/webbench-1.5.tar.gz&lt;/span&gt;
&lt;span class="n"&gt;tar&lt;/span&gt; &lt;span class="n"&gt;zxvf&lt;/span&gt; &lt;span class="n"&gt;webbench&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;1.5&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tar&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;gz&lt;/span&gt;
&lt;span class="n"&gt;cd&lt;/span&gt; &lt;span class="n"&gt;webbench&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;1.5&lt;/span&gt;
&lt;span class="n"&gt;make&lt;/span&gt;
&lt;span class="n"&gt;make&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;补充：安装过程中如提示缺少组件请安装，缺少目录，请手动创建。&lt;/p&gt;
&lt;p&gt;常见错误：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;cc -Wall -ggdb -W -O   -c -o webbench.o webbench.c&lt;/p&gt;
&lt;p&gt;webbench.c: In function ‘alarm_handler’:&lt;/p&gt;
&lt;p&gt;webbench.c:77: warning: unused parameter ’signal’&lt;/p&gt;
&lt;p&gt;cc -Wall -ggdb -W -O   -o webbench webbench.o&lt;/p&gt;
&lt;p&gt;ctags *.c&lt;/p&gt;
&lt;p&gt;/bin/sh: ctags: command not found&lt;/p&gt;
&lt;p&gt;make: [tags] Error 127 (ignored)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;centos有相应的组件，搜索一下ctags安装即可&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c"&gt;# yum install ctags&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;2、WebBench使用：&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;#webbench -c 1000 -t 60 http:&lt;/span&gt;&lt;span class="c1"&gt;//test.cn/info.php&lt;/span&gt;
&lt;span class="n"&gt;webbench&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="err"&gt;并发数&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="err"&gt;运行测试时间&lt;/span&gt;  &lt;span class="n"&gt;URL&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;3、测试结果示例：&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;#webbench -c 600 -t 30 http:&lt;/span&gt;&lt;span class="c1"&gt;//test.cn/index.php&lt;/span&gt;
&lt;span class="n"&gt;Webbench&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;Simple&lt;/span&gt; &lt;span class="n"&gt;Web&lt;/span&gt; &lt;span class="n"&gt;Benchmark&lt;/span&gt; &lt;span class="mf"&gt;1.5&lt;/span&gt;
&lt;span class="n"&gt;Copyright&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;Radim&lt;/span&gt; &lt;span class="n"&gt;Kolar&lt;/span&gt; &lt;span class="mi"&gt;1997&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;2004&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;GPL&lt;/span&gt; &lt;span class="n"&gt;Open&lt;/span&gt; &lt;span class="n"&gt;Source&lt;/span&gt; &lt;span class="n"&gt;Software&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;

&lt;span class="nl"&gt;Benchmarking:&lt;/span&gt; &lt;span class="n"&gt;GET&lt;/span&gt; &lt;span class="n"&gt;http&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="c1"&gt;//test.cn/index.php&lt;/span&gt;
&lt;span class="mi"&gt;600&lt;/span&gt; &lt;span class="n"&gt;clients&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;running&lt;/span&gt; &lt;span class="mi"&gt;30&lt;/span&gt; &lt;span class="n"&gt;sec&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;

&lt;span class="n"&gt;Speed&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;12082&lt;/span&gt; &lt;span class="n"&gt;pages&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;min&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;152635&lt;/span&gt; &lt;span class="n"&gt;bytes&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;sec&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;
&lt;span class="nl"&gt;Requests:&lt;/span&gt; &lt;span class="mi"&gt;6041&lt;/span&gt; &lt;span class="n"&gt;susceed&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="n"&gt;failed&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;

&lt;span class="o"&gt;-------------------------------------------------------------------------------------&lt;/span&gt;

&lt;span class="cp"&gt;#webbench -c 1000 -t 60 http:&lt;/span&gt;&lt;span class="c1"&gt;//test.cn/index.php&lt;/span&gt;
&lt;span class="n"&gt;Webbench&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;Simple&lt;/span&gt; &lt;span class="n"&gt;Web&lt;/span&gt; &lt;span class="n"&gt;Benchmark&lt;/span&gt; &lt;span class="mf"&gt;1.5&lt;/span&gt;
&lt;span class="n"&gt;Copyright&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;Radim&lt;/span&gt; &lt;span class="n"&gt;Kolar&lt;/span&gt; &lt;span class="mi"&gt;1997&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;2004&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;GPL&lt;/span&gt; &lt;span class="n"&gt;Open&lt;/span&gt; &lt;span class="n"&gt;Source&lt;/span&gt; &lt;span class="n"&gt;Software&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;

&lt;span class="nl"&gt;Benchmarking:&lt;/span&gt; &lt;span class="n"&gt;GET&lt;/span&gt; &lt;span class="n"&gt;http&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="c1"&gt;//test.cn/index.php&lt;/span&gt;
&lt;span class="mi"&gt;1000&lt;/span&gt; &lt;span class="n"&gt;clients&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;running&lt;/span&gt; &lt;span class="mi"&gt;60&lt;/span&gt; &lt;span class="n"&gt;sec&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;

&lt;span class="n"&gt;Speed&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;5553&lt;/span&gt; &lt;span class="n"&gt;pages&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;min&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;70152&lt;/span&gt; &lt;span class="n"&gt;bytes&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;sec&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;
&lt;span class="nl"&gt;Requests:&lt;/span&gt; &lt;span class="mi"&gt;5553&lt;/span&gt; &lt;span class="n"&gt;susceed&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="n"&gt;failed&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;每秒钟响应请求数：24525/60= X pages/sec，每秒钟传输数据量20794612 bytes/sec.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;# webbench -c 2000 -t 60 http:&lt;/span&gt;&lt;span class="c1"&gt;//test.cn/index.php&lt;/span&gt;
&lt;span class="n"&gt;Webbench&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;Simple&lt;/span&gt; &lt;span class="n"&gt;Web&lt;/span&gt; &lt;span class="n"&gt;Benchmark&lt;/span&gt; &lt;span class="mf"&gt;1.5&lt;/span&gt;
&lt;span class="n"&gt;Copyright&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;Radim&lt;/span&gt; &lt;span class="n"&gt;Kolar&lt;/span&gt; &lt;span class="mi"&gt;1997&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;2004&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;GPL&lt;/span&gt; &lt;span class="n"&gt;Open&lt;/span&gt; &lt;span class="n"&gt;Source&lt;/span&gt; &lt;span class="n"&gt;Software&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;

&lt;span class="nl"&gt;Benchmarking:&lt;/span&gt; &lt;span class="n"&gt;GET&lt;/span&gt; &lt;span class="n"&gt;http&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="c1"&gt;//test.cn/index.php&lt;/span&gt;
&lt;span class="mi"&gt;2000&lt;/span&gt; &lt;span class="n"&gt;clients&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;running&lt;/span&gt; &lt;span class="mi"&gt;60&lt;/span&gt; &lt;span class="n"&gt;sec&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;

&lt;span class="n"&gt;Speed&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;10479&lt;/span&gt; &lt;span class="n"&gt;pages&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;min&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;132043&lt;/span&gt; &lt;span class="n"&gt;bytes&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;sec&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;
&lt;span class="nl"&gt;Requests:&lt;/span&gt; &lt;span class="mi"&gt;10453&lt;/span&gt; &lt;span class="n"&gt;susceed&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;26&lt;/span&gt; &lt;span class="n"&gt;failed&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;当并发2000时，已经显示有26个连接failed了，说明超负荷了。&lt;/p&gt;
&lt;p&gt;补充：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;压力及性能测试工作应该放到产品上线之前，而不是上线以后；&lt;/li&gt;
&lt;li&gt;测试时并发应当由小逐渐加大，比如并发100时观察一下网站负载是多少、打开页面是否流畅，并发200时又是多少、网站打开缓慢时并发是多少、网站打不开时并发又是多少；&lt;/li&gt;
&lt;li&gt;更详细的进行某个页面测试，如电商网站可以着重测试购物车、推广页面等，因为这些页面占整个网站访问量比重较大。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;备注：webbench 做压力及性能测试时，该软件自身也会消耗CPU和内存资源，为了测试准确，建议将 webbench安装在其他的服务器上，已达到测试数据更加精确。&lt;/p&gt;
&lt;p&gt;转自：&lt;a href="http://blog.fity.cn/" title="未来往事"&gt;http://blog.fity.cn/&lt;/a&gt;&lt;/p&gt;</summary><category term="web"></category><category term="WebBench"></category></entry><entry><title>Nagios安装与配置</title><link href="http://loosky.com/Technology/2013/04/28/nagios-install.html" rel="alternate"></link><updated>2013-04-28T00:00:00+08:00</updated><author><name>Loosky</name></author><id>tag:loosky.com,2013-04-28:Technology/2013/04/28/nagios-install.html</id><summary type="html">&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;Nagios&lt;/span&gt;&lt;span class="err"&gt;是一款开源的免费网络监视工具，能有效监控&lt;/span&gt;&lt;span class="n"&gt;Windows&lt;/span&gt;&lt;span class="err"&gt;、&lt;/span&gt;&lt;span class="n"&gt;Linux&lt;/span&gt;&lt;span class="err"&gt;和&lt;/span&gt;&lt;span class="n"&gt;Unix&lt;/span&gt;&lt;span class="err"&gt;的主机状态，交换机路由器等网络设备以及打印机等。&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;安装前提：&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;yum&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt; &lt;span class="n"&gt;gcc&lt;/span&gt; &lt;span class="n"&gt;glibc&lt;/span&gt; &lt;span class="n"&gt;glibc&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;common&lt;/span&gt; &lt;span class="n"&gt;gd&lt;/span&gt; &lt;span class="n"&gt;gd&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;devel&lt;/span&gt; &lt;span class="n"&gt;php&lt;/span&gt; &lt;span class="n"&gt;openssl&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;devel&lt;/span&gt; &lt;span class="n"&gt;httpd&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;1、创建用户：&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c"&gt;#useradd -m nagios     #添加一个名为nagios的用户来运行nagios          &lt;/span&gt;
&lt;span class="c"&gt;#usermod -a -G nagios apache    #将运行apache用户apache加入nagios组&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;2、 编译安装nagios及其插件：&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;nagios core官网下载地址：&lt;/strong&gt;&lt;a href="http://www.nagios.org/download/core/"&gt;http://www.nagios.org/download/core/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;nagios插件下载地址：&lt;/strong&gt;&lt;a href="http://www.nagios.org/download/plugins/"&gt;http://www.nagios.org/download/plugins/&lt;/a&gt;&lt;/p&gt;
&lt;h4&gt;安装Nagios Core&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c"&gt;#cd /usr/local/src&lt;/span&gt;
&lt;span class="c"&gt;#mkdir /etc/httpd/conf/extra  //用来存放关于nagios的http配置文件&lt;/span&gt;
&lt;span class="c"&gt;#tar zxvf nagios-3.5.0.tar.gz&lt;/span&gt;
&lt;span class="c"&gt;#cd nagios-3.5.0&lt;/span&gt;
&lt;span class="c"&gt;#./configure --prefix=/usr/local/nagios/ --with-comman-group=nagios --with-httpd-conf=/etc/httpd/conf/extra/ //指定安装目录及用户、组和http的配置目录&lt;/span&gt;
&lt;span class="c"&gt;#make all;make install&lt;/span&gt;
&lt;span class="c"&gt;# make install-init;make install-config;make install-commandmode;make install-webconf      //初始生成启动脚本、配置文件、命令配置模块和httpd的配置文件&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;安装nagios插件&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c"&gt;#cd ../&lt;/span&gt;
&lt;span class="c"&gt;#tar zxvf nagios-plugins-1.4.16.tar.gz  &lt;/span&gt;
&lt;span class="c"&gt;#cd nagios-plugins-1.4.16&lt;/span&gt;
&lt;span class="c"&gt;#./configure --with-nagios-user=nagios --with-nagios-group=nagios --prefix=/usr/local/nagios/   //指定安装目录及用户和组&lt;/span&gt;
&lt;span class="c"&gt;#make;make install&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;配置httpd&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;# htpasswd -c /usr/local/nagios/etc/htpasswd.users nagiosadmin   &lt;/span&gt;&lt;span class="c1"&gt;//创建登陆用户名nagiosadmin及密码,为web登陆时的用户名和密码 &lt;/span&gt;
&lt;span class="cp"&gt;# vi /etc/httpd/conf/httpd.conf #添加如下行，让nagios.conf生效&lt;/span&gt;

    &lt;span class="n"&gt;Include&lt;/span&gt; &lt;span class="n"&gt;conf&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;extra&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;nagios&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;conf&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;启动httpd及nagios服务并验证####&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c"&gt;#chkconfig --add nagios   //设置nagios及http开机自启动&lt;/span&gt;
&lt;span class="c"&gt;#chkconfig nagios on&lt;/span&gt;
&lt;span class="c"&gt;#chkconfig httpd on&lt;/span&gt;
&lt;span class="c"&gt;#service nagios start&lt;/span&gt;
&lt;span class="c"&gt;#service httpd start&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;在浏览器中输入如：http://ip/nagios/访问nagios，一般情况下能看到英文的nagios监控界面。说明nagios基本能进行工作了。&lt;/p&gt;
&lt;p&gt;&lt;img alt="Nagios" src="http://loosky.net/Upload/2013/04/nagios.png" /&gt;&lt;/p&gt;
&lt;h3&gt;3、安装NRPE&lt;/h3&gt;
&lt;p&gt;想获取客户机上更为详细的信息，还必须在服务器及客户端上安装NRPE插件。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;NRPE下载地址：&lt;/strong&gt; &lt;a href="http://www.nagios.org/download/addons"&gt;http://www.nagios.org/download/addons&lt;/a&gt;&lt;/p&gt;
&lt;h4&gt;客户机端安装NRPE插件&lt;/h4&gt;
&lt;h5&gt;安装nagios插件&lt;/h5&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c"&gt;#useradd -s /sbin/nologin nagios //添加nagios用户&lt;/span&gt;
&lt;span class="c"&gt;#cd /usr/local/src&lt;/span&gt;
&lt;span class="c"&gt;#tar zxvf nagios-plugins-1.4.16.tar.gz&lt;/span&gt;
&lt;span class="c"&gt;#cd nagios-plugins-1.4.16&lt;/span&gt;
&lt;span class="c"&gt;#./configure --with-nagios-user=nagios --with-nagios-group=nagios --prefix=/usr/local/nagios/   //指定安装目录及运行该软件用户和组&lt;/span&gt;
&lt;span class="c"&gt;#make;make install&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h5&gt;安装nrpe&lt;/h5&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;#cd ..&lt;/span&gt;
&lt;span class="cp"&gt;#tar zxvf nrpe-2.14.tar.gz&lt;/span&gt;
&lt;span class="cp"&gt;#cd nrpe-2.14&lt;/span&gt;
&lt;span class="cp"&gt;#./configure --with-nagios-user=nagios --with-nagios-group=nagios --prefix=/usr/local/nagios/&lt;/span&gt;
&lt;span class="cp"&gt;# make all&lt;/span&gt;
&lt;span class="cp"&gt;# make install-plugin;make install-daemon;make install-daemon-config&lt;/span&gt;
&lt;span class="cp"&gt;# ls /usr/local/nagios/libexec/ &lt;/span&gt;&lt;span class="c1"&gt;//验证安装&lt;/span&gt;
&lt;span class="n"&gt;check_apt&lt;/span&gt; &lt;span class="n"&gt;check_ftp&lt;/span&gt; &lt;span class="n"&gt;check_mailq&lt;/span&gt; &lt;span class="n"&gt;check_overcr&lt;/span&gt; &lt;span class="n"&gt;check_tcp&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h5&gt;配置、启动、测试NRPE&lt;/h5&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;# cd /usr/local/nagios/&lt;/span&gt;
&lt;span class="cp"&gt;# vi etc/nrpe.cfg&lt;/span&gt;

    &lt;span class="n"&gt;allowed_hosts&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mf"&gt;127.0.0.1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mf"&gt;192.168.80.200&lt;/span&gt;   &lt;span class="c1"&gt;//添加服务器端的IP地址&lt;/span&gt;

&lt;span class="cp"&gt;#/usr/local/nagios/bin/nrpe -c /usr/local/nagios/etc/nrpe.cfg –d  &lt;/span&gt;&lt;span class="c1"&gt;//启动NRPE守护进程&lt;/span&gt;
&lt;span class="cp"&gt;#netstat -utpln |grep nrpe        &lt;/span&gt;&lt;span class="c1"&gt;//查看nrpe进程是否已正常启动&lt;/span&gt;

    &lt;span class="n"&gt;tcp&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="mf"&gt;0.0.0.0&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;5666&lt;/span&gt; &lt;span class="mf"&gt;0.0.0.0&lt;/span&gt;&lt;span class="o"&gt;:*&lt;/span&gt; &lt;span class="n"&gt;LISTEN&lt;/span&gt; &lt;span class="mi"&gt;17619&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;nrpe&lt;/span&gt;

&lt;span class="cp"&gt;#echo &amp;quot;/usr/local/nagios/bin/nrpe -c /usr/local/nagios/etc/nrpe.cfg -d&amp;quot; &amp;gt;&amp;gt;/etc/rc.local     &lt;/span&gt;&lt;span class="c1"&gt;//添加nrpe为开机自动启动 &lt;/span&gt;
&lt;span class="cp"&gt;#/usr/local/nagios/libexec/check_nrpe -H 127.0.0.1 &lt;/span&gt;
    &lt;span class="n"&gt;NRPE&lt;/span&gt; &lt;span class="n"&gt;v2&lt;/span&gt;&lt;span class="mf"&gt;.14&lt;/span&gt;    &lt;span class="c1"&gt;//nrpe测试结果，此结果为nrpe已经正常工作了&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h5&gt;定义监控内容&lt;/h5&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;# vi /usr/local/nagios/etc/nrpe.cfg   &lt;/span&gt;&lt;span class="c1"&gt;//定义监控服务器内容&lt;/span&gt;

    &lt;span class="n"&gt;command&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;check_users&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;=/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;nagios&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;libexec&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;check_users&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;w&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt; &lt;span class="err"&gt;#监控登陆的用户数量&lt;/span&gt;
    &lt;span class="n"&gt;command&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;check_load&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;=/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;nagios&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;libexec&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;check_load&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;w&lt;/span&gt; &lt;span class="mi"&gt;15&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;25&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;20&lt;/span&gt; &lt;span class="err"&gt;#监控&lt;/span&gt;&lt;span class="n"&gt;CPU&lt;/span&gt;&lt;span class="err"&gt;的负载&lt;/span&gt;
    &lt;span class="n"&gt;command&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;check_sda2&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;=/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;nagios&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;libexec&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;check_disk&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;w&lt;/span&gt; &lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;sda2&lt;/span&gt; &lt;span class="err"&gt;#监控磁盘利用率，这里的&lt;/span&gt;&lt;span class="n"&gt;sda2&lt;/span&gt;&lt;span class="err"&gt;必须是实际的硬盘分区，可使用&lt;/span&gt;&lt;span class="n"&gt;fdisk&lt;/span&gt; &lt;span class="err"&gt;–&lt;/span&gt;&lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="err"&gt;查&lt;/span&gt;
    &lt;span class="n"&gt;command&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;check_swap&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;=/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;nagios&lt;/span&gt;&lt;span class="c1"&gt;//libexec/check_swap -w 20 -c 10 #监控交换空间&lt;/span&gt;
    &lt;span class="n"&gt;command&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;check_zombie_procs&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;=/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;nagios&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;libexec&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;check_procs&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;w&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="n"&gt;Z&lt;/span&gt; &lt;span class="err"&gt;#监控进程中的僵尸进程&lt;/span&gt;
    &lt;span class="n"&gt;command&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;check_total_procs&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;=/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;nagios&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;libexec&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;check_procs&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;w&lt;/span&gt; &lt;span class="mi"&gt;150&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="mi"&gt;200&lt;/span&gt; &lt;span class="err"&gt;#监控所有进程&lt;/span&gt;

    &lt;span class="err"&gt;注意：&lt;/span&gt;&lt;span class="n"&gt;command&lt;/span&gt;&lt;span class="err"&gt;后面括号中的内容就是定义的变量，变量名可以任意指定，只需和服务器配置文件中的一致即可&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;服务器端安装NRPE插件&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;#cd ..&lt;/span&gt;
&lt;span class="cp"&gt;#tar zxvf nrpe-2.14.tar.gz&lt;/span&gt;
&lt;span class="cp"&gt;#cd nrpe-2.14&lt;/span&gt;
&lt;span class="cp"&gt;# ./configure --with-nagios-user=nagios -with-nagios-group=nagios --prefix=/usr/local/nagios/&lt;/span&gt;
&lt;span class="cp"&gt;# make all;make install-plugin ; make install-daemon;make install-daemon-config   &lt;/span&gt;&lt;span class="c1"&gt;//将check_nrpe插件安装到/usr/local/nagios/libexec/目录下&lt;/span&gt;
&lt;span class="cp"&gt;#/usr/local/nagios/libexec/check_nrpe -H 192.168.80.201&lt;/span&gt;

    &lt;span class="n"&gt;NRPE&lt;/span&gt; &lt;span class="n"&gt;v2&lt;/span&gt;&lt;span class="mf"&gt;.14&lt;/span&gt; &lt;span class="c1"&gt;//该结果表示能与客户端通讯&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;4、配置Nagios服务器支持远程监控&lt;/h3&gt;
&lt;h4&gt;添加监控主机&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;# pwd&lt;/span&gt;
    &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;nagios&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;

&lt;span class="cp"&gt;# vi host.cfg #定义要监控的主机&lt;/span&gt;
    &lt;span class="n"&gt;define&lt;/span&gt; &lt;span class="n"&gt;host&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;use&lt;/span&gt; &lt;span class="n"&gt;linux&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;server&lt;/span&gt;
        &lt;span class="n"&gt;host_name&lt;/span&gt; &lt;span class="n"&gt;slaves&lt;/span&gt;
        &lt;span class="n"&gt;address&lt;/span&gt; &lt;span class="mf"&gt;192.168.8.15&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;定义要监控的服务&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;# vi services.cfg #定义要监控的服务&lt;/span&gt;
    &lt;span class="n"&gt;define&lt;/span&gt; &lt;span class="n"&gt;service&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;use&lt;/span&gt; &lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;service&lt;/span&gt;
        &lt;span class="n"&gt;host_name&lt;/span&gt; &lt;span class="n"&gt;web&lt;/span&gt;
        &lt;span class="n"&gt;service_description&lt;/span&gt; &lt;span class="n"&gt;http&lt;/span&gt;
        &lt;span class="n"&gt;check_command&lt;/span&gt; &lt;span class="n"&gt;check_http&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="n"&gt;define&lt;/span&gt; &lt;span class="n"&gt;service&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;use&lt;/span&gt; &lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;service&lt;/span&gt;
        &lt;span class="n"&gt;host_name&lt;/span&gt; &lt;span class="n"&gt;web&lt;/span&gt;
        &lt;span class="n"&gt;service_description&lt;/span&gt; &lt;span class="n"&gt;ftp&lt;/span&gt;
        &lt;span class="n"&gt;check_command&lt;/span&gt; &lt;span class="n"&gt;check_ftp&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;添加定义check_nrpe命令&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;# vi commands.cfg #定义check_nrpe监控命令&lt;/span&gt;
    &lt;span class="n"&gt;define&lt;/span&gt; &lt;span class="n"&gt;command&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;command_name&lt;/span&gt; &lt;span class="n"&gt;check_nrpe&lt;/span&gt;
        &lt;span class="n"&gt;command_line&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;USER1&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;check_nrpe&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;H&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;HOSTADDRESS&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;ARG1&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;添加host.cfg及ervices.cfg到nagios.cfg&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;# pwd&lt;/span&gt;
    &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;nagios&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;

&lt;span class="cp"&gt;#vi nagios.cfg&lt;/span&gt;
    &lt;span class="n"&gt;cfg_file&lt;/span&gt;&lt;span class="o"&gt;=/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;nagios&lt;/span&gt;&lt;span class="c1"&gt;//etc/objects/host.cfg&lt;/span&gt;
    &lt;span class="n"&gt;cfg_file&lt;/span&gt;&lt;span class="o"&gt;=/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;nagios&lt;/span&gt;&lt;span class="c1"&gt;//etc/objects/services.cfg&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;修改接受报警邮箱&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;# vi contacts.cfg&lt;/span&gt;
    &lt;span class="n"&gt;email&lt;/span&gt; &lt;span class="n"&gt;test&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;test&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt; &lt;span class="p"&gt;;&lt;/span&gt;     &lt;span class="err"&gt;#请修改为自己的邮箱地址&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;测试及启动Nagios服务&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;# /usr/local/nagios/bin/nagios -v /usr/local/nagios/etc/nagios.cfg #检测配置文件是否正确&lt;/span&gt;

    &lt;span class="n"&gt;Total&lt;/span&gt; &lt;span class="n"&gt;Warnings&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
    &lt;span class="n"&gt;Total&lt;/span&gt; &lt;span class="n"&gt;Errors&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="err"&gt;#结果表示配置无错误&lt;/span&gt;

&lt;span class="cp"&gt;# service nagios restart #重启Nagios服务&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;最后访问nagios如下图：&lt;/p&gt;
&lt;p&gt;&lt;img alt="Nagios" src="http://loosky.net/Upload/2013/04/Nagiosservice.png" /&gt;&lt;/p&gt;</summary><category term="Nagios"></category></entry><entry><title>Nagios监控配置</title><link href="http://loosky.com/Technology/2013/04/28/nagios-monitor.html" rel="alternate"></link><updated>2013-04-28T00:00:00+08:00</updated><author><name>Loosky</name></author><id>tag:loosky.com,2013-04-28:Technology/2013/04/28/nagios-monitor.html</id><summary type="html">&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;Nagios&lt;/span&gt;&lt;span class="err"&gt;是一款开源的免费网络监视工具，能有效监控&lt;/span&gt;&lt;span class="n"&gt;Windows&lt;/span&gt;&lt;span class="err"&gt;、&lt;/span&gt;&lt;span class="n"&gt;Linux&lt;/span&gt;&lt;span class="err"&gt;和&lt;/span&gt;&lt;span class="n"&gt;Unix&lt;/span&gt;&lt;span class="err"&gt;的主机状态，交换机路由器等网络设备以及打印机等。&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;Nagios安装和配置：&lt;/strong&gt; &lt;a href="http://loosky.net/archives/2758.html"&gt;http://loosky.net/archives/2758.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;想获取客户机上更为详细的信息，还必须在服务器及客户端上安装NRPE插件。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;NRPE下载地址：&lt;/strong&gt; &lt;a href="http://www.nagios.org/download/addons"&gt;http://www.nagios.org/download/addons&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;服务器端监控程序安装&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;#cd /usr/local/src&lt;/span&gt;
&lt;span class="cp"&gt;#tar zxvf nrpe-2.14.tar.gz&lt;/span&gt;
&lt;span class="cp"&gt;#cd nrpe-2.14&lt;/span&gt;
&lt;span class="cp"&gt;# ./configure --with-nagios-user=nagios -with-nagios-group=nagios --prefix=/usr/local/nagios/&lt;/span&gt;
&lt;span class="cp"&gt;# make all;make install-plugin ; make install-daemon;make install-daemon-config   &lt;/span&gt;&lt;span class="c1"&gt;//将check_nrpe插件安装到/usr/local/nagios/libexec/目录下&lt;/span&gt;
&lt;span class="cp"&gt;#/usr/local/nagios/libexec/check_nrpe -H 127.0.0.1&lt;/span&gt;

    &lt;span class="n"&gt;NRPE&lt;/span&gt; &lt;span class="n"&gt;v2&lt;/span&gt;&lt;span class="mf"&gt;.14&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Linux客户机监控&lt;/h3&gt;
&lt;h4&gt;安装nagios插件&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c"&gt;#useradd -s /sbin/nologin nagios //添加nagios用户&lt;/span&gt;
&lt;span class="c"&gt;#cd /usr/local/src&lt;/span&gt;
&lt;span class="c"&gt;#tar zxvf nagios-plugins-1.4.16.tar.gz&lt;/span&gt;
&lt;span class="c"&gt;#cd nagios-plugins-1.4.16&lt;/span&gt;
&lt;span class="c"&gt;#./configure --with-nagios-user=nagios --with-nagios-group=nagios --prefix=/usr/local/nagios/   //指定安装目录及运行该软件用户和组&lt;/span&gt;
&lt;span class="c"&gt;#make;make install&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;安装nrpe&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;#cd ..&lt;/span&gt;
&lt;span class="cp"&gt;#tar zxvf nrpe-2.14.tar.gz&lt;/span&gt;
&lt;span class="cp"&gt;#cd nrpe-2.14&lt;/span&gt;
&lt;span class="cp"&gt;#./configure --with-nagios-user=nagios --with-nagios-group=nagios --prefix=/usr/local/nagios/&lt;/span&gt;
&lt;span class="cp"&gt;# make all&lt;/span&gt;
&lt;span class="cp"&gt;# make install-plugin;make install-daemon;make install-daemon-config&lt;/span&gt;
&lt;span class="cp"&gt;# ls /usr/local/nagios/libexec/ &lt;/span&gt;&lt;span class="c1"&gt;//验证安装&lt;/span&gt;
    &lt;span class="n"&gt;check_apt&lt;/span&gt; &lt;span class="n"&gt;check_ftp&lt;/span&gt; &lt;span class="n"&gt;check_mailq&lt;/span&gt; &lt;span class="n"&gt;check_overcr&lt;/span&gt; &lt;span class="n"&gt;check_tcp&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;配置、启动、测试NRPE&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;# cd /usr/local/nagios/&lt;/span&gt;
&lt;span class="cp"&gt;# vi etc/nrpe.cfg&lt;/span&gt;

    &lt;span class="n"&gt;allowed_hosts&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mf"&gt;127.0.0.1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mf"&gt;192.168.80.200&lt;/span&gt;   &lt;span class="c1"&gt;//添加服务器端的IP地址&lt;/span&gt;

&lt;span class="cp"&gt;#/usr/local/nagios/bin/nrpe -c /usr/local/nagios/etc/nrpe.cfg –d  &lt;/span&gt;&lt;span class="c1"&gt;//启动NRPE守护进程&lt;/span&gt;
&lt;span class="cp"&gt;#netstat -utpln |grep nrpe        &lt;/span&gt;&lt;span class="c1"&gt;//查看nrpe进程是否已正常启动&lt;/span&gt;

    &lt;span class="n"&gt;tcp&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="mf"&gt;0.0.0.0&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;5666&lt;/span&gt; &lt;span class="mf"&gt;0.0.0.0&lt;/span&gt;&lt;span class="o"&gt;:*&lt;/span&gt; &lt;span class="n"&gt;LISTEN&lt;/span&gt; &lt;span class="mi"&gt;17619&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;nrpe&lt;/span&gt;

&lt;span class="cp"&gt;#echo &amp;quot;/usr/local/nagios/bin/nrpe -c /usr/local/nagios/etc/nrpe.cfg -d&amp;quot; &amp;gt;&amp;gt;/etc/rc.local     &lt;/span&gt;&lt;span class="c1"&gt;//添加nrpe为开机自动启动 &lt;/span&gt;
&lt;span class="cp"&gt;#/usr/local/nagios/libexec/check_nrpe -H 127.0.0.1 &lt;/span&gt;
    &lt;span class="n"&gt;NRPE&lt;/span&gt; &lt;span class="n"&gt;v2&lt;/span&gt;&lt;span class="mf"&gt;.14&lt;/span&gt;    &lt;span class="c1"&gt;//nrpe测试结果，此结果为nrpe已经正常工作了&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;定义监控内容&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;# vi /usr/local/nagios/etc/nrpe.cfg   &lt;/span&gt;&lt;span class="c1"&gt;//定义监控服务器内容&lt;/span&gt;

    &lt;span class="n"&gt;command&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;check_users&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;=/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;nagios&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;libexec&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;check_users&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;w&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt; &lt;span class="err"&gt;#监控登陆的用户数量&lt;/span&gt;
    &lt;span class="n"&gt;command&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;check_load&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;=/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;nagios&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;libexec&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;check_load&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;w&lt;/span&gt; &lt;span class="mi"&gt;15&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;25&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;20&lt;/span&gt; &lt;span class="err"&gt;#监控&lt;/span&gt;&lt;span class="n"&gt;CPU&lt;/span&gt;&lt;span class="err"&gt;的负载&lt;/span&gt;
    &lt;span class="n"&gt;command&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;check_sda2&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;=/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;nagios&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;libexec&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;check_disk&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;w&lt;/span&gt; &lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;sda2&lt;/span&gt; &lt;span class="err"&gt;#监控磁盘利用率，这里的&lt;/span&gt;&lt;span class="n"&gt;sda2&lt;/span&gt;&lt;span class="err"&gt;必须是实际的硬盘分区，可使用&lt;/span&gt;&lt;span class="n"&gt;fdisk&lt;/span&gt; &lt;span class="err"&gt;–&lt;/span&gt;&lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="err"&gt;查&lt;/span&gt;
    &lt;span class="n"&gt;command&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;check_swap&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;=/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;nagios&lt;/span&gt;&lt;span class="c1"&gt;//libexec/check_swap -w 20 -c 10 #监控交换空间&lt;/span&gt;
    &lt;span class="n"&gt;command&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;check_zombie_procs&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;=/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;nagios&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;libexec&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;check_procs&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;w&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="n"&gt;Z&lt;/span&gt; &lt;span class="err"&gt;#监控进程中的僵尸进程&lt;/span&gt;
    &lt;span class="n"&gt;command&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;check_total_procs&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;=/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;nagios&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;libexec&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;check_procs&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;w&lt;/span&gt; &lt;span class="mi"&gt;150&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="mi"&gt;200&lt;/span&gt; &lt;span class="err"&gt;#监控所有进程&lt;/span&gt;

    &lt;span class="err"&gt;注意：&lt;/span&gt;&lt;span class="n"&gt;command&lt;/span&gt;&lt;span class="err"&gt;后面括号中的内容就是定义的变量，变量名可以任意指定，只需和服务器配置文件中的一致即可&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;磁盘自动监控脚本&lt;/h4&gt;
&lt;p&gt;上面的check_sda2命令是对具体的某个分区空间进行监控，但因为每台Linux主机的磁盘分区状况都不一样，而且有多少个分区就需要定义多少个命令，所以通过自定义写一个shell脚本来监控所有的磁盘分区：&lt;/p&gt;
&lt;h5&gt;1、在客户端上创建脚本check_disk.sh&lt;/h5&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;#vi  /usr/local/nagios/libexec/check_disk.sh 写入如下内容

    #!/bin/bash
        row=`df -h -P|wc -l`
        status=0
        for i in `seq 2 &lt;span class="nv"&gt;$row&lt;/span&gt;`
        do
                spare=`df -h -P|sed -n &amp;quot;&lt;span class="nv"&gt;$i&lt;/span&gt;&amp;quot;p|awk &amp;#39;{print $4}&amp;#39;`
                use_percentage=`df -h -P|sed -n &amp;quot;&lt;span class="nv"&gt;$i&lt;/span&gt;&amp;quot;p|sed -n &amp;quot;s/\%//&amp;quot;p|awk &amp;#39;{print $5}&amp;#39;`
                spare_percentage=`expr 100 - &lt;span class="nv"&gt;$use_percentage&lt;/span&gt;`
                partition_name=`df -h -P|sed -n &amp;quot;&lt;span class="nv"&gt;$i&lt;/span&gt;&amp;quot;p|awk &amp;#39;{print $6}&amp;#39;`
                if [ &amp;quot;&lt;span class="nv"&gt;$spare_percentage&lt;/span&gt;&amp;quot; -lt &amp;quot;3&amp;quot;  ];then
                    echo -n &amp;quot;&lt;span class="nv"&gt;$partition_name&lt;/span&gt; CRITICAL &lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;spare_percentage&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;% &lt;span class="nv"&gt;$spare&lt;/span&gt;  &amp;quot;
                    status[&lt;span class="nv"&gt;$i&lt;/span&gt;]=2
                elif [ &amp;quot;&lt;span class="nv"&gt;$spare_percentage&lt;/span&gt;&amp;quot; -lt &amp;quot;5&amp;quot; ];then
                    echo -n  &amp;quot;&lt;span class="nv"&gt;$partition_name&lt;/span&gt; WARNING! &lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;spare_percentage&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;% &lt;span class="nv"&gt;$spare&lt;/span&gt;  &amp;quot;
                    status[&lt;span class="nv"&gt;$i&lt;/span&gt;]=1
                else
                    echo -n  &amp;quot;&lt;span class="nv"&gt;$partition_name&lt;/span&gt; OK &lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;spare_percentage&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;% &lt;span class="nv"&gt;$spare&lt;/span&gt;  &amp;quot;
                    status[&lt;span class="nv"&gt;$i&lt;/span&gt;]=0
                fi
        done
        zhuangtai=0
        for j in `seq 2 &lt;span class="nv"&gt;$row&lt;/span&gt;`
        do
                if [ &amp;quot;&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;status&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;&amp;quot; -gt &amp;quot;&lt;span class="nv"&gt;$zhuangtai&lt;/span&gt;&amp;quot;  ];then
                    zhuangtai=&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;status&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;
                fi
        done
        exit &lt;span class="nv"&gt;$zhuangtai&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h5&gt;2、修改该脚本的权限&lt;/h5&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c"&gt;#chmod +x  /usr/local/nagios/libexec/check_disk.sh&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h5&gt;3、编辑/usr/local/nagios/etc/nrpe.cfg文件&lt;/h5&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;#vi /usr/local/nagios/etc/nrpe.cfg  # 加入一行&lt;/span&gt;
    &lt;span class="n"&gt;command&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;check_disk&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;=/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;nagios&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;libexec&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;check_disk&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sh&lt;/span&gt;

&lt;span class="cp"&gt;#killall nrpe&lt;/span&gt;
&lt;span class="cp"&gt;#/usr/local/nagios/bin/nrpe -c /usr/local/nagios/etc/nrpe.cfg -d  &lt;/span&gt;&lt;span class="c1"&gt;//重启nrpe服务&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h5&gt;4、检测脚本是否运行正常&lt;/h5&gt;
&lt;p&gt;在Nagios服务器端执行如下命令：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c"&gt;#/usr/local/nagios/libexec/check_nrpe -H 192.168.80.201 -c check_disk  //192.168.80.201为客户机IP地址&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;如果正常的话，会输出一行磁盘检测的数据，否则可能会报错。&lt;/p&gt;
&lt;h5&gt;5、在服务器端上添加相应的service&lt;/h5&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;#cd  /usr/local/nagios/etc/&lt;/span&gt;
&lt;span class="cp"&gt;#vi  services.cfg   # 加入如下内容：&lt;/span&gt;
    &lt;span class="n"&gt;define&lt;/span&gt; &lt;span class="n"&gt;service&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;use&lt;/span&gt;     &lt;span class="n"&gt;generic&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;service&lt;/span&gt;
        &lt;span class="n"&gt;host_name&lt;/span&gt;       &lt;span class="mf"&gt;192.168.80.201&lt;/span&gt;
        &lt;span class="n"&gt;service_description&lt;/span&gt;     &lt;span class="n"&gt;check_disk&lt;/span&gt;
        &lt;span class="n"&gt;check_command&lt;/span&gt;           &lt;span class="n"&gt;check_nrpe&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;check_disk&lt;/span&gt;
        &lt;span class="n"&gt;max_check_attempts&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;
        &lt;span class="n"&gt;normal_check_interval&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h5&gt;6、在服务器端重启nagios服务&lt;/h5&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c"&gt;#service nagios restart&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Windows主机监控&lt;/h3&gt;
&lt;p&gt;Windows主机可以通过NSClient++来进行监控，在Windows机器上安装NSClient++外部构件并使用check_nt插件检测和与NSClient++构件进行通讯。&lt;/p&gt;
&lt;p&gt;注：如果按照&lt;a href="http://loosky.net/archives/2758.html"&gt;正常的安装步骤&lt;/a&gt;来安装的话，check_nt插件已经安装到了Nagios服务器上。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;NSClient++下载地址:&lt;/strong&gt; &lt;a href="http://sourceforge.net/projects/nscplus"&gt;http://sourceforge.net/projects/nscplus&lt;/a&gt;&lt;/p&gt;
&lt;h4&gt;1、NSClient++安装&lt;/h4&gt;
&lt;p&gt;下载安装包后，双击进行安装，注意要填入正确的Nagios服务器地址，并加载相应的模块。&lt;/p&gt;
&lt;p&gt;&lt;img alt="NSClient++安装第一步" src="http://loosky.net/Upload/2013/04/NSClientplus-install-step1.png" /&gt;&lt;/p&gt;
&lt;h4&gt;2、验证服务是否启动并允许服务与桌面交互&lt;/h4&gt;
&lt;p&gt;&lt;img alt="验证服务是否正常启动" src="http://loosky.net/Upload/2013/04/NSClientplus-install-step2.png" /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="允许服务与桌面交互" src="http://loosky.net/Upload/2013/04/NSClientplus-install-step3.png" /&gt;&lt;/p&gt;
&lt;h4&gt;3、验证NSClient++端口&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="err"&gt;在&lt;/span&gt;&lt;span class="n"&gt;Windows&lt;/span&gt;&lt;span class="err"&gt;的命令行中输入：&lt;/span&gt;&lt;span class="n"&gt;netstat&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;an&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="验证NSClient端口" src="http://loosky.net/Upload/2013/04/netstat.png" /&gt;&lt;/p&gt;
&lt;p&gt;至此配置就基本完成了，这台Windows机器可以加到Nagios监控配置里了。&lt;/p&gt;
&lt;h4&gt;4、IPv6配置&lt;/h4&gt;
&lt;p&gt;如果Windows客户机启用了IPv6地址，那么NSClient++默认监听的就是IPv6的端口了
&lt;img alt="IPv6主机" src="http://loosky.net/Upload/2013/04/netstat2.png" /&gt;&lt;/p&gt;
&lt;p&gt;解决办法：
方法1、在服务器端也开启IPv6地址，并在客户机上添加服务器的的IP地址。修改安装目录下的nsclient.ini，在allowed_hosts选项中加入服务器的IPv6地址，然后重启NSClient++服务&lt;/p&gt;
&lt;p&gt;方法2、在Windows的命令行界面下，进入安装目录，输入：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;nscp&lt;/span&gt; &lt;span class="n"&gt;settings&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;generate&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;add&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;defaults&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;advanced&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;软件会重新生成nsclient.ini文件，在nsclient.ini文件中找到bind to在后面就可以设置监听到IPv4地址。&lt;/p&gt;
&lt;p&gt;参考：&lt;a href="http://nsclient.org/nscp/ticket/575"&gt;http://nsclient.org/nscp/ticket/575&lt;/a&gt;&lt;/p&gt;
&lt;h4&gt;5、配置Nagios&lt;/h4&gt;
&lt;p&gt;在服务器上定义相应的监控项目即可实现对Windows主机的监控。&lt;/p&gt;
&lt;p&gt;示例：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;#############Windows Nsclient############&lt;/span&gt;
&lt;span class="n"&gt;define&lt;/span&gt; &lt;span class="n"&gt;service&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;use&lt;/span&gt;                     &lt;span class="n"&gt;generic&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;service&lt;/span&gt;
        &lt;span class="n"&gt;hostgroup_name&lt;/span&gt;          &lt;span class="n"&gt;windows&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;servers&lt;/span&gt;
        &lt;span class="n"&gt;service_description&lt;/span&gt;     &lt;span class="n"&gt;Uptime&lt;/span&gt;
        &lt;span class="n"&gt;check_command&lt;/span&gt;           &lt;span class="n"&gt;check_nt&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;UPTIME&lt;/span&gt;   &lt;span class="o"&gt;--&amp;gt;&lt;/span&gt; &lt;span class="err"&gt;系统运行时间&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="n"&gt;define&lt;/span&gt; &lt;span class="n"&gt;service&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;use&lt;/span&gt;                     &lt;span class="n"&gt;generic&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;service&lt;/span&gt;
        &lt;span class="n"&gt;hostgroup_name&lt;/span&gt;          &lt;span class="n"&gt;windows&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;servers&lt;/span&gt;
        &lt;span class="n"&gt;service_description&lt;/span&gt;     &lt;span class="n"&gt;CPU&lt;/span&gt; &lt;span class="n"&gt;Load&lt;/span&gt;
        &lt;span class="n"&gt;check_command&lt;/span&gt;           &lt;span class="n"&gt;check_nt&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;CPULOAD&lt;/span&gt;&lt;span class="o"&gt;!-&lt;/span&gt;&lt;span class="n"&gt;l&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;80&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;90&lt;/span&gt; &lt;span class="o"&gt;--&amp;gt;&lt;/span&gt; &lt;span class="err"&gt;系统运行负载&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="n"&gt;define&lt;/span&gt; &lt;span class="n"&gt;service&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;use&lt;/span&gt;                     &lt;span class="n"&gt;generic&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;service&lt;/span&gt;
        &lt;span class="n"&gt;hostgroup_name&lt;/span&gt;          &lt;span class="n"&gt;windows&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;servers&lt;/span&gt;
        &lt;span class="n"&gt;service_description&lt;/span&gt;     &lt;span class="n"&gt;Memory&lt;/span&gt; &lt;span class="n"&gt;Usage&lt;/span&gt;
        &lt;span class="n"&gt;check_command&lt;/span&gt;           &lt;span class="n"&gt;check_nt&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;MEMUSE&lt;/span&gt;&lt;span class="o"&gt;!-&lt;/span&gt;&lt;span class="n"&gt;w&lt;/span&gt; &lt;span class="mi"&gt;90&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="mi"&gt;95&lt;/span&gt;  &lt;span class="o"&gt;--&amp;gt;&lt;/span&gt;  &lt;span class="err"&gt;系统内存占用量&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="n"&gt;define&lt;/span&gt; &lt;span class="n"&gt;service&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;use&lt;/span&gt;                     &lt;span class="n"&gt;generic&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;service&lt;/span&gt;
        &lt;span class="n"&gt;hostgroup_name&lt;/span&gt;          &lt;span class="n"&gt;windows&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;servers&lt;/span&gt;
        &lt;span class="n"&gt;service_description&lt;/span&gt;     &lt;span class="n"&gt;C&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="err"&gt;\&lt;/span&gt; &lt;span class="n"&gt;Drive&lt;/span&gt; &lt;span class="n"&gt;Space&lt;/span&gt;
        &lt;span class="n"&gt;check_command&lt;/span&gt;           &lt;span class="n"&gt;check_nt&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;USEDDISKSPACE&lt;/span&gt;&lt;span class="o"&gt;!-&lt;/span&gt;&lt;span class="n"&gt;l&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;w&lt;/span&gt; &lt;span class="mi"&gt;80&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="mi"&gt;90&lt;/span&gt; &lt;span class="o"&gt;--&amp;gt;&lt;/span&gt;&lt;span class="err"&gt;系统&lt;/span&gt;&lt;span class="n"&gt;C&lt;/span&gt;&lt;span class="err"&gt;盘磁盘空间&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="n"&gt;define&lt;/span&gt; &lt;span class="n"&gt;service&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;use&lt;/span&gt;                     &lt;span class="n"&gt;generic&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;service&lt;/span&gt;
        &lt;span class="n"&gt;hostgroup_name&lt;/span&gt;          &lt;span class="n"&gt;windows&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;servers&lt;/span&gt;
        &lt;span class="n"&gt;service_description&lt;/span&gt;     &lt;span class="n"&gt;D&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="err"&gt;\&lt;/span&gt; &lt;span class="n"&gt;Drive&lt;/span&gt; &lt;span class="n"&gt;Space&lt;/span&gt;
        &lt;span class="n"&gt;check_command&lt;/span&gt;           &lt;span class="n"&gt;check_nt&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;USEDDISKSPACE&lt;/span&gt;&lt;span class="o"&gt;!-&lt;/span&gt;&lt;span class="n"&gt;l&lt;/span&gt; &lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;w&lt;/span&gt; &lt;span class="mi"&gt;80&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="mi"&gt;90&lt;/span&gt;  &lt;span class="o"&gt;--&amp;gt;&lt;/span&gt;&lt;span class="err"&gt;系统&lt;/span&gt;&lt;span class="n"&gt;D&lt;/span&gt;&lt;span class="err"&gt;盘磁盘空间&lt;/span&gt;
&lt;span class="err"&gt;｝&lt;/span&gt;

&lt;span class="n"&gt;define&lt;/span&gt; &lt;span class="n"&gt;service&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;use&lt;/span&gt;                     &lt;span class="n"&gt;generic&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;service&lt;/span&gt;
        &lt;span class="n"&gt;host_name&lt;/span&gt;               &lt;span class="mf"&gt;192.168.185.4&lt;/span&gt;
        &lt;span class="n"&gt;service_description&lt;/span&gt;     &lt;span class="n"&gt;MMLogOrder&lt;/span&gt;
        &lt;span class="n"&gt;check_command&lt;/span&gt;           &lt;span class="n"&gt;check_nt&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;PROCSTATE&lt;/span&gt;&lt;span class="o"&gt;!-&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="n"&gt;SHOWALL&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;l&lt;/span&gt; &lt;span class="n"&gt;MakeMM&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;exe&lt;/span&gt;  &lt;span class="o"&gt;--&amp;gt;&lt;/span&gt;&lt;span class="err"&gt;系统管理器中&lt;/span&gt;&lt;span class="n"&gt;MakeMM&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;exe&lt;/span&gt;&lt;span class="err"&gt;进程存活性&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</summary><category term="Nagios"></category><category term="PNP"></category></entry><entry><title>Nagios可视化绘制工具PNP安装&amp;配置</title><link href="http://loosky.com/Technology/2013/04/28/nagios-pnp-install.html" rel="alternate"></link><updated>2013-04-28T00:00:00+08:00</updated><author><name>Loosky</name></author><id>tag:loosky.com,2013-04-28:Technology/2013/04/28/nagios-pnp-install.html</id><summary type="html">&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;Nagios&lt;/span&gt;&lt;span class="err"&gt;是一款开源的免费网络监视工具，能有效监控&lt;/span&gt;&lt;span class="n"&gt;Windows&lt;/span&gt;&lt;span class="err"&gt;、&lt;/span&gt;&lt;span class="n"&gt;Linux&lt;/span&gt;&lt;span class="err"&gt;和&lt;/span&gt;&lt;span class="n"&gt;Unix&lt;/span&gt;&lt;span class="err"&gt;的主机状态，交换机路由器等网络设备以及打印机等。&lt;/span&gt;

&lt;span class="n"&gt;PNP&lt;/span&gt;&lt;span class="err"&gt;是一个基于&lt;/span&gt;&lt;span class="n"&gt;php&lt;/span&gt;&lt;span class="err"&gt;和&lt;/span&gt;&lt;span class="n"&gt;perl&lt;/span&gt;&lt;span class="err"&gt;，用&lt;/span&gt;&lt;span class="n"&gt;rrdtool&lt;/span&gt;&lt;span class="err"&gt;将&lt;/span&gt;&lt;span class="n"&gt;nagios&lt;/span&gt;&lt;span class="err"&gt;采集的数据绘制图表的工具。&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;Nagios安装和配置：&lt;/strong&gt; &lt;a href="http://loosky.net/archives/2758.html"&gt;http://loosky.net/archives/2758.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Nagios监控配置：&lt;/strong&gt;&lt;a href="http://loosky.net/archives/2764.html"&gt;http://loosky.net/archives/2764.html&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;一、PNP安装&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;PNP下载地址：&lt;/strong&gt;&lt;a href="http://docs.pnp4nagios.org/pnp-0.6/install"&gt;http://docs.pnp4nagios.org/pnp-0.6/install&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;因为PNP是一个基于php和perl，用rrdtool将nagios采集的数据绘制图表的工具，所以安装pnp之前必须先安装php、perl和rrdtool。这里用yum直接来安装rrdtool，单独下载安装有很多依存关系，比较麻烦。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c"&gt;#yum install rrdtool&lt;/span&gt;
&lt;span class="c"&gt;#cd /usr/local/src&lt;/span&gt;
&lt;span class="c"&gt;#wget http://sourceforge.net/projects/pnp4nagios/files/PNP-0.6/pnp4nagios-0.6.15.tar.gz/download         //下载pnp&lt;/span&gt;
&lt;span class="c"&gt;#tar xzvf pnp4nagios-0.6.15.tar.gz&lt;/span&gt;
&lt;span class="c"&gt;#cd pnp4nagios-0.6.15&lt;/span&gt;
&lt;span class="c"&gt;#./configure&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;此时有可能出现perl modules没有发现的错误：&lt;/p&gt;
&lt;p&gt;&lt;img alt="perl modules没有发现" src="http://loosky.net/Upload/2013/04/pnp-perl.png" /&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;解决方案：&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c"&gt;#yum install rrdtool-perl&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;参考：&lt;a href="http://ronaldbradford.com/blog/installing-perl-rrd-module-rrdspm-2009-07-11/"&gt;http://ronaldbradford.com/blog/installing-perl-rrd-module-rrdspm-2009-07-11/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;根据提示需要继续&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c"&gt;# make all&lt;/span&gt;
&lt;span class="c"&gt;# make fullinstall&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;安装成功后相关的文件信息如下：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;  &lt;span class="n"&gt;General&lt;/span&gt; &lt;span class="n"&gt;Options&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
  &lt;span class="o"&gt;-------------------------&lt;/span&gt;         &lt;span class="o"&gt;-------------------&lt;/span&gt;
  &lt;span class="n"&gt;Nagios&lt;/span&gt; &lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;group&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;                &lt;span class="n"&gt;nagios&lt;/span&gt; &lt;span class="n"&gt;nagios&lt;/span&gt;
  &lt;span class="n"&gt;Install&lt;/span&gt; &lt;span class="n"&gt;directory&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;                &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;pnp4nagios&lt;/span&gt;
  &lt;span class="n"&gt;HTML&lt;/span&gt; &lt;span class="n"&gt;Dir&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;                         &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;pnp4nagios&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;share&lt;/span&gt;
  &lt;span class="n"&gt;Config&lt;/span&gt; &lt;span class="n"&gt;Dir&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;                       &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;pnp4nagios&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;
  &lt;span class="n"&gt;Location&lt;/span&gt; &lt;span class="n"&gt;of&lt;/span&gt; &lt;span class="n"&gt;rrdtool&lt;/span&gt; &lt;span class="n"&gt;binary&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;       &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;bin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;rrdtool&lt;/span&gt; &lt;span class="n"&gt;Version&lt;/span&gt; &lt;span class="mf"&gt;1.3.8&lt;/span&gt;
  &lt;span class="n"&gt;RRDs&lt;/span&gt; &lt;span class="n"&gt;Perl&lt;/span&gt; &lt;span class="n"&gt;Modules&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;                &lt;span class="n"&gt;FOUND&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Version&lt;/span&gt; &lt;span class="mf"&gt;1.3008&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="n"&gt;RRD&lt;/span&gt; &lt;span class="n"&gt;Files&lt;/span&gt; &lt;span class="n"&gt;stored&lt;/span&gt; &lt;span class="n"&gt;in&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;              &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;pnp4nagios&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;perfdata&lt;/span&gt;
  &lt;span class="n"&gt;process_perfdata&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pl&lt;/span&gt; &lt;span class="n"&gt;Logfile&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;      &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;pnp4nagios&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;perfdata&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;log&lt;/span&gt;
  &lt;span class="n"&gt;Perfdata&lt;/span&gt; &lt;span class="n"&gt;files&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;NPCD&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;stored&lt;/span&gt; &lt;span class="n"&gt;in&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;  &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;pnp4nagios&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;spool&lt;/span&gt;

  &lt;span class="n"&gt;Web&lt;/span&gt; &lt;span class="n"&gt;Interface&lt;/span&gt; &lt;span class="n"&gt;Options&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
  &lt;span class="o"&gt;-------------------------&lt;/span&gt;         &lt;span class="o"&gt;-------------------&lt;/span&gt;
  &lt;span class="n"&gt;HTML&lt;/span&gt; &lt;span class="n"&gt;URL&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;                         &lt;span class="n"&gt;http&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="c1"&gt;//localhost/pnp4nagios&lt;/span&gt;
  &lt;span class="n"&gt;Apache&lt;/span&gt; &lt;span class="n"&gt;Config&lt;/span&gt; &lt;span class="n"&gt;File&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;               &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;httpd&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;conf&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;pnp4nagios&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;conf&lt;/span&gt;

  &lt;span class="n"&gt;PHP&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Files&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;web&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;frontend&lt;/span&gt;&lt;span class="err"&gt;：&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;pnp4nagios&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;share&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;pnp&lt;/span&gt;
  &lt;span class="n"&gt;data&lt;/span&gt; &lt;span class="n"&gt;collector&lt;/span&gt; &lt;span class="n"&gt;process_perfdata&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pl&lt;/span&gt;&lt;span class="err"&gt;：&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;pnp4nagios&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;libexec&lt;/span&gt;
  &lt;span class="n"&gt;sample&lt;/span&gt; &lt;span class="n"&gt;config&lt;/span&gt; &lt;span class="n"&gt;files&lt;/span&gt; &lt;span class="n"&gt;with&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;suffix&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;sample&lt;/span&gt;&lt;span class="err"&gt;：&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;pnpnagios&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;
  &lt;span class="n"&gt;config&lt;/span&gt; &lt;span class="n"&gt;file&lt;/span&gt; &lt;span class="n"&gt;config&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;php&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;web&lt;/span&gt; &lt;span class="n"&gt;frontend&lt;/span&gt; &lt;span class="n"&gt;in&lt;/span&gt;&lt;span class="err"&gt;：&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;pnp4nagios&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;然后把相关后缀带sample文件变更成无sample后缀
    #cd /usr/local/pnp4nagios/etc
    #mv misccommands.cfg-sample misccommands.cfg
    #mv nagios.cfg-sample nagios.cfg
    #mv rra.cfg-sample rra.cfg&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c"&gt;#cd pages&lt;/span&gt;
&lt;span class="c"&gt;#mv web_traffic.cfg-sample web_traffic.cfg&lt;/span&gt;

&lt;span class="c"&gt;#cd ../check_commands/&lt;/span&gt;
&lt;span class="c"&gt;#mv check_all_local_disks.cfg-sample check_all_local_disks.cfg&lt;/span&gt;
&lt;span class="c"&gt;#mv check_nrpe.cfg-sample check_nrpe.cfg&lt;/span&gt;
&lt;span class="c"&gt;#mv check_nwstat.cfg-sample check_nwstat.cfg&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;二、配置Ｎagios来启用PNP&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;Nagios&lt;/span&gt;&lt;span class="err"&gt;的配置文件中，&lt;/span&gt;&lt;span class="n"&gt;enable_environment_macros&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="err"&gt;默认是开启了的&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;pnp4nagios有很多种工作模式，参见：&lt;a href="http://docs.pnp4nagios.org/pnp-0.6/config"&gt;http://docs.pnp4nagios.org/pnp-0.6/config&lt;/a&gt;。这里我们选用同步模式，想选其它模式可以看说明都有详细配置教程。&lt;/p&gt;
&lt;h4&gt;定义命令&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;#vi /usr/local/nagios/etc/objects/commands.cfg  &lt;/span&gt;&lt;span class="c1"&gt;//新增或修改如下内容&lt;/span&gt;

&lt;span class="n"&gt;define&lt;/span&gt; &lt;span class="n"&gt;command&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
       &lt;span class="n"&gt;command_name&lt;/span&gt;    &lt;span class="n"&gt;process&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;service&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;perfdata&lt;/span&gt;
       &lt;span class="n"&gt;command_line&lt;/span&gt;    &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;bin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;perl&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;pnp4nagios&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;libexec&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;process_perfdata&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pl&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="n"&gt;define&lt;/span&gt; &lt;span class="n"&gt;command&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
       &lt;span class="n"&gt;command_name&lt;/span&gt;    &lt;span class="n"&gt;process&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;host&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;perfdata&lt;/span&gt;
       &lt;span class="n"&gt;command_line&lt;/span&gt;    &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;bin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;perl&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;pnp4nagios&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;libexec&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;process_perfdata&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pl&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="n"&gt;HOSTPERFDATA&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;修改主机和服务模板&lt;/h4&gt;
&lt;p&gt;修改主机和服务模板，添加小太阳模版，镶嵌在nagios页面上（http://docs.pnp4nagios.org/pnp-0.6/webfe）&lt;/p&gt;
&lt;p&gt;这里有两种查看图的方法，第一种方法是你当太阳的图标的时候会在新窗口中打开图形查看，第二种方法是你只需要把鼠标移动到太阳图标上面就会自动弹出图形出来，以下两种方法你可以根据自己喜好选其中一种即可&lt;/p&gt;
&lt;p&gt;第一种方法在templates.cfg里面加入如下 &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;define&lt;/span&gt; &lt;span class="n"&gt;host&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; 
 &lt;span class="n"&gt;name&lt;/span&gt;       &lt;span class="n"&gt;host&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;pnp&lt;/span&gt; 
 &lt;span class="n"&gt;action_url&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;pnp4nagios&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;index&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;php&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;graph&lt;/span&gt;&lt;span class="o"&gt;?&lt;/span&gt;&lt;span class="n"&gt;host&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;HOSTNAME&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;srv&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;_HOST_&lt;/span&gt; 
 &lt;span class="k"&gt;register&lt;/span&gt;   &lt;span class="mi"&gt;0&lt;/span&gt; 
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="n"&gt;define&lt;/span&gt; &lt;span class="n"&gt;service&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; 
 &lt;span class="n"&gt;name&lt;/span&gt;       &lt;span class="n"&gt;srv&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;pnp&lt;/span&gt; 
 &lt;span class="n"&gt;action_url&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;pnp4nagios&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;index&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;php&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;graph&lt;/span&gt;&lt;span class="o"&gt;?&lt;/span&gt;&lt;span class="n"&gt;host&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;HOSTNAME&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;srv&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;SERVICEDESC&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt; 
 &lt;span class="k"&gt;register&lt;/span&gt;   &lt;span class="mi"&gt;0&lt;/span&gt; 
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;第二种方法按照说明加入如下&lt;/p&gt;
&lt;p&gt;拷贝status-header.ssi到/usr/local/nagios/share/ssi/目录下面来（这一步很重要，要不然移动到太阳标记上出不来图）&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;define&lt;/span&gt; &lt;span class="n"&gt;host&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; 
    &lt;span class="n"&gt;name&lt;/span&gt;       &lt;span class="n"&gt;host&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;pnp&lt;/span&gt; 
    &lt;span class="n"&gt;action_url&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;pnp4nagios&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;index&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;php&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;graph&lt;/span&gt;&lt;span class="o"&gt;?&lt;/span&gt;&lt;span class="n"&gt;host&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;HOSTNAME&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;srv&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;_HOST_&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt; &lt;span class="n"&gt;class&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;tips&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt; &lt;span class="n"&gt;rel&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;pnp4nagios&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;index&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;php&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;popup&lt;/span&gt;&lt;span class="o"&gt;?&lt;/span&gt;&lt;span class="n"&gt;host&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;HOSTNAME&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;srv&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;_HOST_&lt;/span&gt; 
    &lt;span class="k"&gt;register&lt;/span&gt;   &lt;span class="mi"&gt;0&lt;/span&gt; 
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="n"&gt;define&lt;/span&gt; &lt;span class="n"&gt;service&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; 
    &lt;span class="n"&gt;name&lt;/span&gt;       &lt;span class="n"&gt;srv&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;pnp&lt;/span&gt; 
    &lt;span class="n"&gt;action_url&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;pnp4nagios&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;index&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;php&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;graph&lt;/span&gt;&lt;span class="o"&gt;?&lt;/span&gt;&lt;span class="n"&gt;host&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;HOSTNAME&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;srv&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;SERVICEDESC&lt;/span&gt;&lt;span class="err"&gt;$&amp;#39;&lt;/span&gt; &lt;span class="n"&gt;class&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;tips&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt; &lt;span class="n"&gt;rel&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;pnp4nagios&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;index&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;php&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;popup&lt;/span&gt;&lt;span class="o"&gt;?&lt;/span&gt;&lt;span class="n"&gt;host&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;HOSTNAME&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;srv&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;SERVICEDESC&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt; 
    &lt;span class="k"&gt;register&lt;/span&gt;   &lt;span class="mi"&gt;0&lt;/span&gt; 
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;为目标主机图标旁边添加一个小太阳标记：&lt;/p&gt;
&lt;p&gt;&lt;img alt="" src="http://loosky.net/Upload/2013/04/pnp-host.jpg" /&gt;&lt;/p&gt;
&lt;p&gt;为相关服务添加一个小太阳标记&lt;/p&gt;
&lt;p&gt;&lt;img alt="" src="http://loosky.net/Upload/2013/04/pnp-service.jpg" /&gt;&lt;/p&gt;</summary><category term="Nagios"></category><category term="PNP"></category></entry><entry><title>Git常用命令</title><link href="http://loosky.com/Technology/2013/03/01/git-command.html" rel="alternate"></link><updated>2013-03-01T00:00:00+08:00</updated><author><name>Loosky</name></author><id>tag:loosky.com,2013-03-01:Technology/2013/03/01/git-command.html</id><summary type="html">&lt;h2&gt;Git配置&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;git&lt;/span&gt; &lt;span class="n"&gt;config&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;global&lt;/span&gt; &lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;robbin&amp;quot;&lt;/span&gt;   
&lt;span class="n"&gt;git&lt;/span&gt; &lt;span class="n"&gt;config&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;global&lt;/span&gt; &lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;email&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;fankai@gmail.com&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;git&lt;/span&gt; &lt;span class="n"&gt;config&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;global&lt;/span&gt; &lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ui&lt;/span&gt; &lt;span class="nb"&gt;true&lt;/span&gt;
&lt;span class="n"&gt;git&lt;/span&gt; &lt;span class="n"&gt;config&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;global&lt;/span&gt; &lt;span class="n"&gt;alias&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;co&lt;/span&gt; &lt;span class="n"&gt;checkout&lt;/span&gt;
&lt;span class="n"&gt;git&lt;/span&gt; &lt;span class="n"&gt;config&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;global&lt;/span&gt; &lt;span class="n"&gt;alias&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ci&lt;/span&gt; &lt;span class="n"&gt;commit&lt;/span&gt;
&lt;span class="n"&gt;git&lt;/span&gt; &lt;span class="n"&gt;config&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;global&lt;/span&gt; &lt;span class="n"&gt;alias&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;st&lt;/span&gt; &lt;span class="n"&gt;status&lt;/span&gt;
&lt;span class="n"&gt;git&lt;/span&gt; &lt;span class="n"&gt;config&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;global&lt;/span&gt; &lt;span class="n"&gt;alias&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;br&lt;/span&gt; &lt;span class="n"&gt;branch&lt;/span&gt;
&lt;span class="n"&gt;git&lt;/span&gt; &lt;span class="n"&gt;config&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;global&lt;/span&gt; &lt;span class="n"&gt;core&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;editor&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;mate -w&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;用户的git配置文件~/.gitconfig&lt;/code&gt;&lt;/p&gt;
&lt;h2&gt;Git常用命令&lt;/h2&gt;
&lt;h3&gt;查看、添加、提交、删除、找回，重置修改文件&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nx"&gt;help&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nb"&gt;command&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;  &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;显示&lt;/span&gt;&lt;span class="nb"&gt;command&lt;/span&gt;&lt;span class="err"&gt;的&lt;/span&gt;&lt;span class="nx"&gt;help&lt;/span&gt;
&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nx"&gt;show&lt;/span&gt;            &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;显示某次提交的内容&lt;/span&gt;
&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nx"&gt;show&lt;/span&gt; &lt;span class="nv"&gt;$id&lt;/span&gt;

&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nx"&gt;co&lt;/span&gt;  &lt;span class="o"&gt;--&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nb"&gt;file&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;   &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;抛弃工作区修改&lt;/span&gt;
&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nx"&gt;co&lt;/span&gt;  &lt;span class="nx"&gt;.&lt;/span&gt;           &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;抛弃工作区修改&lt;/span&gt;

&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nb"&gt;add&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nb"&gt;file&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;      &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;将工作文件修改提交到本地暂存区&lt;/span&gt;
&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nb"&gt;add&lt;/span&gt; &lt;span class="nx"&gt;.&lt;/span&gt;           &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;将所有修改过的工作文件提交暂存区&lt;/span&gt;

&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nx"&gt;rm&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nb"&gt;file&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;       &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;从版本库中删除文件&lt;/span&gt;
&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nx"&gt;rm&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nb"&gt;file&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="nx"&gt;cached&lt;/span&gt;  &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;从版本库中删除文件，但不删除文件&lt;/span&gt;

&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nb"&gt;reset&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nb"&gt;file&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;    &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;从暂存区恢复到工作文件&lt;/span&gt;
&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nb"&gt;reset&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt; &lt;span class="nx"&gt;.&lt;/span&gt;      &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;从暂存区恢复到工作文件&lt;/span&gt;
&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nb"&gt;reset&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="nx"&gt;hard&lt;/span&gt;    &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;恢复最近一次提交过的状态，即放弃上次提交后的所有本次修改&lt;/span&gt;

&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nx"&gt;ci&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nb"&gt;file&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nx"&gt;ci&lt;/span&gt; &lt;span class="nx"&gt;.&lt;/span&gt;
&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nx"&gt;ci&lt;/span&gt; &lt;span class="na"&gt;-a&lt;/span&gt;           &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;将&lt;/span&gt;&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nb"&gt;add&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nx"&gt;rm&lt;/span&gt;&lt;span class="err"&gt;和&lt;/span&gt;&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nx"&gt;ci&lt;/span&gt;&lt;span class="err"&gt;等操作都合并在一起做&lt;/span&gt;
&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nx"&gt;ci&lt;/span&gt; &lt;span class="na"&gt;-am&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;some comments&amp;quot;&lt;/span&gt;
&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nx"&gt;ci&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="nx"&gt;amend&lt;/span&gt;      &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;修改最后一次提交记录&lt;/span&gt;

&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nx"&gt;revert&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nv"&gt;$id&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;    &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;恢复某次提交的状态，恢复动作本身也创建了一次提交对象&lt;/span&gt;
&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nx"&gt;revert&lt;/span&gt; &lt;span class="nb"&gt;HEAD&lt;/span&gt;     &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;恢复最后一次提交的状态&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;查看文件diff&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nx"&gt;diff&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nb"&gt;file&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;     &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;比较当前文件和暂存区文件差异&lt;/span&gt;
&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nx"&gt;diff&lt;/span&gt;
&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nx"&gt;diff&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nv"&gt;$id1&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nv"&gt;$id2&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;   &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;比较两次提交之间的差异&lt;/span&gt;
&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nx"&gt;diff&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nx"&gt;branch1&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="nx"&gt;..&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nx"&gt;branch2&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;在两个分支之间比较&lt;/span&gt; 
&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nx"&gt;diff&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="nx"&gt;staged&lt;/span&gt;   &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;比较暂存区和版本库差异&lt;/span&gt;
&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nx"&gt;diff&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="nx"&gt;cached&lt;/span&gt;   &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;比较暂存区和版本库差异&lt;/span&gt;
&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nx"&gt;diff&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="nb"&gt;stat&lt;/span&gt;     &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;仅仅比较统计信息&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;查看提交记录&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="k"&gt;log&lt;/span&gt;
&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="k"&gt;log&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nb"&gt;file&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;      &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;查看该文件每次提交记录&lt;/span&gt;
&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="k"&gt;log&lt;/span&gt; &lt;span class="na"&gt;-p&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nb"&gt;file&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;   &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;查看每次详细修改内容的&lt;/span&gt;&lt;span class="nx"&gt;diff&lt;/span&gt;
&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="k"&gt;log&lt;/span&gt; &lt;span class="na"&gt;-p&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;       &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;查看最近两次详细修改内容的&lt;/span&gt;&lt;span class="nx"&gt;diff&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;tig&lt;/h3&gt;
&lt;p&gt;Mac上可以使用tig代替diff和log，brew install tig&lt;/p&gt;
&lt;h2&gt;Git 本地分支管理&lt;/h2&gt;
&lt;h3&gt;查看、切换、创建和删除分支&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nx"&gt;br&lt;/span&gt; &lt;span class="na"&gt;-r&lt;/span&gt;           &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;查看远程分支&lt;/span&gt;
&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nx"&gt;br&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nx"&gt;new_branch&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;创建新的分支&lt;/span&gt;
&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nx"&gt;br&lt;/span&gt; &lt;span class="na"&gt;-v&lt;/span&gt;           &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;查看各个分支最后提交信息&lt;/span&gt;
&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nx"&gt;br&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="nx"&gt;merged&lt;/span&gt;     &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;查看已经被合并到当前分支的分支&lt;/span&gt;
&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nx"&gt;br&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="nx"&gt;no&lt;/span&gt;&lt;span class="na"&gt;-merged&lt;/span&gt;  &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;查看尚未被合并到当前分支的分支&lt;/span&gt;

&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nx"&gt;co&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nx"&gt;branch&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;     &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;切换到某个分支&lt;/span&gt;
&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nx"&gt;co&lt;/span&gt; &lt;span class="na"&gt;-b&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nx"&gt;new_branch&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;创建新的分支，并且切换过去&lt;/span&gt;
&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nx"&gt;co&lt;/span&gt; &lt;span class="na"&gt;-b&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nx"&gt;new_branch&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nx"&gt;branch&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;  &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;基于&lt;/span&gt;&lt;span class="nx"&gt;branch&lt;/span&gt;&lt;span class="err"&gt;创建新的&lt;/span&gt;&lt;span class="nx"&gt;new_branch&lt;/span&gt;

&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nx"&gt;co&lt;/span&gt; &lt;span class="nv"&gt;$id&lt;/span&gt;          &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;把某次历史提交记录&lt;/span&gt;&lt;span class="nx"&gt;checkout&lt;/span&gt;&lt;span class="err"&gt;出来，但无分支信息，切换到其他分支会自动删除&lt;/span&gt;
&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nx"&gt;co&lt;/span&gt; &lt;span class="nv"&gt;$id&lt;/span&gt; &lt;span class="na"&gt;-b&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nx"&gt;new_branch&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;  &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;把某次历史提交记录&lt;/span&gt;&lt;span class="nx"&gt;checkout&lt;/span&gt;&lt;span class="err"&gt;出来，创建成一个分支&lt;/span&gt;

&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nx"&gt;br&lt;/span&gt; &lt;span class="na"&gt;-d&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nx"&gt;branch&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;  &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;删除某个分支&lt;/span&gt;
&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nx"&gt;br&lt;/span&gt; &lt;span class="na"&gt;-D&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nx"&gt;branch&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;  &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;强制删除某个分支&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="err"&gt;未被合并的分支被删除的时候需要强制&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;分支合并和rebase&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nb"&gt;merge&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nx"&gt;branch&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;               &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;将&lt;/span&gt;&lt;span class="nx"&gt;branch&lt;/span&gt;&lt;span class="err"&gt;分支合并到当前分支&lt;/span&gt;
&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nb"&gt;merge&lt;/span&gt; &lt;span class="nx"&gt;origin&lt;/span&gt;&lt;span class="p"&gt;/&lt;/span&gt;&lt;span class="nx"&gt;master&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="nx"&gt;no&lt;/span&gt;&lt;span class="na"&gt;-ff&lt;/span&gt;  &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;不要&lt;/span&gt;&lt;span class="nx"&gt;Fast&lt;/span&gt;&lt;span class="na"&gt;-Foward&lt;/span&gt;&lt;span class="err"&gt;合并，这样可以生成&lt;/span&gt;&lt;span class="nb"&gt;merge&lt;/span&gt;&lt;span class="err"&gt;提交&lt;/span&gt;

&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nx"&gt;rebase&lt;/span&gt; &lt;span class="nx"&gt;master&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nx"&gt;branch&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;       &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;将&lt;/span&gt;&lt;span class="nx"&gt;master&lt;/span&gt; &lt;span class="nx"&gt;rebase&lt;/span&gt;&lt;span class="err"&gt;到&lt;/span&gt;&lt;span class="nx"&gt;branch&lt;/span&gt;&lt;span class="err"&gt;，相当于：&lt;/span&gt;
&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nx"&gt;co&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nx"&gt;branch&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nx"&gt;rebase&lt;/span&gt; &lt;span class="nx"&gt;master&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nx"&gt;co&lt;/span&gt; &lt;span class="nx"&gt;master&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nb"&gt;merge&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nx"&gt;branch&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Git补丁管理(方便在多台机器上开发同步时用)&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;git&lt;/span&gt; &lt;span class="n"&gt;diff&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="p"&gt;..&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;sync&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;patch&lt;/span&gt;         &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;生成补丁&lt;/span&gt;
&lt;span class="n"&gt;git&lt;/span&gt; &lt;span class="n"&gt;apply&lt;/span&gt; &lt;span class="p"&gt;..&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;sync&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;patch&lt;/span&gt;          &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;打补丁&lt;/span&gt;
&lt;span class="n"&gt;git&lt;/span&gt; &lt;span class="n"&gt;apply&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;check&lt;/span&gt; &lt;span class="p"&gt;..&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;sync&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;patch&lt;/span&gt;  &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;测试补丁能否成功&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Git暂存管理&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;git&lt;/span&gt; &lt;span class="n"&gt;stash&lt;/span&gt;                        &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;暂存&lt;/span&gt;
&lt;span class="n"&gt;git&lt;/span&gt; &lt;span class="n"&gt;stash&lt;/span&gt; &lt;span class="n"&gt;list&lt;/span&gt;                   &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;列所有&lt;/span&gt;&lt;span class="n"&gt;stash&lt;/span&gt;
&lt;span class="n"&gt;git&lt;/span&gt; &lt;span class="n"&gt;stash&lt;/span&gt; &lt;span class="n"&gt;apply&lt;/span&gt;                  &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;恢复暂存的内容&lt;/span&gt;
&lt;span class="n"&gt;git&lt;/span&gt; &lt;span class="n"&gt;stash&lt;/span&gt; &lt;span class="n"&gt;drop&lt;/span&gt;                   &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;删除暂存区&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Git远程分支管理&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nx"&gt;pull&lt;/span&gt;                         &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;抓取远程仓库所有分支更新并合并到本地&lt;/span&gt;
&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nx"&gt;pull&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="nx"&gt;no&lt;/span&gt;&lt;span class="na"&gt;-ff&lt;/span&gt;                 &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;抓取远程仓库所有分支更新并合并到本地，不要快进合并&lt;/span&gt;
&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nx"&gt;fetch&lt;/span&gt; &lt;span class="nx"&gt;origin&lt;/span&gt;                 &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;抓取远程仓库更新&lt;/span&gt;
&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nb"&gt;merge&lt;/span&gt; &lt;span class="nx"&gt;origin&lt;/span&gt;&lt;span class="p"&gt;/&lt;/span&gt;&lt;span class="nx"&gt;master&lt;/span&gt;          &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;将远程主分支合并到本地当前分支&lt;/span&gt;
&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nx"&gt;co&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="nx"&gt;track&lt;/span&gt; &lt;span class="nx"&gt;origin&lt;/span&gt;&lt;span class="p"&gt;/&lt;/span&gt;&lt;span class="nx"&gt;branch&lt;/span&gt;     &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;跟踪某个远程分支创建相应的本地分支&lt;/span&gt;
&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nx"&gt;co&lt;/span&gt; &lt;span class="na"&gt;-b&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nx"&gt;local_branch&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;origin&lt;/span&gt;&lt;span class="o"&gt;/&amp;lt;&lt;/span&gt;&lt;span class="nx"&gt;remote_branch&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;  &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;基于远程分支创建本地分支，功能同上&lt;/span&gt;

&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nb"&gt;push&lt;/span&gt;                         &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="nb"&gt;push&lt;/span&gt;&lt;span class="err"&gt;所有分支&lt;/span&gt;
&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nb"&gt;push&lt;/span&gt; &lt;span class="nx"&gt;origin&lt;/span&gt; &lt;span class="nx"&gt;master&lt;/span&gt;           &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;将本地主分支推到远程主分支&lt;/span&gt;
&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nb"&gt;push&lt;/span&gt; &lt;span class="na"&gt;-u&lt;/span&gt; &lt;span class="nx"&gt;origin&lt;/span&gt; &lt;span class="nx"&gt;master&lt;/span&gt;        &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;将本地主分支推到远程&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="err"&gt;如无远程主分支则创建，用于初始化远程仓库&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nb"&gt;push&lt;/span&gt; &lt;span class="nx"&gt;origin&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nx"&gt;local_branch&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;   &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;创建远程分支，&lt;/span&gt; &lt;span class="nx"&gt;origin&lt;/span&gt;&lt;span class="err"&gt;是远程仓库名&lt;/span&gt;
&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nb"&gt;push&lt;/span&gt; &lt;span class="nx"&gt;origin&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nx"&gt;local_branch&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nx"&gt;remote_branch&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;  &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;创建远程分支&lt;/span&gt;
&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nb"&gt;push&lt;/span&gt; &lt;span class="nx"&gt;origin&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nx"&gt;remote_branch&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;  &lt;span class="err"&gt;#先删除本地分支&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;git&lt;/span&gt; &lt;span class="nx"&gt;br&lt;/span&gt; &lt;span class="na"&gt;-d&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nx"&gt;branch&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;，然后再&lt;/span&gt;&lt;span class="nb"&gt;push&lt;/span&gt;&lt;span class="err"&gt;删除远程分支&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Git远程仓库管理&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;git&lt;/span&gt; &lt;span class="n"&gt;remote&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt;                    &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;查看远程服务器地址和仓库名称&lt;/span&gt;
&lt;span class="n"&gt;git&lt;/span&gt; &lt;span class="n"&gt;remote&lt;/span&gt; &lt;span class="n"&gt;show&lt;/span&gt; &lt;span class="n"&gt;origin&lt;/span&gt;           &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;查看远程服务器仓库状态&lt;/span&gt;
&lt;span class="n"&gt;git&lt;/span&gt; &lt;span class="n"&gt;remote&lt;/span&gt; &lt;span class="n"&gt;add&lt;/span&gt; &lt;span class="n"&gt;origin&lt;/span&gt; &lt;span class="n"&gt;git&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;github&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;robbin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;robbin_site&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;git&lt;/span&gt;         &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;添加远程仓库地址&lt;/span&gt;
&lt;span class="n"&gt;git&lt;/span&gt; &lt;span class="n"&gt;remote&lt;/span&gt; &lt;span class="n"&gt;set&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt; &lt;span class="n"&gt;origin&lt;/span&gt; &lt;span class="n"&gt;git&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;github&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;robbin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;robbin_site&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;gi&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;创建远程仓库&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;git&lt;/span&gt; &lt;span class="n"&gt;clone&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;bare&lt;/span&gt; &lt;span class="n"&gt;robbin_site&lt;/span&gt; &lt;span class="n"&gt;robbin_site&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;git&lt;/span&gt;  &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;用带版本的项目创建纯版本仓库&lt;/span&gt;
&lt;span class="n"&gt;scp&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;r&lt;/span&gt; &lt;span class="n"&gt;my_project&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;git&lt;/span&gt; &lt;span class="n"&gt;git&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;git&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;csdn&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="o"&gt;:~&lt;/span&gt;      &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;将纯仓库上传到服务器上&lt;/span&gt;

&lt;span class="n"&gt;mkdir&lt;/span&gt; &lt;span class="n"&gt;robbin_site&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;git&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;cd&lt;/span&gt; &lt;span class="n"&gt;robbin_site&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;git&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;git&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;bare&lt;/span&gt; &lt;span class="n"&gt;init&lt;/span&gt; &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;在服务器创建纯仓库&lt;/span&gt;
&lt;span class="n"&gt;git&lt;/span&gt; &lt;span class="n"&gt;remote&lt;/span&gt; &lt;span class="n"&gt;add&lt;/span&gt; &lt;span class="n"&gt;origin&lt;/span&gt; &lt;span class="n"&gt;git&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;github&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;robbin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;robbin_site&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;git&lt;/span&gt;    &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;设置远程仓库地址&lt;/span&gt;
&lt;span class="n"&gt;git&lt;/span&gt; &lt;span class="n"&gt;push&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;u&lt;/span&gt; &lt;span class="n"&gt;origin&lt;/span&gt; &lt;span class="n"&gt;master&lt;/span&gt;                                      &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;客户端首次提交&lt;/span&gt;
&lt;span class="n"&gt;git&lt;/span&gt; &lt;span class="n"&gt;push&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;u&lt;/span&gt; &lt;span class="n"&gt;origin&lt;/span&gt; &lt;span class="n"&gt;develop&lt;/span&gt;  &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;首次将本地&lt;/span&gt;&lt;span class="n"&gt;develop&lt;/span&gt;&lt;span class="err"&gt;分支提交到远程&lt;/span&gt;&lt;span class="n"&gt;develop&lt;/span&gt;&lt;span class="err"&gt;分支，并且&lt;/span&gt;&lt;span class="n"&gt;track&lt;/span&gt;

&lt;span class="n"&gt;git&lt;/span&gt; &lt;span class="n"&gt;remote&lt;/span&gt; &lt;span class="n"&gt;set&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;head&lt;/span&gt; &lt;span class="n"&gt;origin&lt;/span&gt; &lt;span class="n"&gt;master&lt;/span&gt;   &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;设置远程仓库的&lt;/span&gt;&lt;span class="n"&gt;HEAD&lt;/span&gt;&lt;span class="err"&gt;指向&lt;/span&gt;&lt;span class="n"&gt;master&lt;/span&gt;&lt;span class="err"&gt;分支&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;也可以命令设置跟踪远程库和本地库&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;git&lt;/span&gt; &lt;span class="n"&gt;branch&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;set&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;upstream&lt;/span&gt; &lt;span class="n"&gt;master&lt;/span&gt; &lt;span class="n"&gt;origin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;master&lt;/span&gt;
&lt;span class="n"&gt;git&lt;/span&gt; &lt;span class="n"&gt;branch&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;set&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;upstream&lt;/span&gt; &lt;span class="n"&gt;develop&lt;/span&gt; &lt;span class="n"&gt;origin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;develop&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href="http://robbinfan.com/blog/34/git-common-command"&gt;原文链接&lt;/a&gt;&lt;/p&gt;</summary><category term="Git"></category></entry><entry><title>使用Redis来加速WordPress</title><link href="http://loosky.com/Technology/2013/01/07/Redis,WordPress.html" rel="alternate"></link><updated>2013-01-07T00:00:00+08:00</updated><author><name>Loosky</name></author><id>tag:loosky.com,2013-01-07:Technology/2013/01/07/Redis,WordPress.html</id><summary type="html">&lt;h2&gt;1、安装 Redis&lt;/h2&gt;
&lt;p&gt;官方网站：&lt;a href="http://redis.io/download"&gt;http://redis.io/download&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c"&gt;# cd /usr/local/src&lt;/span&gt;
&lt;span class="c"&gt;# wget http://redis.googlecode.com/files/redis-2.6.7.tar.gz&lt;/span&gt;
&lt;span class="c"&gt;# tar xzf redis-2.6.7.tar.gz&lt;/span&gt;
&lt;span class="c"&gt;# cd redis-2.6.7&lt;/span&gt;
&lt;span class="c"&gt;# make&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;安装完成后，启动Redis&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c"&gt;#/usr/local/src/redis-2.6.7/src/redis-server&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;也可以将Redis加入开机自启动&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c"&gt;#vi /etc/rc.d/rc.local&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;加入&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;src&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;redis&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;2.6.7&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;src&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;redis&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;server&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;2、使用 Predis 作为 Redis 的 PHP 客户端&lt;/h2&gt;
&lt;p&gt;你需要一个客户端开发包以便 PHP 可以连接到 Redis 服务上。这里我们推荐 [Predis(https://github.com/nrk/predis/)，上传 &lt;a href="http://uploads.staticjw.com/ji/jim/predis.php"&gt;predis.php&lt;/a&gt; 到 WordPress 的根目录。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;注意：Predis需要PHP的版本&amp;gt;5.3。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;问题：在系统的PHP版本升级到5.3.X以上时，会出现WordPress的主题不能显示和编辑的情况，这主要是由于PHP中禁用了部分存在危险的PHP函数，与上述情况相关的函数是scandir&lt;/p&gt;
&lt;p&gt;解决方案：&lt;/p&gt;
&lt;p&gt;1、编辑PHP配置文件：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;vi&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;php&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;php&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ini&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;寻找disable_functions字符串，将后面的scandir删除&lt;/p&gt;
&lt;p&gt;2、重启PHP生效&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;init&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;php&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;fpm&lt;/span&gt; &lt;span class="n"&gt;restart&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;3、前端缓存的 PHP 脚本&lt;/h3&gt;
&lt;p&gt;1.在 WordPress的根目录创建新文件 index-with-redis.php，&lt;a href="https://gist.github.com/3053250"&gt;下载地址&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;2.修改文件中的变量进行自定义&lt;/p&gt;
&lt;p&gt;3.如果使用Apache，需在 .htaccess 中将所有出现 index.php 的地方改为 index-with-redis.php ；如果使用的是 Nginx，则将WordPress中的index.php重命名，并将index-with-redis.php 重命名为index.php。需要注意的是在每次升级后需要重新进行上述操作。&lt;/p&gt;
&lt;p&gt;同时，需要在 Nginx 配置文件中单独对 /wp-admin/ 指定一下 index.php 文件. 类似如下:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;location&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;wp&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;admin&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;index&lt;/span&gt;  &lt;span class="n"&gt;index&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;php&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;参考文献：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="http://dbanotes.net/sitelog/movable-type-2-wordpress.html"&gt;http://dbanotes.net/sitelog/movable-type-2-wordpress.html&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="http://www.jimwestergren.com/wordpress-with-redis-as-a-frontend-cache/"&gt;How to load WordPress in a few milliseconds using Redis&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="http://timyang.net/data/redis-misunderstanding/"&gt;Redis几个认识误区&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;</summary><category term="use-Redis-to-Accelerate-WordPress"></category></entry><entry><title>Linux（CentOS）挂载硬盘</title><link href="http://loosky.com/Technology/2012/12/02/Linux-mount-harddisk.html" rel="alternate"></link><updated>2012-12-02T00:00:00+08:00</updated><author><name>Loosky</name></author><id>tag:loosky.com,2012-12-02:Technology/2012/12/02/Linux-mount-harddisk.html</id><summary type="html">&lt;p&gt;在虚拟机中经常会碰到系统分区空间不够的问题，比如对于各种Web系统，我们可以通过挂载一个新的分区，把Web系统的目录迁移到新的分区中以扩展其空间，本文假定Web根目录位于/usr/local/webapps。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;在进行下面的操作之前，切记先把web服务停掉：/usr/local/tomcat/bin/shutdown.sh&lt;br /&gt;
操作完成后，再开启web服务： /usr/local/tomcat/bin/startup.sh&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;在虚拟机中新建磁盘后，需要对其进行格式化并挂载到操作系统中，具体步骤如下：&lt;/p&gt;
&lt;h3&gt;第一步：列出所有磁盘&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;ll&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;disk&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;by&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="centos-mount" src="http://loosky.net/Upload/2012/11/centos-mount1.jpg" /&gt;&lt;/p&gt;
&lt;p&gt;要进行分区就必须针对每一个硬件设备进行操作，这就有可能是一块IDE硬盘或是一块SCSI硬盘。对于每一个硬盘（IDE或SCSI）设备，Linux分配了一个1到16的序列号码，这就代表了这块硬盘上面的分区号码。例如，第一个IDE硬盘的第一个分区，在Linux下面映射的就是hda1，第二个分区就称作是hda2。对于SCSI硬盘则是sda1、sdb1等。  &lt;/p&gt;
&lt;p&gt;如果无法确认数据盘设备名称，请使用df命令来确认系统盘的名称，从而排除挂错盘的情况。&lt;/p&gt;
&lt;h3&gt;第二步：格式化硬盘&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;fdisk&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;sdb&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="centos-mount" src="http://loosky.net/Upload/2012/11/centos-mount2.jpg" /&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;em&gt;注意：图中箭头标注处续手动键入&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;h3&gt;第三步：创建分区&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;mkfs&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ext4&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;sdb1&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="centos-mount" src="http://loosky.net/Upload/2012/11/centos-mount3.jpg" /&gt;&lt;/p&gt;
&lt;h3&gt;第四步：将/usr/local/webapps目录重命名为/usr/local/webapps2&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;mv&lt;/span&gt;&lt;span class="err"&gt; &lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;webapps&lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;webapps2&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;第五步：挂载分区&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;mkdir&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;webapps&lt;/span&gt;
&lt;span class="n"&gt;mount&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;sdb1&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;webapps&lt;/span&gt; &lt;span class="err"&gt;  #&lt;/span&gt; &lt;span class="err"&gt;将&lt;/span&gt;&lt;span class="n"&gt;sdb&lt;/span&gt;&lt;span class="err"&gt;这个硬盘挂载成为&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;webapps&lt;/span&gt;
&lt;span class="n"&gt;cp&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;rf&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;webapps2&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;webapps&lt;/span&gt;  &lt;span class="err"&gt;#并将&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;webapps2&lt;/span&gt; &lt;span class="err"&gt;目录下的内容复制到&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;webapps&lt;/span&gt;&lt;span class="err"&gt;目录下。&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;第六步：将信息写入fstab,让系统开启自动挂载。&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;echo&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;/dev/sdb1               /usr/local/webapps                   ext4    defaults        0 0&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;fstab&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;参考：&lt;a href="http://sudu.cn/service/detail.php?id=11831"&gt;http://sudu.cn/service/detail.php?id=11831&lt;/a&gt;&lt;/p&gt;</summary><category term="CentOS"></category><category term="Linux"></category><category term="分区"></category><category term="挂载"></category></entry><entry><title>硬盘类型介绍</title><link href="http://loosky.com/Technology/2012/12/02/harddisk.html" rel="alternate"></link><updated>2012-12-02T00:00:00+08:00</updated><author><name>Loosky</name></author><id>tag:loosky.com,2012-12-02:Technology/2012/12/02/harddisk.html</id><summary type="html">&lt;blockquote&gt;
&lt;p&gt;本文内容有些旧，但基本概念在。摘自：&lt;a href="http://blog.csdn.net/tianlesoftware/article/details/6009110"&gt;http://blog.csdn.net/tianlesoftware/article/details/6009110&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;目前所能见到的硬盘接口类型主要有IDE、SATA、SCSI、SAS、FC等等。IDE是俗称的并口，SATA是俗称的串口，这两种硬盘是个人电脑和低端服务器常见的硬盘。SCSI是"小型计算机系统专用接口"的简称，SCSI硬盘就是采用这种接口的硬盘。SAS就是串口的SCSI接口。一般服务器硬盘采用这两类接口，其性能比上述两种硬盘要高，稳定性更强，但是价格高，容量小，噪音大。FC是光纤通道，和SCIS接口一样光纤通道最初也不是为硬盘设计开发的接口技术，是专门为网络系统设计的，但随着存储系统对速度的需求，才逐渐应用到硬盘系统中。SSD也称作电子硬盘或者固态电子盘，是由控制单元和固态存储单元（DRAM或FLASH芯片）组成的硬盘。固态硬盘的接口规范和定义、功能及使用方法上与普通硬盘的相同，在产品外形和尺寸上也与普通硬盘一致。新一代的固态硬盘普遍采用SATA-2接口，但其成本较高。&lt;/p&gt;
&lt;h3&gt;一. IDE&lt;/h3&gt;
&lt;p&gt;IDE（Integrated Drive Electronics集成驱动器电子）的缩写，它的本意是指把控制器与盘体集成在一起的硬盘驱动器，是一种硬盘的传输接口，它有另一个名称叫做ATA（Advanced Technology Attachment），这两个名词都有厂商在用，指的是相同的东西。
IDE的规格后来有所进步，而推出了EIDE（Enhanced IDE）的规格名称，而这个规格同时又被称为Fast ATA。所不同的是Fast ATA是专指硬盘接口，而EIDE还制定了连接光盘等非硬盘产品的标准。而这个连接非硬盘类的IDE标准，又称为ATAPI接口。而之后再推出更快的接口，名称都只剩下ATA的字样，像是Ultra ATA、ATA/66、ATA/100等。&lt;/p&gt;
&lt;p&gt;早期的IDE接口有两种传输模式，一个是PIO（Programming I/O）模式，另一个是DMA（Direct Memory Access）。虽然DMA模式系统资源占用少，但需要额外的驱动程序或设置，因此被接受的程度比较低。后来在对速度要求愈来愈高的情况下，DMA模式由于执行效率较好，操作系统开始直接支持，而且厂商更推出了愈来愈快的DMA模式传输速度标准。而从英特尔的430TX芯片组开始，就提供了对Ultra DMA 33的支持，提供了最大33MB/sec的的数据传输率，以后又很快发展到了ATA 66，ATA 100以及迈拓提出的ATA 133标准，分别提供66MB/sec，100MB/sec以及133MB/sec的最大数据传输率。值得注意的是，迈拓提出的ATA 133标准并没能获得业界的广泛支持，硬盘厂商中只有迈拓自己才采用ATA 133标准，而日立（IBM），希捷和西部数据则都采用ATA 100标准，芯片组厂商中也只有VIA，SIS，ALi以及nViidia对次标准提供支持，芯片组厂商中英特尔则只支持ATA 100标准。&lt;/p&gt;
&lt;p&gt;各种IDE标准都能很好的向下兼容，例如ATA 133兼容ATA 66/100和Ultra DMA33，而ATA 100也兼容Ultra DMA 33/66。要特别注意的是，对ATA 66以及以上的IDE接口传输标准而言，必须使用专门的80芯IDE排线，其与普通的40芯IDE排线相比，增加了40条地线以提高信号的稳定性。&lt;/p&gt;
&lt;h3&gt;二. SATA&lt;/h3&gt;
&lt;p&gt;使用SATA（Serial ATA）口的硬盘又叫串口硬盘。2001年，由Intel、APT、Dell、IBM、希捷、迈拓这几大厂商组成的Serial ATA委员会正式确立了Serial ATA 1.0规范。&lt;/p&gt;
&lt;p&gt;2002年，虽然串行ATA的相关设备还未正式上市，但Serial ATA委员会已抢先确立了Serial ATA 2.0规范（SATA II）。Serial ATA采用串行连接方式，串行ATA总线使用嵌入式时钟信号，具备了更强的纠错能力，与以往相比其最大的区别在于能对传输指令（不仅仅是数据）进行检查，如果发现错误会自动矫正，这在很大程度上提高了数据传输的可靠性。串行接口还具有结构简单、支持热插拔的优点。&lt;/p&gt;
&lt;p&gt;串口硬盘是一种完全不同于并行ATA的新型硬盘接口类型，由于采用串行方式传输数据而知名。相对于并行ATA来说，就具有非常多的优势。&lt;/p&gt;
&lt;p&gt;a). Serial ATA以连续串行的方式传送数据，一次只会传送1位数据。这样能减少SATA接口的针脚数目，使连接电缆数目变少，效率也会更高。&lt;/p&gt;
&lt;p&gt;b). 实际上，Serial ATA 仅用四支针脚就能完成所有的工作，分别用于连接电缆、连接地线、发送数据和接收数据，同时这样的架构还能降低系统能耗和减小系统复杂性。&lt;/p&gt;
&lt;p&gt;c). Serial ATA的起点更高、发展潜力更大，Serial ATA 1.0定义的数据传输率可达150MB/s；这比最快的并行ATA（即ATA/133）所能达到133MB/s的最高数据传输率还高；而在Serial ATA 2.0的数据传输率达到300MB/s；最终SATA将实现600MB/s的最高数据传输率。&lt;/p&gt;
&lt;p&gt;在选购主板时，其实并无必要太在意IDE接口传输标准有多快，其实在ATA 100，ATA 133以及SATA 150下硬盘性能都差不多，因为受限于硬盘的机械结构和数据存取方式，硬盘的性能瓶颈是硬盘的内部数据传输率而非外部接口标准，目前主流硬盘的内部数据传输率离ATA 100的100MB/sec都还差得很远。所以要按照自己的具体需求选购。&lt;/p&gt;
&lt;h3&gt;三. SATA II&lt;/h3&gt;
&lt;p&gt;SATA的速度是每秒1.5Gbps(150MB/sec)，SATA2（Serial ATA 2.0规范）的速度是每秒3Gbps(300MB/sec)。SATAⅡ接口主板能插SATA硬盘，SATA接口主板不能插SATAⅡ盘硬，这都是向下兼容的。&lt;/p&gt;
&lt;p&gt;SATA II是在SATA的基础上发展起来的，其主要特征是外部传输率从SATA的1.5G进一步提高到了3G，此外还包括NCQ（Native Command Queuing，原生命令队列）、端口多路器（Port Multiplier）、交错启动（Staggered Spin-up）等一系列的技术特征。单纯的外部传输率达到3Gbps并不是真正的SATA II。&lt;/p&gt;
&lt;p&gt;SATA II的关键技术就是3Gbps的外部传输率和NCQ技术。 NCQ技术可以对硬盘的指令执行顺序进行优化，避免像传统硬盘那样机械地按照接收指令的先后顺序移动磁头读写硬盘的不同位置，与此相反，它会在接收命令后对其进行排序，排序后的磁头将以高效率的顺序进行寻址，从而避免磁头反复移动带来的损耗，延长硬盘寿命。&lt;/p&gt;
&lt;p&gt;另外并非所有的SATA硬盘都可以使用NCQ技术，除了硬盘本身要支持 NCQ之外，也要求主板芯片组的SATA控制器支持NCQ。此外，NCQ技术不支持FAT文件系统，只支持NTFS文件系统。&lt;/p&gt;
&lt;p&gt;由于SATA设备市场比较混乱，不少SATA设备提供商在市场宣传中滥用“SATA II”的现象愈演愈烈，例如某些号称“SATA II”的硬盘却仅支持3Gbps而不支持NCQ，而某些只具有1.5Gbps的硬盘却又支持NCQ。所以，由希捷(Seagate)所主导的SATA-IO(Serial ATA International Organization，SATA国际组织，原SATA工作组)又宣布了SATA 2.5规范，收录了原先SATA II所具有的大部分功能——从3Gbps和NCQ到交错启动(Staggered Spin-up)、热插拔(Hot Plug)、端口多路器(Port Multiplier)以及比较新的eSATA(External SATA，外置式SATA接口)等等。&lt;/p&gt;
&lt;p&gt;值得注意的是，部分采用较早的仅支持1.5Gbps的南桥芯片(例如VIA VT8237和NVIDIA nForce2 MCP-R/MCP-Gb)的主板在使用SATA II硬盘时，可能会出现找不到硬盘或蓝屏的情况。不过大部分硬盘厂商都在硬盘上设置了一个速度选择跳线，以便强制选择1.5Gbps或3Gbps的工作模式(少数硬盘厂商则是通过相应的工具软件来设置)，只要把硬盘强制设置为1.5Gbps，SATA II硬盘照样可以在老主板上正常使用。&lt;/p&gt;
&lt;p&gt;SATA硬盘在设置RAID模式时，一般都需要安装主板芯片组厂商所提供的驱动，但也有少数较老的SATA RAID控制器在打了最新补丁的某些版本的Windows XP系统里不需要加载驱动就可以组建RAID。&lt;/p&gt;
&lt;h3&gt;四. SCSI&lt;/h3&gt;
&lt;p&gt;SCSI的英文全称为“Small Computer System Interface”（小型计算机系统接口），是同IDE（ATA）完全不同的接口，IDE接口是普通PC的标准接口，而SCSI并不是专门为硬盘设计的接口，是一种广泛应用于小型机上的高速数据传输技术。SCSI接口具有应用范围广、多任务、带宽大、CPU占用率低，以及热插拔等优点，但较高的价格使得它很难如IDE硬盘般普及，因此SCSI硬盘主要应用于中、高端服务器和高档工作站中。&lt;/p&gt;
&lt;h3&gt;五. SAS&lt;/h3&gt;
&lt;p&gt;SAS(Serial Attached SCSI)即串行连接SCSI，是新一代的SCSI技术。和现在流行的Serial ATA(SATA)硬盘相同，都是采用串行技术以获得更高的传输速度，并通过缩短连结线改善内部空间等。SAS是并行SCSI接口之后开发出的全新接口。此接口的设计是为了改善存储系统的效能、可用性和扩充性，并且提供与SATA硬盘的兼容性。&lt;/p&gt;
&lt;p&gt;SAS的接口技术可以向下兼容SATA。具体来说，二者的兼容性主要体现在物理层和协议层的兼容。&lt;/p&gt;
&lt;p&gt;a). 在物理层，SAS接口和SATA接口完全兼容，SATA硬盘可以直接使用在SAS的环境中，从接口标准上而言，SATA是SAS的一个子标准，因此SAS控制器可以直接操控SATA硬盘，但是SAS却不能直接使用在SATA的环境中，因为SATA控制器并不能对SAS硬盘进行控制；&lt;/p&gt;
&lt;p&gt;b). 在协议层，SAS由3种类型协议组成，根据连接的不同设备使用相应的协议进行数据传输。其中串行SCSI协议(SSP)用于传输SCSI命令；SCSI管理协议(SMP)用于对连接设备的维护和管理；SATA通道协议(STP)用于SAS和SATA之间数据的传输。因此在这3种协议的配合下，SAS可以和SATA以及部分SCSI设备无缝结合。&lt;/p&gt;
&lt;p&gt;SAS系统的背板(Backplane)既可以连接具有双端口、高性能的SAS驱动器，也可以连接高容量、低成本的SATA驱动器。所以SAS驱动器和SATA驱动器可以同时存在于一个存储系统之中。但需要注意的是，SATA系统并不兼容SAS，所以SAS驱动器不能连接到SATA背板上。由于SAS系统的兼容性，使用户能够运用不同接口的硬盘来满足各类应用在容量上或效能上的需求，因此在扩充存储系统时拥有更多的弹性，让存储设备发挥最大的投资效益。&lt;/p&gt;
&lt;p&gt;在系统中，每一个SAS端口可以最多可以连接16256个外部设备，并且SAS采取直接的点到点的串行传输方式，传输的速率高达3Gbps，估计以后会有6Gbps乃至12Gbps的高速接口出现。
SAS的接口也做了较大的改进，它同时提供了3.5英寸和2.5英寸的接口，因此能够适合不同服务器环境的需求。&lt;/p&gt;
&lt;p&gt;SAS依靠SAS扩展器来连接更多的设备，目前的扩展器以12端口居多，不过根据板卡厂商产品研发计划显示，未来会有28、36端口的扩展器引入，来连接SAS设备、主机设备或者其他的SAS扩展器。&lt;/p&gt;
&lt;p&gt;和传统并行SCSI接口比较起来，SAS不仅在接口速度上得到显著提升(现在主流Ultra 320 SCSI速度为320MB/sec，而SAS才刚起步速度就达到300MB/sec，未来会达到600MB/sec甚至更多)，而且由于采用了串行线缆，不仅可以实现更长的连接距离，还能够提高抗干扰能力，并且这种细细的线缆还可以显著改善机箱内部的散热情况。&lt;/p&gt;
&lt;p&gt;SAS目前的不足主要有以下方面：&lt;/p&gt;
&lt;p&gt;a). 硬盘、控制芯片种类少：&lt;/p&gt;
&lt;p&gt;只有希捷、迈拓以及富士通等为数不多的硬盘厂商推出了SAS接口硬盘，品种太少，其他厂商的SAS硬盘多数处在产品内部测试阶段。此外周边的SAS控制器芯片或者一些SAS转接卡的种类更是不多，多数集中在LSI以及Adaptec公司手中。&lt;/p&gt;
&lt;p&gt;b). 硬盘价格太贵：&lt;/p&gt;
&lt;p&gt;比起同容量的Ultra 320 SCSI硬盘，SAS硬盘要贵了一倍还多。一直居高不下的价格直接影响了用户的采购数量和渠道的消化数量，而无法形成大批量生产的SAS 硬盘，其成本的压力又会反过来促使价格无法下降。&lt;/p&gt;
&lt;p&gt;如果用户想要做个简单的RAID级别，那么不仅需要购买多块SAS硬盘，还要购买昂贵的RAID卡，价格基本上和硬盘相当。&lt;/p&gt;
&lt;p&gt;c). 实际传输速度变化不大：&lt;/p&gt;
&lt;p&gt;SAS硬盘的接口速度并不代表数据传输速度，受到硬盘机械结构限制，现在SAS硬盘的机械结构和SCSI硬盘几乎一样。目前数据传输的瓶颈集中在由硬盘内部机械机构、硬盘存储技术、磁盘转速，所决定的硬盘内部数据传输速度，也就是80MBsec左右，SAS硬盘的性能提升不明显。&lt;/p&gt;
&lt;p&gt;d). 用户追求成熟、稳定的产品：&lt;/p&gt;
&lt;p&gt;从现在已经推出的产品来看，SAS硬盘更多的被应用在高端4路服务器上，而4路以上服务器用户并非一味追求高速度的硬盘接口技术，最吸引他们的应该是成熟、稳定的硬件产品，虽然SAS接口服务器和SCSI接口产品在速度、稳定性上差不多，但目前的技术和产品都还不够成熟。&lt;/p&gt;
&lt;p&gt;不过随着英特尔等主板芯片组制造商、希捷等硬盘制造商以及众多的服务器制造商的大力推动，SAS的相关产品技术会逐步成熟，价格也会逐步滑落，早晚都会成为服务器硬盘的主流接口。&lt;/p&gt;
&lt;h3&gt;六. FC&lt;/h3&gt;
&lt;p&gt;光纤通道的英文拼写是Fiber Channel，和SCIS接口一样光纤通道最初也不是为硬盘设计开发的接口技术，是专门为网络系统设计的，但随着存储系统对速度的需求，才逐渐应用到硬盘系统中。光纤通道硬盘是为提高多硬盘存储系统的速度和灵活性才开发的，它的出现大大提高了多硬盘系统的通信速度。光纤通道的主要特性有：热插拔性、高速带宽、远程连接、连接设备数量大等。&lt;/p&gt;
&lt;p&gt;光纤通道是为在像服务器这样的多硬盘系统环境而设计，能满足高端工作站、服务器、海量存储子网络、外设间通过集线器、交换机和点对点连接进行双向、串行数据通讯等系统对高数据传输率的要求。&lt;/p&gt;
&lt;h3&gt;七. SSD&lt;/h3&gt;
&lt;p&gt;固态硬盘（Solid State Disk或Solid State Drive），也称作电子硬盘或者固态电子盘，是由控制单元和固态存储单元（DRAM或FLASH芯片）组成的硬盘。固态硬盘的接口规范和定义、功能及使用方法上与普通硬盘的相同，在产品外形和尺寸上也与普通硬盘一致。由于固态硬盘没有普通硬盘的旋转介质，因而抗震性极佳。其芯片的工作温度范围很宽（-40~85℃）。目前广泛应用于军事、车载、工控、视频监控、网络监控、网络终端、电力、医疗、航空等、导航设备等领域。目前由于成本较高，正在逐渐普及到DIY市场。&lt;/p&gt;
&lt;p&gt;由于固态硬盘技术与传统硬盘技术不同，所以产生了不少新兴的存储器厂商。厂商只需购买NAND存储器，再配合适当的控制芯片，就可以制造固态硬盘了。新一代的固态硬盘普遍采用SATA-2接口。
固态硬盘的存储介质分为两种，一种是采用闪存（FLASH芯片）作为存储介质，另外一种是采用DRAM作为存储介质。&lt;/p&gt;
&lt;p&gt;（1）基于闪存的固态硬盘（IDE FLASH DISK、Serial ATA Flash Disk）：
采用FLASH芯片作为存储介质，这也是我们通常所说的SSD。它的外观可以被制作成多种模样，例如：笔记本硬盘、微硬盘、存储卡、优盘等样式。这种SSD固态硬盘最大的优点就是可以移动，而且数据保护不受电源控制，能适应于各种环境，但是使用年限不高，适合于个人用户使用。&lt;/p&gt;
&lt;p&gt;在基于闪存的固态硬盘中，存储单元又分为两类：SLC（Single Layer Cell 单层单元）和MLC（Multi-Level Cell多层单元）。&lt;/p&gt;
&lt;p&gt;SLC的特点是成本高、容量小、但是速度快，而MLC的特点是容量大成本低，但是速度慢。MLC的每个单元是2bit的，相对SLC来说整整多了一倍。不过，由于每个MLC存储单元中存放的资料较多，结构相对复杂，出错的几率会增加，必须进行错误修正，这个动作导致其性能大幅落后于结构简单的SLC闪存。此外，SLC闪存的优点是复写次数高达100000次，比MLC闪存高10倍。此外，为了保证MLC的寿命，控制芯片都校验和智能磨损平衡技术算法，使得每个存储单元的写入次数可以平均分摊，达到100万小时故障间隔时间(MTBF)。&lt;/p&gt;
&lt;p&gt;（2）基于DRAM的固态硬盘：&lt;/p&gt;
&lt;p&gt;采用DRAM作为存储介质，目前应用范围较窄。它仿效传统硬盘的设计、可被绝大部分操作系统的文件系统工具进行卷设置和管理，并提供工业标准的PCI和FC接口用于连接主机或者服务器。应用方式可分为SSD硬盘和SSD硬盘阵列两种。它是一种高性能的存储器，而且使用寿命很长，美中不足的是需要独立电源来保护数据安全。&lt;/p&gt;
&lt;p&gt;摘自：&lt;a href="http://blog.csdn.net/tianlesoftware/article/details/6009110"&gt;http://blog.csdn.net/tianlesoftware/article/details/6009110&lt;/a&gt;&lt;/p&gt;</summary><category term=""></category></entry><entry><title>WMN方面的开源项目</title><link href="http://loosky.com/Research/2012/12/02/wmn-opensource-project.html" rel="alternate"></link><updated>2012-12-02T00:00:00+08:00</updated><author><name>Loosky</name></author><id>tag:loosky.com,2012-12-02:Research/2012/12/02/wmn-opensource-project.html</id><summary type="html">&lt;p&gt;无线Mesh网络（WMN）方面的研究比较多，也有一些相关的开源项目，目前我有关注的如下：&lt;/p&gt;
&lt;h3&gt;开发环境：&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;OpenWRT（&lt;a href="http://openwrt.org/"&gt;http://openwrt.org/&lt;/a&gt;），这个不是针对WMN的，但是很多项目都是基于OpenWRT进行开发的。做网络方面的嵌入式开发，基本上都可以使用这个开发环境。&lt;/li&gt;
&lt;li&gt;ROBIN（&lt;a href="http://robin.forumup.it"&gt;http://robin.forumup.it&lt;/a&gt;）：基于OpenWRT的WMN解决方案，目前已经可以支持802.11n（ROBIN V2），但是方案不太完美。
ROBIN Mesh：&lt;a href="http://www.robin-mesh.net/"&gt;http://www.robin-mesh.net/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Meraki（&lt;a href="http://meraki.com/"&gt;http://meraki.com/&lt;/a&gt;）&lt;/li&gt;
&lt;li&gt;Gargoyle：&lt;a href="http://www.gargoyle-router.com/"&gt;http://www.gargoyle-router.com/&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;路由协议：&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;OLSRD：&lt;a href="http://www.olsr.org/"&gt;http://www.olsr.org/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;BATMAN：&lt;a href="http://www.open-mesh.org/"&gt;http://www.open-mesh.org/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;BATMAN adv（基于二层）：&lt;a href="http://www.open-mesh.org/wiki/batman-adv/Wiki"&gt;http://www.open-mesh.org/wiki/batman-adv/Wiki&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;Dashboard：&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Open-Mesh：&lt;a href="http://dashboard.open-mesh.com"&gt;http://dashboard.open-mesh.com&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Meraki：&lt;a href="http://dashboard.meraki.com/"&gt;http://dashboard.meraki.com/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Meshconnect：&lt;a href="http://wifimesh.trigmax.com/en/"&gt;http://wifimesh.trigmax.com/en/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;OrangeMesh:&lt;a href="http://orangemesh.sourceforge.net/"&gt;http://orangemesh.sourceforge.net/&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;</summary><category term="MESH"></category><category term="OpenWRT"></category><category term="ROBIN"></category><category term="WMN"></category></entry><entry><title>CentOS配置</title><link href="http://loosky.com/Technology/2012/12/01/CentOS-Configuration.html" rel="alternate"></link><updated>2012-12-01T00:00:00+08:00</updated><author><name>Loosky</name></author><id>tag:loosky.com,2012-12-01:Technology/2012/12/01/CentOS-Configuration.html</id><summary type="html">&lt;p&gt;推荐使用工具：SSH Secure Shell Client（SSH连接，命令行利器）、SSH Secure File Transfer Client（传文件）、VNCViewer（远程桌面连接，服务器上得安装VNCServer）&lt;/p&gt;
&lt;h3&gt;1、配置IP地址： vi /etc/sysconfig/network-scripts/ifcfg-eth0&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;    &lt;span class="n"&gt;DEVICE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;eth0&amp;quot;&lt;/span&gt;
    &lt;span class="n"&gt;NM_CONTROLLED&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;yes&amp;quot;&lt;/span&gt;
    &lt;span class="n"&gt;ONBOOT&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;yes&lt;/span&gt;
    &lt;span class="n"&gt;TYPE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;Ethernet&lt;/span&gt;
    &lt;span class="n"&gt;BOOTPROTO&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;none&lt;/span&gt;
    &lt;span class="n"&gt;IPADDR&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;XXX&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;XXX&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;XXX&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;XXX&lt;/span&gt;
    &lt;span class="n"&gt;PREFIX&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;24&lt;/span&gt;
    &lt;span class="n"&gt;GATEWAY&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;XXX&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;XXX&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;XXX&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;XXX&lt;/span&gt;
    &lt;span class="n"&gt;DNS1&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mf"&gt;59.77.139.1&lt;/span&gt;
    &lt;span class="n"&gt;DNS2&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mf"&gt;218.85.157.99&lt;/span&gt;
    &lt;span class="n"&gt;DEFROUTE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;yes&lt;/span&gt;
    &lt;span class="n"&gt;IPV4_FAILURE_FATAL&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;yes&lt;/span&gt;
    &lt;span class="n"&gt;IPV6INIT&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;no&lt;/span&gt;
    &lt;span class="n"&gt;NAME&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;System eth0&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;2、配置DNS： vi /etc/resolv.conf&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;    &lt;span class="n"&gt;nameserver&lt;/span&gt; &lt;span class="mf"&gt;59.77.139.1&lt;/span&gt;
    &lt;span class="n"&gt;search&lt;/span&gt; &lt;span class="n"&gt;localdomain&lt;/span&gt;

&lt;span class="err"&gt;配置好以后重启服务：&lt;/span&gt;

    &lt;span class="n"&gt;service&lt;/span&gt; &lt;span class="n"&gt;network&lt;/span&gt; &lt;span class="n"&gt;restart&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;3、解决中文乱码：vi /etc/sysconfig/i18n ：&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;    &lt;span class="n"&gt;LANG&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;zh_CN.GB18030&amp;quot;&lt;/span&gt;
    &lt;span class="n"&gt;LANGUAGE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;zh_CN.GB18030:zh_CN.GB2312:zh_CN&amp;quot;&lt;/span&gt;
    &lt;span class="n"&gt;SUPPORTED&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;zh_CN.GB18030:zh_CN:zh:en_US.UTF-8:en_US:en&amp;quot;&lt;/span&gt;
    &lt;span class="n"&gt;SYSFONT&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;lat0-sun16&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;4、修改启动级别，默认为图形启动，改为字符界面： vi /etc/inittab&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;    &lt;span class="nl"&gt;id:&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;initdefault&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;  &lt;span class="err"&gt;改为&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;initdefault&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;5、VNCServer启动&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;VNCServer&lt;/span&gt;&lt;span class="err"&gt;是一个远程连接工具，相当于&lt;/span&gt;&lt;span class="n"&gt;Windows&lt;/span&gt;&lt;span class="err"&gt;下面的远程桌面，很不错，推荐使用。试过很多方法，好像都不能自启动，只好开机后手动启动一下。在自己的电脑上可以使用&lt;/span&gt;&lt;span class="n"&gt;VNCViewer&lt;/span&gt;&lt;span class="err"&gt;进行连接。&lt;/span&gt;

&lt;span class="err"&gt;手动启动&lt;/span&gt;&lt;span class="n"&gt;VNCServer&lt;/span&gt;&lt;span class="err"&gt;：&lt;/span&gt;
    &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;bin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;vncserver&lt;/span&gt;
    &lt;span class="err"&gt;或者：&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;init&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;vncserver&lt;/span&gt; &lt;span class="n"&gt;start&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;6、开启防火墙，允许SSH和VNCServer的端口（5801和5901）：vi /etc/sysconfig/iptables&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;    &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="n"&gt;Firewall&lt;/span&gt; &lt;span class="n"&gt;configuration&lt;/span&gt; &lt;span class="n"&gt;written&lt;/span&gt; &lt;span class="n"&gt;by&lt;/span&gt; &lt;span class="n"&gt;system&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;config&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;securitylevel&lt;/span&gt;
    &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="n"&gt;Manual&lt;/span&gt; &lt;span class="n"&gt;customization&lt;/span&gt; &lt;span class="n"&gt;of&lt;/span&gt; &lt;span class="n"&gt;this&lt;/span&gt; &lt;span class="n"&gt;file&lt;/span&gt; &lt;span class="n"&gt;is&lt;/span&gt; &lt;span class="n"&gt;not&lt;/span&gt; &lt;span class="n"&gt;recommended&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;
    &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;filter&lt;/span&gt;
    &lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;INPUT&lt;/span&gt; &lt;span class="n"&gt;ACCEPT&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;FORWARD&lt;/span&gt; &lt;span class="n"&gt;ACCEPT&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;OUTPUT&lt;/span&gt; &lt;span class="n"&gt;ACCEPT&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;RH&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Firewall&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;INPUT&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;INPUT&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt; &lt;span class="n"&gt;RH&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Firewall&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;INPUT&lt;/span&gt;
    &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;FORWARD&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt; &lt;span class="n"&gt;RH&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Firewall&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;INPUT&lt;/span&gt;
    &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;RH&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Firewall&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;INPUT&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="n"&gt;lo&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt; &lt;span class="n"&gt;ACCEPT&lt;/span&gt;
    &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;RH&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Firewall&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;INPUT&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="n"&gt;icmp&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;icmp&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;type&lt;/span&gt; &lt;span class="n"&gt;any&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt; &lt;span class="n"&gt;ACCEPT&lt;/span&gt;
    &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;RH&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Firewall&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;INPUT&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="mi"&gt;50&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt; &lt;span class="n"&gt;ACCEPT&lt;/span&gt;
    &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;RH&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Firewall&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;INPUT&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="mi"&gt;51&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt; &lt;span class="n"&gt;ACCEPT&lt;/span&gt;
    &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;RH&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Firewall&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;INPUT&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="n"&gt;udp&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;dport&lt;/span&gt; &lt;span class="mi"&gt;5353&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="mf"&gt;224.0.0.251&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt; &lt;span class="n"&gt;ACCEPT&lt;/span&gt;
    &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;RH&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Firewall&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;INPUT&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="n"&gt;udp&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt; &lt;span class="n"&gt;udp&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;dport&lt;/span&gt; &lt;span class="mi"&gt;631&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt; &lt;span class="n"&gt;ACCEPT&lt;/span&gt;
    &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;RH&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Firewall&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;INPUT&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="n"&gt;tcp&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt; &lt;span class="n"&gt;tcp&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;dport&lt;/span&gt; &lt;span class="mi"&gt;631&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt; &lt;span class="n"&gt;ACCEPT&lt;/span&gt;
    &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;RH&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Firewall&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;INPUT&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt; &lt;span class="n"&gt;state&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;state&lt;/span&gt; &lt;span class="n"&gt;ESTABLISHED&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;RELATED&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt; &lt;span class="n"&gt;ACCEPT&lt;/span&gt;
    &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;RH&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Firewall&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;INPUT&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt; &lt;span class="n"&gt;state&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;state&lt;/span&gt; &lt;span class="n"&gt;NEW&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt; &lt;span class="n"&gt;tcp&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="n"&gt;tcp&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;dport&lt;/span&gt; &lt;span class="mi"&gt;22&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt; &lt;span class="n"&gt;ACCEPT&lt;/span&gt;
    &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;RH&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Firewall&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;INPUT&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt; &lt;span class="n"&gt;state&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;state&lt;/span&gt; &lt;span class="n"&gt;NEW&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt; &lt;span class="n"&gt;tcp&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="n"&gt;tcp&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;dport&lt;/span&gt; &lt;span class="mi"&gt;5801&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt; &lt;span class="n"&gt;ACCEPT&lt;/span&gt;
    &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;RH&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Firewall&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;INPUT&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt; &lt;span class="n"&gt;state&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;state&lt;/span&gt; &lt;span class="n"&gt;NEW&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt; &lt;span class="n"&gt;tcp&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="n"&gt;tcp&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;dport&lt;/span&gt; &lt;span class="mi"&gt;5901&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt; &lt;span class="n"&gt;ACCEPT&lt;/span&gt;
    &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;RH&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Firewall&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;INPUT&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt; &lt;span class="n"&gt;REJECT&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;reject&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;with&lt;/span&gt; &lt;span class="n"&gt;icmp&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;host&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;prohibited&lt;/span&gt;
    &lt;span class="n"&gt;COMMIT&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;7、对Vi的一些配置：&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;    &lt;span class="n"&gt;cp&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt; &lt;span class="o"&gt;~/&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;vimrc&lt;/span&gt;
    &lt;span class="n"&gt;vi&lt;/span&gt; &lt;span class="o"&gt;~/&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;vimrc&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;

&lt;span class="err"&gt;添加如下一些内容：&lt;/span&gt;

    &lt;span class="s"&gt;&amp;quot;显示行号&lt;/span&gt;
    &lt;span class="n"&gt;set&lt;/span&gt; &lt;span class="n"&gt;number&lt;/span&gt;

    &lt;span class="s"&gt;&amp;quot;记录历史的行数&lt;/span&gt;
    &lt;span class="n"&gt;set&lt;/span&gt; &lt;span class="n"&gt;history&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1000&lt;/span&gt;

    &lt;span class="s"&gt;&amp;quot;语法高亮度显示&lt;/span&gt;
    &lt;span class="n"&gt;syntax&lt;/span&gt; &lt;span class="n"&gt;on&lt;/span&gt;

    &lt;span class="s"&gt;&amp;quot;背景使用黑色&lt;/span&gt;
    &lt;span class="n"&gt;set&lt;/span&gt; &lt;span class="n"&gt;background&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;dark&lt;/span&gt;

    &lt;span class="s"&gt;&amp;quot;使用自动对齐，也就是把当前行的对起格式应用到下一行；&lt;/span&gt;
    &lt;span class="n"&gt;set&lt;/span&gt; &lt;span class="n"&gt;autoindent&lt;/span&gt;

    &lt;span class="s"&gt;&amp;quot;依据上面的对齐格式，智能的选择对齐方式，对于类似C语言编&lt;/span&gt;
    &lt;span class="n"&gt;set&lt;/span&gt; &lt;span class="n"&gt;smartindent&lt;/span&gt;

    &lt;span class="s"&gt;&amp;quot;设置匹配模式，类似当输入一个左括号时会匹配相应的那个右括号&lt;/span&gt;
    &lt;span class="n"&gt;set&lt;/span&gt; &lt;span class="n"&gt;showmatch&lt;/span&gt;

    &lt;span class="s"&gt;&amp;quot;第一行设置tab键为4个空格，第二行设置当行之间交错时使用4个空格&lt;/span&gt;
    &lt;span class="n"&gt;set&lt;/span&gt; &lt;span class="n"&gt;tabstop&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;
    &lt;span class="n"&gt;set&lt;/span&gt; &lt;span class="n"&gt;shiftwidth&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;

    &lt;span class="s"&gt;&amp;quot;在编辑过程中，在右下角显示光标位置的状态行&lt;/span&gt;
    &lt;span class="n"&gt;set&lt;/span&gt; &lt;span class="n"&gt;ruler&lt;/span&gt;
    &lt;span class="n"&gt;set&lt;/span&gt; &lt;span class="n"&gt;incsearch&lt;/span&gt;
    &lt;span class="s"&gt;&amp;quot;高亮当前行&lt;/span&gt;
    &lt;span class="n"&gt;set&lt;/span&gt; &lt;span class="n"&gt;cursorline&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;安全方面的一些设置：&lt;/h2&gt;
&lt;h3&gt;1、关闭一些不必要的服务。&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="err"&gt;以下仅列出需要启动的服务，未列出的服务可以关闭：&lt;/span&gt;

&lt;span class="cp"&gt;#setup&lt;/span&gt;
&lt;span class="n"&gt;acpid&lt;/span&gt;
&lt;span class="n"&gt;anacron&lt;/span&gt;
&lt;span class="n"&gt;cpuspeed&lt;/span&gt;
&lt;span class="n"&gt;crond&lt;/span&gt;
&lt;span class="n"&gt;irqbalance&lt;/span&gt; &lt;span class="err"&gt;\\仅当服务器&lt;/span&gt;&lt;span class="n"&gt;CPU&lt;/span&gt;&lt;span class="err"&gt;为&lt;/span&gt;&lt;span class="n"&gt;S&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;M&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;P&lt;/span&gt;&lt;span class="err"&gt;架构或支持双核心、&lt;/span&gt;&lt;span class="n"&gt;HT&lt;/span&gt;&lt;span class="err"&gt;技术时，才需开启，否则关闭。&lt;/span&gt;
&lt;span class="n"&gt;microcode_ctl&lt;/span&gt;
&lt;span class="n"&gt;network&lt;/span&gt;
&lt;span class="n"&gt;random&lt;/span&gt;
&lt;span class="n"&gt;sendmail&lt;/span&gt;
&lt;span class="n"&gt;sshd&lt;/span&gt;
&lt;span class="n"&gt;syslog&lt;/span&gt;
&lt;span class="n"&gt;yum&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;updatesd&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;2、查看系统用户：/etc/passwd：&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="err"&gt;删除系统臃肿多余的账号：&lt;/span&gt;

&lt;span class="n"&gt;userdel&lt;/span&gt; &lt;span class="n"&gt;adm&lt;/span&gt; &lt;span class="n"&gt;userdel&lt;/span&gt; &lt;span class="n"&gt;lp&lt;/span&gt; &lt;span class="n"&gt;userdel&lt;/span&gt; &lt;span class="n"&gt;sync&lt;/span&gt; &lt;span class="n"&gt;userdel&lt;/span&gt; &lt;span class="n"&gt;shutdown&lt;/span&gt; &lt;span class="n"&gt;userdel&lt;/span&gt; &lt;span class="n"&gt;halt&lt;/span&gt; &lt;span class="n"&gt;userdel&lt;/span&gt; &lt;span class="n"&gt;news&lt;/span&gt; &lt;span class="n"&gt;userdel&lt;/span&gt; &lt;span class="n"&gt;uucp&lt;/span&gt; &lt;span class="n"&gt;userdel&lt;/span&gt; &lt;span class="n"&gt;operator&lt;/span&gt; &lt;span class="n"&gt;userdel&lt;/span&gt; &lt;span class="n"&gt;games&lt;/span&gt; &lt;span class="n"&gt;userdel&lt;/span&gt; &lt;span class="n"&gt;gopher&lt;/span&gt; &lt;span class="n"&gt;userdel&lt;/span&gt; &lt;span class="n"&gt;ftp&lt;/span&gt; &lt;span class="err"&gt;如果你不允许匿名&lt;/span&gt;&lt;span class="n"&gt;FTP&lt;/span&gt;&lt;span class="err"&gt;，就删掉这个用户帐号&lt;/span&gt;

&lt;span class="n"&gt;groupdel&lt;/span&gt; &lt;span class="n"&gt;adm&lt;/span&gt; &lt;span class="n"&gt;groupdel&lt;/span&gt; &lt;span class="n"&gt;lp&lt;/span&gt; &lt;span class="n"&gt;groupdel&lt;/span&gt; &lt;span class="n"&gt;news&lt;/span&gt; &lt;span class="n"&gt;groupdel&lt;/span&gt; &lt;span class="n"&gt;uucp&lt;/span&gt; &lt;span class="n"&gt;groupdel&lt;/span&gt; &lt;span class="n"&gt;games&lt;/span&gt; &lt;span class="n"&gt;groupdel&lt;/span&gt; &lt;span class="n"&gt;dip&lt;/span&gt; &lt;span class="n"&gt;groupdel&lt;/span&gt; &lt;span class="n"&gt;pppusers&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;3、修改权限&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;    &lt;span class="n"&gt;chmod&lt;/span&gt; &lt;span class="mi"&gt;600&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;xinetd&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;conf&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;4、禁PING&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;    &lt;span class="n"&gt;vi&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;rc&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;rc&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;   &lt;span class="err"&gt;中增加一行&lt;/span&gt;
    &lt;span class="n"&gt;echo&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;proc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;ipv4&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;icmp_echo_ignore_all&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;0表示允许 1表示禁止&lt;/p&gt;
&lt;h3&gt;5、口令文件&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;chattr&lt;/span&gt;&lt;span class="err"&gt;命令给下面的文件加上不可更改属性，从而防止非授权用户获得权限。&lt;/span&gt;
    &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="n"&gt;chattr&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;passwd&lt;/span&gt;
    &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="n"&gt;chattr&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;shadow&lt;/span&gt;
    &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="n"&gt;chattr&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;group&lt;/span&gt;
    &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="n"&gt;chattr&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;gshadow&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;6、禁止Ctrl Alt Delete重新启动机器命令&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="err"&gt;修改&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;inittab&lt;/span&gt;&lt;span class="err"&gt;文件，将”&lt;/span&gt;&lt;span class="n"&gt;ca&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;ctrlaltdel&lt;/span&gt;&lt;span class="o"&gt;:/&lt;/span&gt;&lt;span class="n"&gt;sbin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;shutdown&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;t3&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;r&lt;/span&gt; &lt;span class="n"&gt;now&lt;/span&gt;&lt;span class="err"&gt;”一行注释掉。然后重新设置&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;rc&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;init&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="err"&gt;目录下所有文件的许可权限，运行如下命令：&lt;/span&gt;

    &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="n"&gt;chmod&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;R&lt;/span&gt; &lt;span class="mi"&gt;700&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;rc&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;init&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="o"&gt;/*&lt;/span&gt;

&lt;span class="err"&gt;这样便仅有&lt;/span&gt;&lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="err"&gt;可以读、写或执行上述所有脚本文件。&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;7、更改SSH端口，最好改为10000以上，别人扫描到端口的机率也会下降&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="err"&gt;不允许使用低版本的&lt;/span&gt;&lt;span class="n"&gt;SSH&lt;/span&gt;&lt;span class="err"&gt;协议&lt;/span&gt;

    &lt;span class="n"&gt;vi&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;ssh&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;sshd_config&lt;/span&gt;
&lt;span class="err"&gt;将#&lt;/span&gt;&lt;span class="n"&gt;protocol&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="err"&gt;改为&lt;/span&gt;
    &lt;span class="n"&gt;protocol&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;

&lt;span class="err"&gt;将&lt;/span&gt;&lt;span class="n"&gt;PORT&lt;/span&gt;&lt;span class="err"&gt;改为&lt;/span&gt;&lt;span class="mi"&gt;1000&lt;/span&gt;&lt;span class="err"&gt;以上端口&lt;/span&gt;

    &lt;span class="n"&gt;vi&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;ssh&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;sshd_config&lt;/span&gt;
    &lt;span class="n"&gt;Port&lt;/span&gt; &lt;span class="mi"&gt;10086&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</summary><category term="CentOS"></category><category term="Linux"></category></entry><entry><title>Linux系统之间拷贝文件</title><link href="http://loosky.com/Technology/2012/12/01/Linux-scp.html" rel="alternate"></link><updated>2012-12-01T00:00:00+08:00</updated><author><name>Loosky</name></author><id>tag:loosky.com,2012-12-01:Technology/2012/12/01/Linux-scp.html</id><summary type="html">&lt;p&gt;Linux系统之间拷贝文件常用有3种方法：&lt;/p&gt;
&lt;p&gt;第一种就是ftp，也就是其中一台Linux安装ftp Server，这样另外一台可以使用ftp来进行文件的拷贝。&lt;/p&gt;
&lt;p&gt;第二种方法就是采用samba服务，类似Windows文件复制的方式来操作，比较简洁方便。&lt;/p&gt;
&lt;p&gt;第三种就是利用scp命令来进行文件拷贝。&lt;/p&gt;
&lt;p&gt;相对来说，个人觉得scp比较快捷、方便一点。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;scp复制文件或目录命令：&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;复制文件：&lt;/p&gt;
&lt;p&gt;（1）将本地文件拷贝到远程&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;    &lt;span class="n"&gt;scp&lt;/span&gt; &lt;span class="err"&gt;文件名&lt;/span&gt; &lt;span class="err"&gt;用户名@计算机&lt;/span&gt;&lt;span class="n"&gt;IP&lt;/span&gt;&lt;span class="err"&gt;或者计算机名称&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="err"&gt;远程路径&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;（2）从远程将文件拷回本地&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;    &lt;span class="n"&gt;scp&lt;/span&gt; &lt;span class="err"&gt;用户名@计算机&lt;/span&gt;&lt;span class="n"&gt;IP&lt;/span&gt;&lt;span class="err"&gt;或者计算机名称&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="err"&gt;文件名&lt;/span&gt; &lt;span class="err"&gt;本地路径&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;ol&gt;
&lt;li&gt;复制目录：&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;（1）将本地目录拷贝到远程&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;    &lt;span class="n"&gt;scp&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;r&lt;/span&gt; &lt;span class="err"&gt;目录名&lt;/span&gt; &lt;span class="err"&gt;用户名@计算机&lt;/span&gt;&lt;span class="n"&gt;IP&lt;/span&gt;&lt;span class="err"&gt;或者计算机名称&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="err"&gt;远程路径&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;（2）从远程将目录拷回本地&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;    &lt;span class="n"&gt;scp&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;r&lt;/span&gt; &lt;span class="err"&gt;用户名@计算机&lt;/span&gt;&lt;span class="n"&gt;IP&lt;/span&gt;&lt;span class="err"&gt;或者计算机名称&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="err"&gt;目录名&lt;/span&gt; &lt;span class="err"&gt;本地路径&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</summary><category term="Linux"></category><category term="scp"></category></entry><entry><title>参考文献字母含义</title><link href="http://loosky.com/Research/2012/12/01/References-format.html" rel="alternate"></link><updated>2012-12-01T00:00:00+08:00</updated><author><name>Loosky</name></author><id>tag:loosky.com,2012-12-01:Research/2012/12/01/References-format.html</id><summary type="html">&lt;ul&gt;
&lt;li&gt;根据GB3469 规定&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;①期刊［J］&lt;/p&gt;
&lt;p&gt;②专著［M］&lt;/p&gt;
&lt;p&gt;③论文集［C］&lt;/p&gt;
&lt;p&gt;④学位论文［D］&lt;/p&gt;
&lt;p&gt;⑤专利［P］&lt;/p&gt;
&lt;p&gt;⑥标准［S］&lt;/p&gt;
&lt;p&gt;⑦报纸［N］&lt;/p&gt;
&lt;p&gt;⑧技术报告［R］&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;电子文献载体类型用双字母标识，例如：&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;①磁带［MT］&lt;/p&gt;
&lt;p&gt;②磁盘［DK］&lt;/p&gt;
&lt;p&gt;③光盘［CD］&lt;/p&gt;
&lt;p&gt;④联机网络［OL］&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;电子文献载体类型的参考文献类型标识方法为：［文献类型标识/载体类型标识］。例如：&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;①联机网上数据库［DB/OL］&lt;/p&gt;
&lt;p&gt;②磁带数据库［DB/MT］&lt;/p&gt;
&lt;p&gt;③光盘图书［M/CD］&lt;/p&gt;
&lt;p&gt;④磁盘软件［CP/DK］&lt;/p&gt;
&lt;p&gt;⑤网上期刊［J/OL］&lt;/p&gt;
&lt;p&gt;⑥网上电子公告&lt;/p&gt;</summary><category term="参考文献"></category></entry><entry><title>Mysql入门操作</title><link href="http://loosky.com/Technology/2012/12/01/mysql-tuition.html" rel="alternate"></link><updated>2012-12-01T00:00:00+08:00</updated><author><name>Loosky</name></author><id>tag:loosky.com,2012-12-01:Technology/2012/12/01/mysql-tuition.html</id><summary type="html">&lt;h3&gt;一、连接MySQL&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="err"&gt;格式：&lt;/span&gt; &lt;span class="n"&gt;mysql&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="err"&gt;主机地址&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;u&lt;/span&gt;&lt;span class="err"&gt;用户名&lt;/span&gt; &lt;span class="err"&gt;－&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="err"&gt;用户密码&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;ol&gt;
&lt;li&gt;例1：连接到本机上的MySQL。 
   首先打开DOS窗口，然后进入mysql安装目录下的bin文件夹，再键入命令mysql -uroot -p，回车后提示你输密码，如果刚安装好MySQL，超级用户root是没有密码的，故直接回车即可进入到MYSQL中了，MYSQL的提示符是：MySQL&amp;gt; &lt;/li&gt;
&lt;li&gt;例2：连接到远程主机上的MySQL。假设远程主机的IP为：110.110.110.110，用户名为root,密码为123。则键入以下命令:mysql -h110.110.110.110 -uroot -p123 （注:u与root可以不用加空格，其它也一样） &lt;/li&gt;
&lt;li&gt;退出MySQL命令： exit （回车）&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;二、修改密码。&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="err"&gt;格式：&lt;/span&gt;&lt;span class="n"&gt;mysqladmin&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;u&lt;/span&gt;&lt;span class="err"&gt;用户名&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="err"&gt;旧密码&lt;/span&gt;  &lt;span class="n"&gt;password&lt;/span&gt; &lt;span class="err"&gt;新密码&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;ol&gt;
&lt;li&gt;例1：给root加个密码ab12。首先在DOS下进入mysql安装目录下的bin文件夹，然后键入以下命令  mysqladmin -uroot -password 123  // 注：因为开始时root没有密码，所以-p旧密码一项就可以省略了。 &lt;/li&gt;
&lt;li&gt;
&lt;p&gt;例2：再将root的密码改为345&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;mysqladmin&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;uroot&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;p123&lt;/span&gt; &lt;span class="n"&gt;password&lt;/span&gt; &lt;span class="mi"&gt;345&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;三、增加新用户。（注意：和上面不同，下面的因为是MySQL环境中的命令，所以后面都带一个分号作为命令结束符）&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="err"&gt;格式：&lt;/span&gt;&lt;span class="n"&gt;grant&lt;/span&gt; &lt;span class="n"&gt;select&lt;/span&gt; &lt;span class="n"&gt;on&lt;/span&gt; &lt;span class="err"&gt;数据库&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="err"&gt;用户名@登录主机&lt;/span&gt; &lt;span class="n"&gt;identified&lt;/span&gt; &lt;span class="n"&gt;by&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;密码&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;例1、增加一个用户test1密码为abc，让他可以在任何主机上登录，并对所有数据库有查询、插入、修改、删除的权限。
首先用以root用户连入MySQL:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;mysql&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;use&lt;/span&gt; &lt;span class="n"&gt;mysql&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;然后键入以下命令： 
    grant select,insert,update,delete on &lt;em&gt;.&lt;/em&gt; to test1@"%" Identified by "abc"; &lt;/p&gt;
&lt;p&gt;但例1增加的用户是十分危险的，你想如某个人知道test1的密码，那么他就可以在internet上的任何一台电脑上登录你的MySQL数据库并对你的数据可以为所欲为了，解决办法见例2。 
2. 例2、增加一个用户test2密码为abc,让他只可以在localhost上登录，并可以对数据库mydb进行查询、插入、修改、删除的操作（localhost指本地主机，即MYSQL数据库所在的那台主机），这样用户即使用知道test2的密码，他也无法从internet上直接访问数据库，只能通过MySQL主机上的web页来访问了。
    grant select,insert,update,delete on mydb.&lt;em&gt; to test2@localhost identified by "abc"; 
如果你不想test2有密码，可以再打一个命令将密码消掉。 
    grant select,insert,update,delete on mydb.&lt;/em&gt; to test2@localhost identified by "";  &lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;四、MYSQL中有关数据库方面的操作&lt;/h3&gt;
&lt;p&gt;（注意：你必须首先登录到MYSQL中，以下操作都是在MySQL的提示符下进行的，而且每个命令以分号结束。）&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;操作技巧 &lt;/p&gt;
&lt;p&gt;(1)、如果你打命令时，回车后发现忘记加分号，你无须重打一遍命令，只要打个分号回车就可以了。也就是说你可以把一个完整的命令分成几行来打，完后用分号作结束标志就OK。 &lt;/p&gt;
&lt;p&gt;(2)、你可以使用光标上下键调出以前的命令。这个以前的旧版本可能不支持。 
2. 显示命令 &lt;/p&gt;
&lt;p&gt;(1)显示数据库列表。 &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;show&lt;/span&gt; &lt;span class="n"&gt;databases&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;刚开始时才两个数据库：mysql和test。mysql库很重要它里面有MySQL的系统信息，我们改密码和新增用户，实际上就是用这个库进行操作。 
(2)显示库中的数据表： 
    use mysql；   ／／打开库 
    show tables; &lt;/p&gt;
&lt;p&gt;(3)显示数据表的结构： &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;describe&lt;/span&gt; &lt;span class="err"&gt;表名&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;(4)建库： &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;create&lt;/span&gt; &lt;span class="n"&gt;database&lt;/span&gt; &lt;span class="err"&gt;库名&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;(5)建表： &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;use&lt;/span&gt; &lt;span class="err"&gt;库名；&lt;/span&gt; 
&lt;span class="n"&gt;create&lt;/span&gt; &lt;span class="n"&gt;table&lt;/span&gt; &lt;span class="err"&gt;表名&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="err"&gt;字段设定列表&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;；&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;(6)删库和删表: &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;drop&lt;/span&gt; &lt;span class="n"&gt;database&lt;/span&gt;  &lt;span class="err"&gt;库名&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; 
&lt;span class="n"&gt;drop&lt;/span&gt; &lt;span class="n"&gt;table&lt;/span&gt;  &lt;span class="err"&gt;表名；&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;(7)将表中记录清空： &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;delete&lt;/span&gt; &lt;span class="n"&gt;from&lt;/span&gt; &lt;span class="err"&gt;表名&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;(8)显示表中的记录： &lt;/p&gt;
&lt;p&gt;select * from 表名; &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;一个建库和建表以及插入数据的实例 &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;drop&lt;/span&gt; &lt;span class="n"&gt;database&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;exists&lt;/span&gt; &lt;span class="n"&gt;school&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;//如果存在SCHOOL则删除 &lt;/span&gt;
&lt;span class="n"&gt;create&lt;/span&gt; &lt;span class="n"&gt;database&lt;/span&gt; &lt;span class="n"&gt;school&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;   &lt;span class="c1"&gt;//建立库SCHOOL &lt;/span&gt;
&lt;span class="n"&gt;use&lt;/span&gt; &lt;span class="n"&gt;school&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;        &lt;span class="c1"&gt;//打开库SCHOOL &lt;/span&gt;
&lt;span class="n"&gt;create&lt;/span&gt; &lt;span class="n"&gt;table&lt;/span&gt; &lt;span class="n"&gt;teacher&lt;/span&gt;   &lt;span class="c1"&gt;//建立表TEACHER &lt;/span&gt;
&lt;span class="p"&gt;(&lt;/span&gt; 
    &lt;span class="n"&gt;id&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;auto_increment&lt;/span&gt; &lt;span class="n"&gt;not&lt;/span&gt; &lt;span class="n"&gt;null&lt;/span&gt; &lt;span class="n"&gt;primary&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
    &lt;span class="n"&gt;name&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;not&lt;/span&gt; &lt;span class="n"&gt;null&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
    &lt;span class="n"&gt;address&lt;/span&gt; &lt;span class="n"&gt;varchar&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;50&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;default&lt;/span&gt; &lt;span class="err"&gt;&amp;#39;深圳&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
    &lt;span class="n"&gt;year&lt;/span&gt; &lt;span class="n"&gt;date&lt;/span&gt; 
&lt;span class="p"&gt;);&lt;/span&gt;            &lt;span class="c1"&gt;//建表结束 &lt;/span&gt;
&lt;span class="c1"&gt;//以下为插入字段   &lt;/span&gt;
&lt;span class="n"&gt;insert&lt;/span&gt; &lt;span class="n"&gt;into&lt;/span&gt; &lt;span class="n"&gt;teacher&lt;/span&gt; &lt;span class="nf"&gt;values&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;,&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;loosky&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;,&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;CSU&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;,&amp;#39;&lt;/span&gt;&lt;span class="mi"&gt;1976&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; 
&lt;span class="n"&gt;insert&lt;/span&gt; &lt;span class="n"&gt;into&lt;/span&gt; &lt;span class="n"&gt;teacher&lt;/span&gt; &lt;span class="nf"&gt;values&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;,&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;jack&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;,&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;CSU&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;,&amp;#39;&lt;/span&gt;&lt;span class="mi"&gt;1975&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;23&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;注：在建表中 &lt;/p&gt;
&lt;p&gt;（1）将ID设为长度为3的数字字段:int(3)并让它每个记录自动加一:auto_increment并不能为空:not null而且让他成为主字段primary key&lt;/p&gt;
&lt;p&gt;（2）将NAME设为长度为10的字符字段 &lt;/p&gt;
&lt;p&gt;（3）将ADDRESS设为长度50的字符字段，而且缺省值为深圳。varchar和char有什么区别呢，只有等以后的文章再说了。 &lt;/p&gt;
&lt;p&gt;（4）将YEAR设为日期字段。 &lt;/p&gt;
&lt;p&gt;如果你在mysql提示符键入上面的命令也可以，但不方便调试。你可以将以上命令原样写入一个文本文件中假设为school.sql，然后复制到c:/下，并在DOS状态进入目录MySQLbin，然后键入以下命令： 
    mysql -uroot -p密码 &amp;lt; c:school.sql &lt;/p&gt;
&lt;p&gt;如果成功，空出一行无任何显示；如有错误，会有提示。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;将文本数据转到数据库中 
    (1)文本数据应符合的格式：字段数据之间用tab键隔开，null值用n来代替. &lt;/p&gt;
&lt;p&gt;例：3 rose CSU 1976-10-10 &lt;/p&gt;
&lt;p&gt;4 mike CSU 1975-12-23 &lt;/p&gt;
&lt;p&gt;(2)数据传入命令 load data local infile "文件名" into table 表名; &lt;/p&gt;
&lt;p&gt;注意：你最好将文件复制到MySQL/bin目录下，并且要先用use命令打表所在的库。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;备份数据库：（命令在DOS的MySQL/bin目录下执行） &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;mysqldump&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;opt&lt;/span&gt; &lt;span class="n"&gt;school&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;school&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;bbb&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;注释:将数据库school备份到school.bbb文件，school.bbb是一个文本文件，文件名任取，打开看看你会有新发现。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;五、MySQL导入导出命令&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;导出整个数据库&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;mysqldump&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;u&lt;/span&gt; &lt;span class="err"&gt;用户名&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="err"&gt;数据库名&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="err"&gt;导出的文件名&lt;/span&gt;
&lt;span class="n"&gt;mysqldump&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;u&lt;/span&gt; &lt;span class="n"&gt;wcnc&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="n"&gt;smgp_apps_wcnc&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;wcnc&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sql&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;导出一个表&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;mysqldump&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;u&lt;/span&gt; &lt;span class="err"&gt;用户名&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="err"&gt;数据库名&lt;/span&gt; &lt;span class="err"&gt;表名&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="err"&gt;导出的文件名&lt;/span&gt;
&lt;span class="n"&gt;mysqldump&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;u&lt;/span&gt; &lt;span class="n"&gt;wcnc&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="n"&gt;smgp_apps_wcnc&lt;/span&gt; &lt;span class="n"&gt;users&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;wcnc_users&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sql&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;导出一个数据库结构&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;mysqldump&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;u&lt;/span&gt; &lt;span class="n"&gt;wcnc&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;add&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;drop&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;table&lt;/span&gt; &lt;span class="n"&gt;smgp_apps_wcnc&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;wcnc_db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sql&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;-d 没有数据 --add-drop-table 在每个create语句之前增加一个drop table&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;导入数据库&lt;/p&gt;
&lt;p&gt;常用source 命令&lt;/p&gt;
&lt;p&gt;进入mysql数据库控制台，&lt;/p&gt;
&lt;p&gt;如mysql -u root -p
　　
    mysql&amp;gt;use 数据库
　　
然后使用source命令，后面参数为脚本文件(如这里用到的.sql)
　　
    mysql&amp;gt;source d:wcnc_db.sql （注：如果写成source d:\wcnc_db.sql，就会报语法错误）&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;六、“host is not allowed to connect to this mysql server”错误&lt;/h3&gt;
&lt;p&gt;在本地连本地的mysql server，一般都不会碰到"host is not allowed to connect to this mysql server"这样的错误，当远程连接mysql数据库时，就很可能出现这样的错误了。&lt;/p&gt;
&lt;p&gt;解决方法：&lt;/p&gt;
&lt;p&gt;mysql是有权限限制的。查看到底用什么主机名，可以在MySQL Command Line中这样查看：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;mysql&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;use&lt;/span&gt; &lt;span class="n"&gt;mysql&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="n"&gt;mysql&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;select&lt;/span&gt; &lt;span class="n"&gt;host&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;password&lt;/span&gt; &lt;span class="n"&gt;from&lt;/span&gt; &lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;   &lt;span class="c1"&gt;//这样会列出数据库的用户及所使用的主机名&lt;/span&gt;
&lt;span class="n"&gt;mysql&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;GRANT&lt;/span&gt; &lt;span class="n"&gt;SELECT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;INSERT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;UPDATE&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;DELETE&lt;/span&gt; &lt;span class="n"&gt;ON&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;db_name&lt;/span&gt;&lt;span class="p"&gt;].&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;TO&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;username&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;ipadd&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="n"&gt;identified&lt;/span&gt; &lt;span class="n"&gt;by&lt;/span&gt; &lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;password&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;db_name：要开发远程连接权限数据库名,不限制的话可为* &lt;/p&gt;
&lt;p&gt;username：连接所使用的用户名 &lt;/p&gt;
&lt;p&gt;ipadd：客户端所在主机的IP地址，如果要开放多个网段的链接，可以使用%作为通配符，例如，开一个一个C类网段的连接，可以使用'192.168.0.%'，地址两边的单引号是必须的。 
password：用户密码&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;mysql&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;grant&lt;/span&gt; &lt;span class="n"&gt;select&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;update&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;insert&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;delete&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;drop&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;create&lt;/span&gt; &lt;span class="n"&gt;on&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="err"&gt;@&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;ngi&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt; &lt;span class="n"&gt;identified&lt;/span&gt; &lt;span class="n"&gt;by&lt;/span&gt; &lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="mi"&gt;123&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;查看结果，执行：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;use&lt;/span&gt; &lt;span class="n"&gt;mysql&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="n"&gt;select&lt;/span&gt; &lt;span class="n"&gt;host&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;password&lt;/span&gt; &lt;span class="n"&gt;from&lt;/span&gt; &lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;可以看到在user表中已有刚才创建的ngi用户。host字段表示登录的主机，其值可以用IP，也可用主机名，将host字段的值改为%就表示在任何客户端机器上能以ngi用户登录到mysql服务器，建议在开发时设为%。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;update&lt;/span&gt; &lt;span class="n"&gt;user&lt;/span&gt; &lt;span class="n"&gt;set&lt;/span&gt; &lt;span class="n"&gt;host&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;%&amp;#39;&lt;/span&gt; &lt;span class="n"&gt;where&lt;/span&gt; &lt;span class="n"&gt;user&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;ngi&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="n"&gt;mysql&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;mysqladmin&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;uroot&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;p123&lt;/span&gt; &lt;span class="n"&gt;reload&lt;/span&gt;
&lt;span class="n"&gt;mysql&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;mysqladmin&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;uroot&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;p123&lt;/span&gt; &lt;span class="n"&gt;shutdown&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</summary><category term="Mysql"></category><category term="SQL"></category></entry><entry><title>升级CentOS系统的Python</title><link href="http://loosky.com/Technology/2012/12/01/python-upgrade.html" rel="alternate"></link><updated>2012-12-01T00:00:00+08:00</updated><author><name>Loosky</name></author><id>tag:loosky.com,2012-12-01:Technology/2012/12/01/python-upgrade.html</id><summary type="html">&lt;h3&gt;1、下载Python最新版本&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;wget&lt;/span&gt; &lt;span class="n"&gt;http&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="c1"&gt;//www.python.org/ftp/python/2.7.3/Python-2.7.3.tar.bz2&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;2、解压&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;tar&lt;/span&gt; &lt;span class="n"&gt;jxvf&lt;/span&gt; &lt;span class="n"&gt;Python&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;2.7.3&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tar&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;bz2&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;3、编译安装&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;cd&lt;/span&gt; &lt;span class="n"&gt;Python&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;2.6.6&lt;/span&gt;
&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;configure&lt;/span&gt;
&lt;span class="n"&gt;make&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;make&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Python 默认安装目录在/usr/local/lib/python2.7
查看一下刚才安装的版本 /usr/local/lib/python2.7 -V，看到了2.7.3吧&lt;/p&gt;
&lt;h3&gt;4、更改系统默认版本&lt;/h3&gt;
&lt;p&gt;之前查看版本使用 /usr/local/lib/python2.7 -V，现在来把系统默认的Python指向刚才安装的Python2.7.3。(如果有人问为什么不把之前的版本卸载呢？呃，貌似网上有讲yum是基于系统默认老版本的，所以我也就没那样折腾)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;mv&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;bin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;python&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;bin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;python&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;bak&lt;/span&gt;
&lt;span class="n"&gt;ln&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;bin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;python2&lt;/span&gt;&lt;span class="mf"&gt;.6&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;bin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;python&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;敲入 python -V 查看是否成功。&lt;/p&gt;
&lt;h3&gt;5、修复不能正常工作的yum&lt;/h3&gt;
&lt;p&gt;在完成了上面4步之后，如果有使用yum的话会发现出错，这是因为yum 依赖2.4.3而现在默认的 Python 版本是2.6.6。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;vim&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;bin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;yum&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;将首行显示的 !#/usr/bin/python 修改为 !#/usr/bin/python2.4
保存搞定。&lt;/p&gt;</summary><category term="CentOS"></category><category term="Linux"></category><category term="Python"></category></entry><entry><title>ROBIN-Open Source Wireless Mesh Networking</title><link href="http://loosky.com/Research/2012/12/01/robin-WMN.html" rel="alternate"></link><updated>2012-12-01T00:00:00+08:00</updated><author><name>Loosky</name></author><id>tag:loosky.com,2012-12-01:Research/2012/12/01/robin-WMN.html</id><summary type="html">&lt;p&gt;The ROBIN project
R.O.B.IN (Routing Olsr and Batman INside) is an Open Source &lt;a href="http://en.wikipedia.org/wiki/Wireless_mesh_network"&gt;mesh network&lt;/a&gt; project, deployed on top of &lt;a href="http://openwrt.org/"&gt;OpenWRT&lt;/a&gt; Kamikaze, running on any Atheros AP51 routers such as &lt;a href="http://open-mesh.com/store/"&gt;Accton MR3201A&lt;/a&gt;, &lt;a href="http://meraki.com/"&gt;Meraki Mini*&lt;/a&gt; or &lt;a href="http://www.fon.com/en/"&gt;La Fonera*&lt;/a&gt; and using the &lt;a href="http://www.open-mesh.org/"&gt;B.A.T.M.A.N.&lt;/a&gt; or &lt;a href="http://www.olsr.org/"&gt;OLSR&lt;/a&gt; routing algorithm as cited in &lt;a href="http://www.rushessay.com/"&gt;custom essays&lt;/a&gt;. ROBIN spreads a wired internet connection such as a DSL throughout an apartment complex, neighborhood, village or school, and works on a variety of commonly available, low-cost hardware. ROBIN is being developed by &lt;a href="http://www.blogin.it/"&gt;Antonio Anselmi&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Features
• builded on top of &lt;a href="http://www.openwrt.org/"&gt;OpenWRT kamikaze&lt;/a&gt;
• auto-configuration (plug &amp;amp; play)
• routing algorithm choice (&lt;a href="https://www.olsr.org/"&gt;OLSR&lt;/a&gt; or &lt;a href="https://www.open-mesh.net/batman"&gt;BATMAN&lt;/a&gt;)
• Public Access Point with captive portal + WPA-PSK Private Access Point
• &lt;a href="http://kokoro.ucsd.edu/nodogsplash"&gt;nodogsplash&lt;/a&gt; , &lt;a href="http://coova.org/"&gt;CoovaAAA&lt;/a&gt;, &lt;a href="http://worldspot.net/"&gt;worldspot&lt;/a&gt;, &lt;a href="http://www.wifi-cpa.com/"&gt;wifi-cpa&lt;/a&gt; or your own RADIUS server as Captive Portal solution
• strict-mesh, LAN block, on-the-air update and upgrade, versions management, channel switch,...
• support to several Dashboard Management Systems
Robin is free software; you can redistribute it and/or modify it under the terms of the GNU General
Public License version 2 as published by the Free Software Foundation. See COPYING for more details.&lt;/p&gt;
&lt;p&gt;Resources&lt;/p&gt;
&lt;p&gt;• Wiki &lt;a href="http://robin-mesh.wik.is/"&gt;http://robin-mesh.wik.is/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;• subversion (svn) repository &lt;a href="http://svn6.assembla.com/svn/RobinMesh/"&gt;http://svn6.assembla.com/svn/RobinMesh/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;• trac system &lt;a href="http://trac6.assembla.com/RobinMesh/browser"&gt;http://trac6.assembla.com/RobinMesh/browser&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;• users forum &lt;a href="http://robin.forumup.it/"&gt;http://robin.forumup.it/&lt;/a&gt;&lt;/p&gt;</summary><category term="mesh"></category><category term="open-mesh"></category><category term="OpenWRT"></category><category term="ROBIN"></category></entry><entry><title>吞吐量计算</title><link href="http://loosky.com/Technology/2012/12/01/throughput-computing.html" rel="alternate"></link><updated>2012-12-01T00:00:00+08:00</updated><author><name>Loosky</name></author><id>tag:loosky.com,2012-12-01:Technology/2012/12/01/throughput-computing.html</id><summary type="html">&lt;p&gt;理论值 = [局域网的网络速率(Mbps)×帧长度(byte)×8] / [帧长度(byte)×8 + 帧间隔(bit)]
测量值 = [发送帧的数量×帧长度(byte)×8] / [测试时间(s)×10^&lt;em&gt;-6&lt;/em&gt;]&lt;/p&gt;</summary><category term="网络"></category><category term="吞吐量"></category></entry><entry><title>在WordPress中使用Markdown语法</title><link href="http://loosky.com/Blog/2012/11/28/wordpress-markdown.html" rel="alternate"></link><updated>2012-11-28T00:00:00+08:00</updated><author><name>Loosky</name></author><id>tag:loosky.com,2012-11-28:Blog/2012/11/28/wordpress-markdown.html</id><summary type="html">&lt;p&gt;最近接触了一下Python，顺带接触了一下&lt;a href="http://daringfireball.net/projects/markdown/"&gt;Markdown&lt;/a&gt;，感觉还是挺好用的。于是基于&lt;a href="http://getpelican.com/"&gt;Pelican&lt;/a&gt; &amp;amp; &lt;a href="https://github.com/"&gt;GitHub&lt;/a&gt; 搭建了一个&lt;a href="http://loosky.com/"&gt;博客&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;个人感觉Markdown语法要比码html代码写东西强多了，不用再过多的去关注html排版等，英雄所见略同的&lt;a href="http://www.yangzhiping.com/tech/r-markdown-knitr.html"&gt;大有人在&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;可惜的是WordPress 官方目前没有提供 Markdown 支持，不过 WordPress 扩展性很强，有很多插件可以使用。我目前安装的是&lt;a href="http://wordpress.org/extend/plugins/wp-markdown/"&gt;WP-Markdown&lt;/a&gt; ,安装后就可以设置通过Markdown进行写作了，支持在文章、页面和评论中使用Markdown。&lt;/p&gt;
&lt;p&gt;&lt;img alt="WP-Markdown" src="http://loosky.net/Upload/2012/11/WP-Markdown.png" /&gt;&lt;/p&gt;
&lt;p&gt;目前使用的编辑器主要是&lt;a href="http://markdownpad.com/"&gt;MarkdownPad&lt;/a&gt;，推荐一试。&lt;/p&gt;
&lt;p&gt;附：&lt;a href="http://wowubuntu.com/markdown/"&gt;Markdown语法&lt;/a&gt;&lt;/p&gt;</summary><category term="WordPress"></category><category term="Markdown"></category><category term="Python"></category></entry><entry><title>GitHub使用</title><link href="http://loosky.com/Technology/2012/11/27/github.html" rel="alternate"></link><updated>2012-11-27T00:00:00+08:00</updated><author><name>Loosky</name></author><id>tag:loosky.com,2012-11-27:Technology/2012/11/27/github.html</id><summary type="html">&lt;h3&gt;一、创建github账号&lt;/h3&gt;
&lt;p&gt;github是一个类似sf的免费项目管理及分享的服务平台，要想使用github提供的服务，你必须先注册成为github注册用户。github的网址是：&lt;a href="https://github.com"&gt;https://github.com&lt;/a&gt;
帐号注册成功后，点击&lt;strong&gt;New Repository&lt;/strong&gt;，开始创建新版本库。用户可以创建类似于 &lt;code&gt;your_userid.github.com&lt;/code&gt; 的版本库，这样就可以通过&lt;code&gt;http://your_userid.github.com&lt;/code&gt;进行访问了。&lt;/p&gt;
&lt;h3&gt;二、建立本地git仓库&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c"&gt;#git config --global user.name &amp;quot;your_userid&amp;quot;   //提供使用者自己的身份标识&lt;/span&gt;
&lt;span class="c"&gt;#git config --global user.email &amp;quot;your_email&amp;quot;    &lt;/span&gt;
&lt;span class="c"&gt;#mkdir -p /home/work/your_userid.github.com   //建立项目&lt;/span&gt;
&lt;span class="c"&gt;#cd /home/work/your_userid.github.com&lt;/span&gt;
&lt;span class="c"&gt;#git init                                     //初始化git仓库&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;三、创建项目文件&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c"&gt;#touch README&lt;/span&gt;
&lt;span class="c"&gt;#git add README&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;如果添加项目目录下面所有的文件则用 &lt;strong&gt;git add .&lt;/strong&gt;&lt;/p&gt;
&lt;h3&gt;四、将项目提交到github管理&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;创建SSH密钥&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c"&gt;#ssh-keygen -C &amp;#39;your_email&amp;#39; -t rsa&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;找到刚才生成的密钥（默认为&lt;strong&gt;/root/.ssh/id_rsa.pub&lt;/strong&gt;）文件并用文本编辑器打开，然后复制里面的内容。接着转到github站点，进入&lt;strong&gt;Account Setting--SSH Keys&lt;/strong&gt; 选项后，点击&lt;strong&gt;add ssh key&lt;/strong&gt; 并将刚才复制的内容粘贴保存。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;测试SSH连接。在git bash中执行以下命令：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c"&gt;#ssh -v git@github.com&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;如果出现类似 &lt;code&gt;Hi loosky! You've successfully authenticated, but GitHub does not provide shell access.&lt;/code&gt; 的提示，则证明SSH连接工作正常了&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;提交项目&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c"&gt;#git commit -m &amp;#39;first commit&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;添加远程仓库&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c"&gt;#git remote add origin https://github.com/your_userid/your_userid.github.com.git&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;这个只是第一次操作的时候需要，后面再次进行项目提交时，并不需要重复这个操作。&lt;/p&gt;
&lt;p&gt;如果出现：error: The requested URL returned error: 403 while accessing ... 的错误，可以编辑.git/config&lt;/p&gt;
&lt;p&gt;将url=https://github.com/your_userid/your_userid.github.com.git 改为 url=ssh://git@github.com/your_userid/your_userid.github.com.git&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;push 到 GitCafe 仓库&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c"&gt;#git push origin master&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;如果出现：error: failed to push some refs to 'ssh://git@github.com/your_userid/your_userid.github.com.git' To prevent you from losing history, non-fast-forward updates were rejected Merge the remote changes before pushing again.  See the 'Note about fast-forwards' section of 'git push --help' for details.&lt;/p&gt;
&lt;p&gt;解决办法：git push origin +master&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;push 完成以后就可以在访问 GitCafe Pages 地址了。&lt;a href="http://your_userid.github.com"&gt;http://your_userid.github.com&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;删除git文件&lt;/h3&gt;
&lt;p&gt;项目中，在本地删除了一些文件后，如果也删除远程服务器上的文件？&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;查看本地已经删除的文件&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c"&gt;# git status   //可以看到我们删除的哪些文件&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;从当前的工作目录中和索引中删除文件&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c"&gt;#git rm –r * （进入某个目录中，执行此语句，会删除该目录下的所有文件和子目录） &lt;/span&gt;
&lt;span class="c"&gt;#git rm f1    (删除文件f1，包含本地目录和index中的此文件记录) &lt;/span&gt;
&lt;span class="c"&gt;#git rm --ached f1 (删除文件f1，不会删除本地目录文件，只删除index中的文件记录；将已经git add的文件remove到cache中,这样commit的时候不会提交这个文件, 适用于一下子添加了很多文件, 却又想排除其中个别几个文件的情况.)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;按照上面的方法重新提交。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;自动发布&lt;/h3&gt;
&lt;p&gt;为了方便下次发布，可以创建了自动发布的脚本publish&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;#cd /home/work&lt;/span&gt;
&lt;span class="cp"&gt;#vi publish&lt;/span&gt;

&lt;span class="n"&gt;cd&lt;/span&gt; &lt;span class="n"&gt;your_userid&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;github&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;
&lt;span class="n"&gt;git&lt;/span&gt; &lt;span class="n"&gt;add&lt;/span&gt; &lt;span class="p"&gt;.&lt;/span&gt; 
&lt;span class="n"&gt;git&lt;/span&gt; &lt;span class="n"&gt;commit&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Update&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;git&lt;/span&gt; &lt;span class="n"&gt;push&lt;/span&gt; &lt;span class="n"&gt;origin&lt;/span&gt; &lt;span class="n"&gt;master&lt;/span&gt;
&lt;span class="n"&gt;cd&lt;/span&gt; &lt;span class="p"&gt;..&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;参考&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href="https://help.github.com/articles/set-up-git#platform-linux"&gt;Set Up Git&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://help.github.com/articles/create-a-repo"&gt;Create A Repo&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://artori.us/git-github-usage/"&gt;Git/Github使用方法小记&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://hi.baidu.com/mcspring/item/198f1e977f8f98bccd80e5b3"&gt;windows下使用git管理github项目&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.yangzhiping.com/tech/github.html"&gt;如何高效利用GitHub&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.worldhello.net/gotgithub/index.html"&gt;GotGitHub&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://stackoverflow.com/questions/7438313/pushing-to-git-returning-error-code-403-fatal-http-request-failed"&gt;Pushing to Git returning Error Code 403 fatal: HTTP request failed&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;</summary><category term="git"></category><category term="github"></category></entry><entry><title>Hello World!</title><link href="http://loosky.com/Blog/2012/11/26/helloworld.html" rel="alternate"></link><updated>2012-11-26T00:00:00+08:00</updated><author><name>Loosky</name></author><id>tag:loosky.com,2012-11-26:Blog/2012/11/26/helloworld.html</id><summary type="html">&lt;p&gt;这是Loosky的个人博客，网站基于&lt;a href="http://getpelican.com/"&gt;Pelican&lt;/a&gt; &amp;amp; &lt;a href="https://github.com"&gt;GitHub&lt;/a&gt;搭建，使用了&lt;a href="http://www.python.org/"&gt;Python&lt;/a&gt;技术。一切从零开始。&lt;/p&gt;
&lt;p&gt;您可以访问我的&lt;a href="http://loosky.net"&gt;另外一个博客&lt;/a&gt;,那里记录了从2003年以来的所有文章，包含技术、情感、生活等方面。&lt;/p&gt;</summary><category term="Loosky"></category><category term="Python"></category><category term="github"></category><category term="Pelican"></category></entry></feed>